(this["webpackJsonppsi-frontend"]=this["webpackJsonppsi-frontend"]||[]).push([[0],{293:function(t,e,a){},294:function(t,e,a){},295:function(t,e,a){},296:function(t,e,a){},297:function(t,e,a){},298:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(33),i=a.n(c),s=a(35),o=a(34),l=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,311)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;a(t),n(t),r(t),c(t),i(t)}))},h=a(7),u=a(17),d=a(22),j=a(24),b=a(23),g=a(182),O=a(301),p=a(300),m=a(1),f=function(){return Object(m.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#ffffff",children:[Object(m.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(m.jsx)("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"})]})},x=function(t){return Object(m.jsx)(p.a,Object(h.a)({component:f},t))},y=function(){return Object(m.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#ffffff",children:[Object(m.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(m.jsx)("path",{d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"})]})},S=function(t){return Object(m.jsx)(p.a,Object(h.a)({component:y},t))},C=function(){return Object(m.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#ffffff",children:[Object(m.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(m.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})]})},v=function(t){return Object(m.jsx)(p.a,Object(h.a)({component:C},t))},k=function(){return Object(m.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#ffffff",children:[Object(m.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(m.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})]})},I=function(t){return Object(m.jsx)(p.a,Object(h.a)({component:k},t))},D=function(){return Object(m.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#ffffff",children:[Object(m.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(m.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"})]})},N=function(t){return Object(m.jsx)(p.a,Object(h.a)({component:D},t))},F=function(){return Object(m.jsxs)("svg",{enableBackground:"new 0 0 24 24",height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#ffffff",children:[Object(m.jsx)("g",{children:Object(m.jsx)("path",{d:"M0,0h24v24H0V0z",fill:"none"})}),Object(m.jsx)("g",{children:Object(m.jsx)("path",{d:"M17,8l-1.41,1.41L17.17,11H9v2h8.17l-1.58,1.58L17,16l4-4L17,8z M5,5h7V3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h7v-2H5V5z"})})]})},w=function(t){return Object(m.jsx)(p.a,Object(h.a)({component:F},t))},E=function(){return Object(m.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#ffffff",children:[Object(m.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(m.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM7.07 18.28c.43-.9 3.05-1.78 4.93-1.78s4.51.88 4.93 1.78C15.57 19.36 13.86 20 12 20s-3.57-.64-4.93-1.72zm11.29-1.45c-1.43-1.74-4.9-2.33-6.36-2.33s-4.93.59-6.36 2.33C4.62 15.49 4 13.82 4 12c0-4.41 3.59-8 8-8s8 3.59 8 8c0 1.82-.62 3.49-1.64 4.83zM12 6c-1.94 0-3.5 1.56-3.5 3.5S10.06 13 12 13s3.5-1.56 3.5-3.5S13.94 6 12 6zm0 5c-.83 0-1.5-.67-1.5-1.5S11.17 8 12 8s1.5.67 1.5 1.5S12.83 11 12 11z"})]})},P=function(t){return Object(m.jsx)(p.a,Object(h.a)({component:E},t))},z=function(){return Object(m.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(m.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(m.jsx)("path",{d:"M16.66 4.52l2.83 2.83-2.83 2.83-2.83-2.83 2.83-2.83M9 5v4H5V5h4m10 10v4h-4v-4h4M9 15v4H5v-4h4m7.66-13.31L11 7.34 16.66 13l5.66-5.66-5.66-5.65zM11 3H3v8h8V3zm10 10h-8v8h8v-8zm-10 0H3v8h8v-8z"})]})},L=function(t){return Object(m.jsx)(p.a,Object(h.a)({component:z},t))},B=function(){return Object(m.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(m.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(m.jsx)("path",{d:"M9 13.75c-2.34 0-7 1.17-7 3.5V19h14v-1.75c0-2.33-4.66-3.5-7-3.5zM4.34 17c.84-.58 2.87-1.25 4.66-1.25s3.82.67 4.66 1.25H4.34zM9 12c1.93 0 3.5-1.57 3.5-3.5S10.93 5 9 5 5.5 6.57 5.5 8.5 7.07 12 9 12zm0-5c.83 0 1.5.67 1.5 1.5S9.83 10 9 10s-1.5-.67-1.5-1.5S8.17 7 9 7zm7.04 6.81c1.16.84 1.96 1.96 1.96 3.44V19h4v-1.75c0-2.02-3.5-3.17-5.96-3.44zM15 12c1.93 0 3.5-1.57 3.5-3.5S16.93 5 15 5c-.54 0-1.04.13-1.5.35.63.89 1 1.98 1 3.15s-.37 2.26-1 3.15c.46.22.96.35 1.5.35z"})]})},T=function(t){return Object(m.jsx)(p.a,Object(h.a)({component:B},t))},A=function(){return Object(m.jsx)("svg",{enableBackground:"new 0 0 24 24",height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:Object(m.jsxs)("g",{children:[Object(m.jsx)("rect",{fill:"none",height:"24",width:"24"}),Object(m.jsxs)("g",{children:[Object(m.jsx)("path",{d:"M19,3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h14c1.1,0,2-0.9,2-2V5C21,3.9,20.1,3,19,3z M19,19H5V5h14V19z"}),Object(m.jsx)("rect",{height:"5",width:"2",x:"7",y:"12"}),Object(m.jsx)("rect",{height:"10",width:"2",x:"15",y:"7"}),Object(m.jsx)("rect",{height:"3",width:"2",x:"11",y:"14"}),Object(m.jsx)("rect",{height:"2",width:"2",x:"11",y:"10"})]})]})})},M=function(t){return Object(m.jsx)(p.a,Object(h.a)({component:A},t))},q=function(){return Object(m.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#ffffff",children:[Object(m.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(m.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})]})},V=function(t){return Object(m.jsx)(p.a,Object(h.a)({component:q},t))},R=function(){return Object(m.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(m.jsx)("path",{d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z",fill:"none"}),Object(m.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"})]})},J=function(t){return Object(m.jsx)(p.a,Object(h.a)({component:R},t))},H=function(){return Object(m.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(m.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(m.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})]})},Y=function(t){return Object(m.jsx)(p.a,Object(h.a)({component:H},t))},U=function(){return Object(m.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(m.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(m.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"})]})},_=function(t){return Object(m.jsx)(p.a,Object(h.a)({component:U},t))},K=function(){return Object(m.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(m.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(m.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})]})},G=function(t){return Object(m.jsx)(p.a,Object(h.a)({component:K},t))},W=a(132),Q=a(21),X=a(171),Z=a(308),$=a(109),tt=a(46),et=a(142),at=a.n(et),nt="https://britz-psi-heroku.herokuapp.com/api/v1",rt=function(){var t=document.cookie.split(";").find((function(t){return t.includes("MOTOBUY_AUTH")}));return t?t.split("=")[1]:""},ct=function(t,e,a){var n={url:nt+e,method:t,timeout:6e4};return"get"===t&&a&&Object.keys(a).length>0?n.params=a:a&&Object.keys(a).length>0&&(n.data=a),new Promise((function(t,e){at()(n).then((function(e){return t(e)})).catch((function(t){e(t),console.log(t.response)}))}))},it=function(t){var e=document.cookie.split(";"),a={userId:"",password:""},r=e.find((function(t){return t.includes("MOTOBUY_KEEP_LOGIN")}))&&"true"===e.find((function(t){return t.includes("MOTOBUY_KEEP_LOGIN")})).split("=")[1],c=Object(n.useState)(!1),i=Object(W.a)(c,2),s=i[0],o=i[1];Object(n.useEffect)((function(){Object(Q.b)().replace("/")}),[]);var l=function(t,e){a[t]=e.target.value};return Object(m.jsx)("div",{className:"login-wrapper",children:Object(m.jsxs)("div",{className:"login-board",children:[Object(m.jsxs)("div",{className:"login-board-header",children:[Object(m.jsx)("div",{className:"login-board-logo",children:"M"}),Object(m.jsx)("h1",{className:"login-board-title",children:"MOTOBUY PSI"})]}),Object(m.jsxs)("div",{className:"login-board-form",children:[Object(m.jsx)(Z.a,{placeholder:"User ID",prefix:Object(m.jsx)(G,{}),onChange:function(t){return l("userId",t)}}),Object(m.jsx)(Z.a.Password,{placeholder:"Password",prefix:Object(m.jsx)(_,{}),iconRender:function(t){return t?Object(m.jsx)(Y,{}):Object(m.jsx)(J,{})},onChange:function(t){return l("password",t)}}),Object(m.jsx)($.a,{defaultChecked:r,onChange:function(t){return r=t.target.checked},children:"Keep me logged."})]}),Object(m.jsx)("div",{className:"login-board-footer",children:Object(m.jsx)(tt.a,{onClick:function(){o(!0),r&&(document.cookie="MOTOBUY_KEEP_LOGIN=".concat(r,"; path=/; max-age=86400")),function(t,e,a){var n={url:nt+e,method:t,timeout:6e4};return"get"===t&&a&&Object.keys(a).length>0?n.params=a:a&&Object.keys(a).length>0&&(n.data=a),new Promise((function(t,e){at()(n).then((function(e){return t(e)})).catch((function(t){e(t),console.log(t.response)}))}))}("post","/author/login",a).then((function(e){var n=e.data;if(0===n.code){g.b.success("\u767b\u5165\u6210\u529f");var r=new X.Buffer("".concat(a.userId,":").concat(a.password)).toString("base64");document.cookie="MOTOBUY_AUTH=".concat(r,"; path=/; max-age=86400"),localStorage.setItem("MOTOBUY_ROLES",JSON.stringify(n.data.authorities.map((function(t){return t.authority})))),setTimeout((function(){return t.onLogin()}),200)}else g.b.error("\u767b\u5165\u5931\u6557"),o(!1)})).catch((function(t){g.b.error("\u767b\u5165\u5931\u6557"),o(!1)}))},loading:s,children:"LOGIN"})})]})})},st=a(63),ot=[{key:"Dashboard",routes:["Dashboard"],icon:Object(m.jsx)(M,{}),title:"\u5100\u8868\u677f",accessRoles:[]},{key:"Basic",routes:["Basic"],icon:Object(m.jsx)(T,{}),title:"\u57fa\u672c\u8cc7\u6599",accessRoles:["ROLE_BASIC_MENU"],children:[{key:"Supplier",routes:["Basic","Supplier"],title:"\u5ee0\u5546",accessRoles:["ROLE_VENDOR"]},{key:"Customer",routes:["Basic","Customer"],title:"\u5ba2\u6236",accessRoles:["ROLE_CUSTOMER"]},{key:"Employee",routes:["Basic","Employee"],title:"\u54e1\u5de5",accessRoles:["ROLE_EMPLOYEE"]}]},{key:"Parts",routes:["Parts"],icon:Object(m.jsx)(L,{}),title:"\u96f6\u4ef6\u7ba1\u7406",accessRoles:["ROLE_PART_MENU"],children:[{key:"Vehicle",routes:["Parts","Vehicle"],title:"\u8eca\u7a2e",accessRoles:["ROLE_KIND"]},{key:"Level",routes:["Parts","Level"],title:"\u7b49\u7d1a",accessRoles:["ROLE_GRADE"]},{key:"Colour",routes:["Parts","Colour"],title:"\u984f\u8272",accessRoles:["ROLE_COLOR"]},{key:"Component",routes:["Parts","Component"],title:"\u96f6\u4ef6",accessRoles:["ROLE_PART"]}]}],lt=function(t){var e=Object(n.useState)([]),a=Object(W.a)(e,2),r=a[0],c=a[1];Object(n.useEffect)((function(){void 0!==t.match.params.page?c([t.match.params.page]):void 0!==t.match.params.type?c([t.match.params.type]):c(["Home"])}),[t.match.params.type,t.match.params.page]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{className:"layout-sider-logo",children:Object(m.jsxs)(s.b,{to:"/",children:[Object(m.jsxs)("span",{className:"layout-sider-logo-f",children:["MOTOBUY",Object(m.jsx)("br",{}),"PSI"]}),Object(m.jsx)("span",{className:"layout-sider-logo-s",children:"M"})]})}),Object(m.jsx)(st.a,{className:"layout-sider-menu",selectedKeys:r,onClick:function(t){var e=t.item,a=Object(Q.b)(),n=e.props.data.routes.map((function(t){return"/".concat(t)})).join("");a.push(n),c(""===e.props.data.routes[0]?["Home"]:e.props.data.routes)},children:ot.map((function(t){var e=JSON.parse(localStorage.getItem("MOTOBUY_ROLES"));return t.accessRoles.length<1||t.accessRoles.filter((function(t){return e.includes(t)})).length>0?t.children&&t.children.length>0?Object(m.jsx)(st.a.SubMenu,{icon:t.icon,title:t.title,popupClassName:"layout-sider-popup",children:t.children.map((function(t){return t.accessRoles.length<1||t.accessRoles.filter((function(t){return e.includes(t)})).length>0?Object(m.jsx)(st.a.Item,{data:t,children:t.title},t.key):null}))},t.key):Object(m.jsx)(st.a.Item,{icon:t.icon,data:t,children:t.title},t.key):null}))})]})},ht=function(t){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"layout-header-left",children:Object(m.jsx)(Z.a.Search,{placeholder:"\u5168\u57df\u641c\u5c0b",enterButton:!0})}),Object(m.jsxs)("div",{className:"layout-header-right",children:[Object(m.jsx)(tt.a,{children:Object(m.jsx)(N,{})}),Object(m.jsx)(tt.a,{onClick:t.onLogout,children:Object(m.jsx)(w,{})}),Object(m.jsx)(tt.a,{className:"layout-header-account",children:Object(m.jsx)(P,{})})]})]})},ut=function(t){return Object(n.useEffect)((function(){Object(Q.b)().replace("/Dashboard")})),"Dashboard"},dt=a(43),jt=a(310),bt=a(78),gt=a(307),Ot=a(100),pt=a(58),mt=a(108),ft=a(302),xt=a(110),yt=function t(){Object(u.a)(this,t),this.getSupplierList=function(t){return ct("get","/vendor",t).then((function(t){return t.data}))},this.getSupplierData=function(t){return ct("get","/vendor/".concat(t)).then((function(t){return t.data}))},this.updateSupplierData=function(t,e){return ct("patch","/vendor/".concat(t),e).then((function(t){return t.data}))}},St=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).history=Object(Q.b)(),n.supplierAPI=new yt,n.getList=function(){var t=n.state,e=t.search,a=t.pagination,r={pageNum:a.current,pageSize:a.pageSize,queryByEnum:e.id,queryKeyWord:"%".concat(e.keyword,"%")};n.supplierAPI.getSupplierList(r).then((function(t){a.total=t.data.total,n.setState({loading:!1,list:t.data.list,pagination:a})})).catch((function(){return n.setState({loading:!1})}))},n.onSelectChange=function(t){var e=n.state.search;e.id=t,n.setState({search:e})},n.onInputChange=function(t){var e=n.state.search;e.keyword=t.target.value,n.setState({search:e})},n.handleSearch=function(){n.setState({loading:!0},(function(){return n.getList()}))},n.getColumns=function(){var t=Object(dt.a)(n),e=n.state.pagination;return[{dataIndex:"vendorId",title:"\u57f7\u884c",width:50,render:function(e){return Object(m.jsxs)(jt.b,{className:"list-table-option",children:[Object(m.jsx)(bt.a,{title:"\u7de8\u8f2f",children:Object(m.jsx)(tt.a,{className:"list-table-option-edit",size:"small",onClick:t.onEdit.bind(t,e),children:Object(m.jsx)(S,{})})}),Object(m.jsx)(bt.a,{title:"\u522a\u9664",children:Object(m.jsx)(tt.a,{className:"list-table-option-delete",size:"small",onClick:t.handleDelete.bind(t,e),children:Object(m.jsx)(x,{})})})]})}},{title:"\u5e8f",width:30,align:"center",render:function(t,a,n){return(e.current-1)*e.pageSize+n+1}},{title:"\u5ee0\u5546\u4ee3\u865f",dataIndex:"vendorId"},{title:"\u5ee0\u5546\u7c21\u7a31",dataIndex:"shortName"},{title:"\u806f\u7d61\u4eba",dataIndex:"contactPerson"},{title:"\u5730\u5740",dataIndex:"address"},{title:"\u96fb\u8a711",dataIndex:"phone1"},{title:"\u50b3\u771f\u865f\u78bc",dataIndex:"faxNumber"},{title:"\u884c\u52d5\u96fb\u8a71",dataIndex:"cellPhone"}]},n.onEdit=function(t){n.history.push("/Basic/Supplier/".concat(t))},n.handleDelete=function(t){gt.a.confirm({title:"\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u7b46\u8cc7\u6599\u55ce",icon:Object(m.jsx)(xt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){console.log("delete: "+t)}})},n.onPageChange=function(t,e){var a=n.state.pagination;a.current=t,a.pageSize=e,n.setState({loading:!0},(function(){return n.getList()}))},n.state={loading:!0,search:{id:"VENDOR_ID",keyword:""},list:[],pagination:{current:1,total:0,pageSize:10,position:["bottomLeft"]}},n.getList(),n}return Object(d.a)(a,[{key:"render",value:function(){var t=this;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"",style:{marginBottom:10},children:Object(m.jsxs)(Ot.a,{type:"flex",justify:"space-between",children:[Object(m.jsx)(pt.a,{children:Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(I,{}),onClick:function(){return t.history.push("/Basic/Supplier/Add")},className:"list-header-add",children:"\u65b0\u589e"})}),Object(m.jsx)(pt.a,{children:Object(m.jsxs)(jt.b,{children:[Object(m.jsxs)(mt.a,{placeholder:"\u641c\u5c0b\u6b04\u4f4d",value:this.state.search.id,onChange:this.onSelectChange,children:[Object(m.jsx)(mt.a.Option,{value:"VENDOR_ID",children:"\u5ee0\u5546\u4ee3\u865f"}),Object(m.jsx)(mt.a.Option,{value:"NAME",children:"\u5ee0\u5546\u540d\u7a31"})]}),Object(m.jsx)(Z.a,{placeholder:"\u641c\u5c0b\u5167\u5bb9",allowClear:!0,onChange:this.onInputChange}),Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(v,{}),onClick:this.handleSearch,className:"list-header-search",children:"\u67e5\u8a62"})]})})]})}),Object(m.jsx)(ft.a,{className:"list-table-wrapper",rowKey:"vendorId",size:"small",columns:this.getColumns(),loading:this.state.loading,dataSource:this.state.list,pagination:Object(h.a)(Object(h.a)({},this.state.pagination),{},{showTotal:function(t,e){return"".concat(e[0]," - ").concat(e[1]," \u5171 ").concat(t," \u7b46")},showSizeChanger:!0,onChange:this.onPageChange})})]})}}]),a}(r.a.Component),Ct=a(309),vt=a(177),kt=a(304),It=a(305),Dt=function(t){var e=t.required,a=t.align,n=void 0===a?"center":a,r=t.title,c=t.content,i=t.message,s=t.error;return Object(m.jsxs)("div",{style:{display:"flex",alignItems:n},children:[Object(m.jsxs)("div",{style:{marginRight:8,width:80,textAlign:"right"},children:[e&&Object(m.jsx)(It.a.Text,{type:"danger",style:{marginRight:5},children:"*"}),Object(m.jsx)(It.a.Text,{children:r})]}),Object(m.jsxs)("div",{style:{width:"calc(100% - 80px)",position:"relative"},children:[c,s&&Object(m.jsx)("span",{style:{color:"red",position:"absolute",width:"100%",left:0,top:"100%",fontSize:"12px"},children:i})]})]})},Nt=a(137),Ft=a(61),wt={vendorId:"",name:"",shortName:"",principal:"",contactPerson:"",postCode:"",address:"",phone1:"",phone2:"",faxNumber:"",cellPhone:"",note1:"",note2:""},Et=[{key:"vendorId",required:!0,length:[10]},{key:"name",required:!0,length:[30]},{key:"shortName",required:!0,length:[10]},{key:"principal",length:[2,10]},{key:"contactPerson",length:[2,10]},{key:"address",length:[100]},{key:"phone1",required:!0,length:[10]},{key:"phone2",length:[10]},{key:"faxNumber",length:[10]},{key:"cellPhone",length:[10]},{key:"note1",length:[255]},{key:"note2",length:[255]}],Pt=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).history=Object(Q.b)(),n.supplierAPI=new yt,n.getSupplierData=function(){n.supplierAPI.getSupplierData(n.props.vendorId).then((function(t){0===t.code?n.setState({loading:!1,formData:t.data},(function(){return n.checkCanSubmit()})):(g.b.error(t.message),n.history.push("/Basic/Supplier"))})).catch((function(){g.b.error("Error!"),n.history.push("/Basic/Supplier")}))},n.getFormErrorStatus=function(t){var e=n.state.formStatus.find((function(e){return e.key===t}));return!!e&&e.error},n.onInputChange=function(t){var e=t.target.getAttribute("id"),a=t.target.value,r=n.state.formData;r[e]=a,n.checkData(r,e)},n.checkData=function(t,e){var a=n.state.formStatus,r=a.find((function(t){return t.key===e}));if(r){var c=t[e],i=!1;r.required&&!c&&(i=!0),r.length&&r.length.length>0&&c&&(1===r.length.length&&c.length>r.length[0]||r.length.length>1&&(c.length<r.length[0]||c.length>r.length[1]))&&(i=!0),r.regExp&&!r.regExp.test(c)&&(i=!0),r.error=i}n.setState({formData:t,formStatus:a},(function(){return n.checkCanSubmit()}))},n.checkCanSubmit=function(){n.setState({canSubmit:!n.state.formStatus.some((function(t){return t.error}))})},n.handleCreate=function(t){n.setState({loading:!0},(function(){setTimeout((function(){g.b.success("\u6210\u529f\u65b0\u589e\u8cc7\u6599"),t&&n.history.push("/Basic/Supplier")}),1e3)}))},n.handleSubmit=function(t){n.setState({loading:!0},(function(){n.supplierAPI.updateSupplierData(n.props.vendorId,n.state.formData).then((function(e){0===e.code?(g.b.success("\u6210\u529f\u66f4\u65b0\u8cc7\u6599"),t?n.history.push("/Basic/Supplier"):n.getSupplierData()):gt.a.error({title:e.message,icon:Object(m.jsx)(xt.a,{}),content:e.data.map((function(t,e){return Object(m.jsxs)(m.Fragment,{children:[e>0&&Object(m.jsx)("br",{}),t.split(": ")[1]]})})),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(){g.b.error("\u8cc7\u6599\u66f4\u65b0\u5931\u6557"),n.setState({loading:!1})}))}))},n.handleCancel=function(){gt.a.confirm({title:"\u8b8a\u66f4\u5c1a\u672a\u5132\u5b58\uff0c\u78ba\u5b9a\u8981\u96e2\u958b\u55ce",icon:Object(m.jsx)(xt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){n.history.push("/Basic/Supplier")}})},n.state={loading:!t.createFlag,formData:Object(h.a)({},wt),formStatus:JSON.parse(JSON.stringify(Et)),canSubmit:!1},t.createFlag||n.getSupplierData(),n}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(t){var e=this;!t.createFlag&&this.props.createFlag?this.setState({formData:Object(h.a)({},wt),formStatus:JSON.parse(JSON.stringify(Et)),canSubmit:!1}):this.props.createFlag||t.vendorId===this.props.vendorId||this.setState({loading:!0,formData:Object(h.a)({},wt),formStatus:JSON.parse(JSON.stringify(Et)),canSubmit:!1},(function(){return e.getSupplierData()}))}},{key:"render",value:function(){var t={gutter:[24,24],type:"flex",align:"middle",style:{marginBottom:24,marginTop:24}},e={xs:24,sm:24,md:24,lg:8};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(Ct.a,{style:{marginBottom:10},children:[Object(m.jsx)(Ct.a.Item,{children:Object(m.jsx)(s.b,{to:"/Basic/Supplier",children:"\u5ee0\u5546"})}),Object(m.jsx)(Ct.a.Item,{children:this.props.createFlag?"\u65b0\u589e\u5ee0\u5546":"\u4fee\u6539\u5ee0\u5546\u8cc7\u6599"})]}),Object(m.jsxs)(vt.a,{spinning:this.state.loading,children:[Object(m.jsx)(kt.a,{className:"form-detail-card",children:Object(m.jsxs)(Ot.a,Object(h.a)(Object(h.a)({},t),{},{children:[Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!0,title:"\u5ee0\u5546\u4ee3\u865f",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.vendorId,id:"vendorId",disabled:!this.props.createFlag}),message:"\u5ee0\u5546\u4ee3\u865f\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("vendorId")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!0,title:"\u5ee0\u5546\u540d\u7a31",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.name,id:"name"}),message:"\u5ee0\u5546\u540d\u7a31\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572830\u5b57\u5167",error:this.getFormErrorStatus("name")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!0,title:"\u5ee0\u5546\u7c21\u7a31",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.shortName,id:"shortName"}),message:"\u5ee0\u5546\u7c21\u7a31\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("shortName")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!1,title:"\u8ca0\u8cac\u4eba",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.principal,id:"principal"}),message:"\u9577\u5ea6\u9700\u57282~10\u5b57",error:this.getFormErrorStatus("principal")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!1,title:"\u806f\u7d61\u4eba",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.contactPerson,id:"contactPerson"}),message:"\u9577\u5ea6\u9700\u57282~10\u5b57",error:this.getFormErrorStatus("contactPerson")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!1,title:"\u50b3\u771f\u865f\u78bc",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.faxNumber,id:"faxNumber"}),message:"\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("faxNumber")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!0,title:"\u96fb\u8a711",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.phone1,id:"phone1"}),message:"\u96fb\u8a711\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("phone1")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!1,title:"\u96fb\u8a712",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.phone2,id:"phone2"}),message:"\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("phone2")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!1,title:"\u884c\u52d5\u96fb\u8a71",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.cellPhone,id:"cellPhone"}),message:"\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("cellPhone")})}))]}))}),Object(m.jsx)(kt.a,{className:"form-detail-card",children:Object(m.jsx)(Ot.a,Object(h.a)(Object(h.a)({},t),{},{children:Object(m.jsx)(pt.a,{span:24,children:Object(m.jsx)(Dt,{required:!1,title:"\u5730\u5740",content:Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(Ot.a,{type:"flex",gutter:[10],children:[Object(m.jsx)(pt.a,{style:{width:120},children:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.postCode,id:"postCode",placeholder:"\u90f5\u905e\u5340\u865f"})}),Object(m.jsx)(pt.a,{style:{width:"calc(100% - 120px)"},children:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.address,id:"address",placeholder:"\u5730\u5740"})})]})}),message:"\u9577\u5ea6\u9700\u5728100\u5b57\u5167",error:this.getFormErrorStatus("address")})})}))}),Object(m.jsx)(kt.a,{className:"form-detail-card",children:Object(m.jsxs)(Ot.a,Object(h.a)(Object(h.a)({},t),{},{align:"top",children:[Object(m.jsx)(pt.a,{span:24,children:Object(m.jsx)(Dt,{required:!1,align:"flex-start",title:"\u5099\u8a3b1",content:Object(m.jsx)(Z.a.TextArea,{onChange:this.onInputChange,value:this.state.formData.note1,id:"note1",autoSize:{minRows:4,maxRows:4}}),message:"\u9577\u5ea6\u9700\u5728255\u5b57\u5167",error:this.getFormErrorStatus("note1")})}),Object(m.jsx)(pt.a,{span:24,children:Object(m.jsx)(Dt,{required:!1,align:"flex-start",title:"\u5099\u8a3b2",content:Object(m.jsx)(Z.a.TextArea,{onChange:this.onInputChange,value:this.state.formData.note2,id:"note2",autoSize:{minRows:4,maxRows:4}}),message:"\u9577\u5ea6\u9700\u5728255\u5b57\u5167",error:this.getFormErrorStatus("note2")})})]}))}),Object(m.jsx)("div",{style:{margin:"20px",textAlign:"center"},children:Object(m.jsxs)(jt.b,{children:[this.props.createFlag?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleCreate.bind(this,!1),children:"\u65b0\u589e"}),Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleCreate.bind(this,!0),children:"\u65b0\u589e\u4e26\u8fd4\u56de"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleSubmit.bind(this,!1),children:"\u5132\u5b58"}),Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleSubmit.bind(this,!0),children:"\u5132\u5b58\u4e26\u8fd4\u56de"})]}),Object(m.jsx)(tt.a,{danger:!0,icon:Object(m.jsx)(Ft.a,{}),onClick:this.handleCancel,children:"\u53d6\u6d88"})]})})]})]})}}]),a}(r.a.Component),zt=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(m.jsx)(Pt,{createFlag:this.props.createFlag,vendorId:this.props.match.params.vendorId})}}]),a}(r.a.Component),Lt=function t(){Object(u.a)(this,t),this.getCustomerList=function(t){return ct("get","/customers",t).then((function(t){return t.data}))},this.getCustomerData=function(t){return ct("get","/customers/".concat(t)).then((function(t){return t.data}))},this.updateCustomerData=function(t,e){return ct("patch","/customers/".concat(t),e).then((function(t){return t.data}))}},Bt=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).history=Object(Q.b)(),n.customerAPI=new Lt,n.getList=function(){var t=n.state,e=t.search,a=t.pagination,r={pageNum:a.current,pageSize:a.pageSize,queryByEnum:e.id,queryKeyWord:"%".concat(e.keyword,"%")};n.customerAPI.getCustomerList(r).then((function(t){a.total=t.data.total,n.setState({loading:!1,list:t.data.list,pagination:a})})).catch((function(){return n.setState({loading:!1})}))},n.onSelectChange=function(t){var e=n.state.search;e.id=t,n.setState({search:e})},n.onInputChange=function(t){var e=n.state.search;e.keyword=t.target.value,n.setState({search:e})},n.handleSearch=function(){n.setState({loading:!0},(function(){return n.getList()}))},n.getColumns=function(){var t=Object(dt.a)(n),e=n.state.pagination;return[{dataIndex:"customerId",title:"\u57f7\u884c",width:50,render:function(e){return Object(m.jsxs)(jt.b,{className:"list-table-option",children:[Object(m.jsx)(bt.a,{title:"\u7de8\u8f2f",children:Object(m.jsx)(tt.a,{className:"list-table-option-edit",size:"small",onClick:t.onEdit.bind(t,e),children:Object(m.jsx)(S,{})})}),Object(m.jsx)(bt.a,{title:"\u522a\u9664",children:Object(m.jsx)(tt.a,{className:"list-table-option-delete",size:"small",onClick:t.handleDelete.bind(t,e),children:Object(m.jsx)(x,{})})})]})}},{title:"\u5e8f",width:30,align:"center",render:function(t,a,n){return(e.current-1)*e.pageSize+n+1}},{title:"\u5ba2\u6236\u4ee3\u865f",dataIndex:"customerId"},{title:"\u5ba2\u6236\u7c21\u7a31",dataIndex:"shortName"},{title:"\u806f\u7d61\u4eba",dataIndex:"contactPerson"},{title:"\u5730\u5740",dataIndex:"address"},{title:"\u96fb\u8a711",dataIndex:"phone1"},{title:"\u50b3\u771f\u865f\u78bc",dataIndex:"faxNumber"},{title:"\u884c\u52d5\u96fb\u8a71",dataIndex:"cellPhone"}]},n.onEdit=function(t){n.history.push("/Basic/Customer/".concat(t))},n.handleDelete=function(t){gt.a.confirm({title:"\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u7b46\u8cc7\u6599\u55ce",icon:Object(m.jsx)(xt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){console.log("delete: "+t)}})},n.onPageChange=function(t,e){var a=n.state.pagination;a.current=t,a.pageSize=e,n.setState({loading:!0},(function(){return n.getList()}))},n.state={loading:!0,search:{id:"CUSTOMER_ID",keyword:""},list:[],pagination:{current:1,total:0,pageSize:10,position:["bottomLeft"]}},n.getList(),n}return Object(d.a)(a,[{key:"render",value:function(){var t=this;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"",style:{marginBottom:10},children:Object(m.jsxs)(Ot.a,{type:"flex",justify:"space-between",children:[Object(m.jsx)(pt.a,{children:Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(I,{}),onClick:function(){return t.history.push("/Basic/Customer/Add")},className:"list-header-add",children:"\u65b0\u589e"})}),Object(m.jsx)(pt.a,{children:Object(m.jsxs)(jt.b,{children:[Object(m.jsxs)(mt.a,{placeholder:"\u641c\u5c0b\u6b04\u4f4d",value:this.state.search.id,onChange:this.onSelectChange,children:[Object(m.jsx)(mt.a.Option,{value:"CUSTOMER_ID",children:"\u5ba2\u6236\u4ee3\u865f"}),Object(m.jsx)(mt.a.Option,{value:"NAME",children:"\u5ba2\u6236\u540d\u7a31"})]}),Object(m.jsx)(Z.a,{placeholder:"\u641c\u5c0b\u5167\u5bb9",allowClear:!0,onChange:this.onInputChange}),Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(v,{}),onClick:this.handleSearch,className:"list-header-search",children:"\u67e5\u8a62"})]})})]})}),Object(m.jsx)(ft.a,{className:"list-table-wrapper",rowKey:"customerId",size:"small",columns:this.getColumns(),loading:this.state.loading,dataSource:this.state.list,pagination:Object(h.a)(Object(h.a)({},this.state.pagination),{},{showTotal:function(t,e){return"".concat(e[0]," - ").concat(e[1]," \u5171 ").concat(t," \u7b46")},showSizeChanger:!0,onChange:this.onPageChange})})]})}}]),a}(r.a.Component),Tt={customerId:"",name:"",shortName:"",principal:"",contactPerson:"",postCode:"",address:"",phone1:"",phone2:"",faxNumber:"",cellPhone:"",note1:"",note2:""},At=[{key:"customerId",required:!0,length:[10]},{key:"name",required:!0,length:[30]},{key:"shortName",required:!0,length:[10]},{key:"principal",length:[2,10]},{key:"contactPerson",length:[2,10]},{key:"address",length:[100]},{key:"phone1",length:[10]},{key:"phone2",length:[10]},{key:"faxNumber",length:[10]},{key:"cellPhone",length:[10]},{key:"note1",length:[255]},{key:"note2",length:[255]}],Mt=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).history=Object(Q.b)(),n.customerAPI=new Lt,n.getCustomerData=function(){n.customerAPI.getCustomerData(n.props.customerId).then((function(t){0===t.code?n.setState({loading:!1,formData:t.data},(function(){return n.checkCanSubmit()})):(g.b.error(t.message),n.history.push("/Basic/Customer"))})).catch((function(){g.b.error("Error!"),n.history.push("/Basic/Customer")}))},n.getFormErrorStatus=function(t){var e=n.state.formStatus.find((function(e){return e.key===t}));return!!e&&e.error},n.onInputChange=function(t){var e=t.target.getAttribute("id"),a=t.target.value,r=n.state.formData;r[e]=a,n.checkData(r,e)},n.checkData=function(t,e){var a=n.state.formStatus,r=a.find((function(t){return t.key===e}));if(r){var c=t[e],i=!1;r.required&&!c&&(i=!0),r.length&&r.length.length>0&&c&&(1===r.length.length&&c.length>r.length[0]||r.length.length>1&&(c.length<r.length[0]||c.length>r.length[1]))&&(i=!0),r.regExp&&!r.regExp.test(c)&&(i=!0),r.error=i}n.setState({formData:t,formStatus:a},(function(){return n.checkCanSubmit()}))},n.checkCanSubmit=function(){n.setState({canSubmit:!n.state.formStatus.some((function(t){return t.error}))})},n.handleCreate=function(t){n.setState({loading:!0},(function(){setTimeout((function(){g.b.success("\u6210\u529f\u65b0\u589e\u8cc7\u6599"),t&&n.history.push("/Basic/Supplier")}),1e3)}))},n.handleSubmit=function(t){n.setState({loading:!0},(function(){n.customerAPI.updateCustomerData(n.props.customerId,n.state.formData).then((function(e){0===e.code?(g.b.success("\u6210\u529f\u66f4\u65b0\u8cc7\u6599"),t?n.history.push("/Basic/Customer"):n.getCustomerData()):gt.a.error({title:e.message,icon:Object(m.jsx)(xt.a,{}),content:e.data.map((function(t,e){return Object(m.jsxs)(m.Fragment,{children:[e>0&&Object(m.jsx)("br",{}),t.split(": ")[1]]})})),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(){g.b.error("\u8cc7\u6599\u66f4\u65b0\u5931\u6557"),n.setState({loading:!1})}))}))},n.handleCancel=function(){gt.a.confirm({title:"\u8b8a\u66f4\u5c1a\u672a\u5132\u5b58\uff0c\u78ba\u5b9a\u8981\u96e2\u958b\u55ce",icon:Object(m.jsx)(xt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){n.history.push("/Basic/Customer")}})},n.state={loading:!t.createFlag,formData:Object(h.a)({},Tt),formStatus:JSON.parse(JSON.stringify(At)),canSubmit:!1},t.createFlag||n.getCustomerData(),n}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(t){var e=this;!t.createFlag&&this.props.createFlag?this.setState({formData:Object(h.a)({},Tt),formStatus:JSON.parse(JSON.stringify(At)),canSubmit:!1}):this.props.createFlag||t.customerId===this.props.customerId||this.setState({loading:!0,formData:Object(h.a)({},Tt),formStatus:JSON.parse(JSON.stringify(At)),canSubmit:!1},(function(){return e.getCustomerData()}))}},{key:"render",value:function(){var t={gutter:[24,24],type:"flex",align:"middle",style:{marginBottom:24,marginTop:24}},e={xs:24,sm:24,md:24,lg:8};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(Ct.a,{style:{marginBottom:10},children:[Object(m.jsx)(Ct.a.Item,{children:Object(m.jsx)(s.b,{to:"/Basic/Customer",children:"\u5ba2\u6236"})}),Object(m.jsx)(Ct.a.Item,{children:this.props.createFlag?"\u65b0\u589e\u5ba2\u6236":"\u4fee\u6539\u5ba2\u6236\u8cc7\u6599"})]}),Object(m.jsxs)(vt.a,{spinning:this.state.loading,children:[Object(m.jsx)(kt.a,{className:"form-detail-card",children:Object(m.jsxs)(Ot.a,Object(h.a)(Object(h.a)({},t),{},{children:[Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!0,title:"\u5ba2\u6236\u4ee3\u865f",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.customerId,id:"customerId",disabled:!this.props.createFlag}),message:"\u5ba2\u6236\u4ee3\u865f\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("customerId")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!0,title:"\u5ba2\u6236\u540d\u7a31",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.name,id:"name"}),message:"\u5ba2\u6236\u540d\u7a31\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572830\u5b57\u5167",error:this.getFormErrorStatus("name")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!0,title:"\u5ba2\u6236\u7c21\u7a31",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.shortName,id:"shortName"}),message:"\u5ba2\u6236\u7c21\u7a31\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("shortName")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!1,title:"\u8ca0\u8cac\u4eba",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.principal,id:"principal"}),message:"\u9577\u5ea6\u9700\u57282~10\u5b57",error:this.getFormErrorStatus("principal")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!1,title:"\u806f\u7d61\u4eba",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.contactPerson,id:"contactPerson"}),message:"\u9577\u5ea6\u9700\u57282~10\u5b57",error:this.getFormErrorStatus("contactPerson")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!1,title:"\u50b3\u771f\u865f\u78bc",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.faxNumber,id:"faxNumber"}),message:"\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("faxNumber")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!1,title:"\u96fb\u8a711",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.phone1,id:"phone1"}),message:"\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("phone1")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!1,title:"\u96fb\u8a712",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.phone2,id:"phone2"}),message:"\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("phone2")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!1,title:"\u884c\u52d5\u96fb\u8a71",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.cellPhone,id:"cellPhone"}),message:"\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("cellPhone")})}))]}))}),Object(m.jsx)(kt.a,{className:"form-detail-card",children:Object(m.jsx)(Ot.a,Object(h.a)(Object(h.a)({},t),{},{children:Object(m.jsx)(pt.a,{span:24,children:Object(m.jsx)(Dt,{required:!1,title:"\u5730\u5740",content:Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(Ot.a,{type:"flex",gutter:[10],children:[Object(m.jsx)(pt.a,{style:{width:120},children:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.postCode,id:"postCode",placeholder:"\u90f5\u905e\u5340\u865f"})}),Object(m.jsx)(pt.a,{style:{width:"calc(100% - 120px)"},children:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.address,id:"address",placeholder:"\u5730\u5740"})})]})}),message:"\u9577\u5ea6\u9700\u5728100\u5b57\u5167",error:this.getFormErrorStatus("address")})})}))}),Object(m.jsxs)(kt.a,{className:"form-detail-card",children:[Object(m.jsx)(Ot.a,Object(h.a)(Object(h.a)({},t),{},{align:"top",children:Object(m.jsx)(pt.a,{span:24,children:Object(m.jsx)(Dt,{required:!1,align:"flex-start",title:"\u5099\u8a3b1",content:Object(m.jsx)(Z.a.TextArea,{onChange:this.onInputChange,value:this.state.formData.note1,id:"note1",autoSize:{minRows:4,maxRows:4}}),message:"\u9577\u5ea6\u9700\u5728255\u5b57\u5167",error:this.getFormErrorStatus("note1")})})})),Object(m.jsx)(Ot.a,Object(h.a)(Object(h.a)({},t),{},{children:Object(m.jsx)(pt.a,{span:24,children:Object(m.jsx)(Dt,{required:!1,align:"flex-start",title:"\u5099\u8a3b2",content:Object(m.jsx)(Z.a.TextArea,{onChange:this.onInputChange,value:this.state.formData.note2,id:"note2",autoSize:{minRows:4,maxRows:4}}),message:"\u9577\u5ea6\u9700\u5728255\u5b57\u5167",error:this.getFormErrorStatus("note2")})})}))]}),Object(m.jsx)("div",{style:{margin:"20px",textAlign:"center"},children:Object(m.jsxs)(jt.b,{children:[this.props.createFlag?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleCreate.bind(this,!1),children:"\u65b0\u589e"}),Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleCreate.bind(this,!0),children:"\u65b0\u589e\u4e26\u8fd4\u56de"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleSubmit.bind(this,!1),children:"\u5132\u5b58"}),Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleSubmit.bind(this,!0),children:"\u5132\u5b58\u4e26\u8fd4\u56de"})]}),Object(m.jsx)(tt.a,{danger:!0,icon:Object(m.jsx)(Ft.a,{}),onClick:this.handleCancel,children:"\u53d6\u6d88"})]})})]})]})}}]),a}(r.a.Component),qt=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(m.jsx)(Mt,{createFlag:this.props.createFlag,customerId:this.props.match.params.customerId})}}]),a}(r.a.Component),Vt=function t(){Object(u.a)(this,t),this.getEmployeeList=function(t){return ct("get","/employees",t).then((function(t){return t.data}))},this.getEmployeeData=function(t){return ct("get","/employees/".concat(t)).then((function(t){return t.data}))},this.updateEmployeeData=function(t,e){return ct("patch","/employees/".concat(t),e).then((function(t){return t.data}))}},Rt=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).history=Object(Q.b)(),n.employeeAPI=new Vt,n.getList=function(){var t=n.state,e=t.search,a=t.pagination,r={pageNum:a.current,pageSize:a.pageSize,queryByEnum:e.id,queryKeyWord:"%".concat(e.keyword,"%")};n.employeeAPI.getEmployeeList(r).then((function(t){a.total=t.data.total,n.setState({loading:!1,list:t.data.list,pagination:a})})).catch((function(){return n.setState({loading:!1})}))},n.onSelectChange=function(t){var e=n.state.search;e.id=t,n.setState({search:e})},n.onInputChange=function(t){var e=n.state.search;e.keyword=t.target.value,n.setState({search:e})},n.handleSearch=function(){n.setState({loading:!0},(function(){return n.getList()}))},n.getColumns=function(){var t=Object(dt.a)(n),e=n.state.pagination;return[{dataIndex:"employeeId",title:"\u57f7\u884c",width:50,render:function(e){return Object(m.jsxs)(jt.b,{className:"list-table-option",children:[Object(m.jsx)(bt.a,{title:"\u7de8\u8f2f",children:Object(m.jsx)(tt.a,{className:"list-table-option-edit",size:"small",onClick:t.onEdit.bind(t,e),children:Object(m.jsx)(S,{})})}),Object(m.jsx)(bt.a,{title:"\u522a\u9664",children:Object(m.jsx)(tt.a,{className:"list-table-option-delete",size:"small",onClick:t.handleDelete.bind(t,e),children:Object(m.jsx)(x,{})})})]})}},{title:"\u5e8f",width:30,align:"center",render:function(t,a,n){return(e.current-1)*e.pageSize+n+1}},{title:"\u54e1\u5de5\u7de8\u865f",dataIndex:"employeeId"},{title:"\u59d3\u540d",dataIndex:"name"},{title:"\u624b\u6a5f\u865f\u78bc",dataIndex:"cellPhone"},{title:"\u5e02\u5167\u96fb\u8a71",dataIndex:"phone"}]},n.onEdit=function(t){n.history.push("/Basic/Employee/".concat(t))},n.handleDelete=function(t){gt.a.confirm({title:"\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u7b46\u8cc7\u6599\u55ce",icon:Object(m.jsx)(xt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){console.log("delete: "+t)}})},n.onPageChange=function(t,e){var a=n.state.pagination;a.current=t,a.pageSize=e,n.setState({loading:!0},(function(){return n.getList()}))},n.state={loading:!0,search:{id:"EMPLOYEE_ID",keyword:""},list:[],pagination:{current:1,total:0,pageSize:10,position:["bottomLeft"]}},n.getList(),n}return Object(d.a)(a,[{key:"render",value:function(){var t=this;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"",style:{marginBottom:10},children:Object(m.jsxs)(Ot.a,{type:"flex",justify:"space-between",children:[Object(m.jsx)(pt.a,{children:Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(I,{}),onClick:function(){return t.history.push("/Basic/Employee/Add")},className:"list-header-add",children:"\u65b0\u589e"})}),Object(m.jsx)(pt.a,{children:Object(m.jsxs)(jt.b,{children:[Object(m.jsxs)(mt.a,{placeholder:"\u641c\u5c0b\u6b04\u4f4d",value:this.state.search.id,onChange:this.onSelectChange,children:[Object(m.jsx)(mt.a.Option,{value:"EMPLOYEE_ID",children:"\u54e1\u5de5\u7de8\u865f"}),Object(m.jsx)(mt.a.Option,{value:"NAME",children:"\u59d3\u540d"})]}),Object(m.jsx)(Z.a,{placeholder:"\u641c\u5c0b\u5167\u5bb9",allowClear:!0,onChange:this.onInputChange}),Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(v,{}),onClick:this.handleSearch,className:"list-header-search",children:"\u67e5\u8a62"})]})})]})}),Object(m.jsx)(ft.a,{className:"list-table-wrapper",rowKey:"employeeId",size:"small",columns:this.getColumns(),loading:this.state.loading,dataSource:this.state.list,pagination:Object(h.a)(Object(h.a)({},this.state.pagination),{},{showTotal:function(t,e){return"".concat(e[0]," - ").concat(e[1]," \u5171 ").concat(t," \u7b46")},showSizeChanger:!0,onChange:this.onPageChange})})]})}}]),a}(r.a.Component),Jt=a(303),Ht=a(306),Yt=a(47),Ut=a.n(Yt),_t={employeeId:"",identityCardNumber:"",name:"",birthday:null,address:"",cellPhone:"",phone:"",takeOfficeDay:null,education:"",experience:"",note:"",salary:null,extraBonus:null,fullAttendanceBonus:null},Kt=[{key:"employeeId",required:!0,length:[10]},{key:"identityCardNumber",required:!0,length:[10]},{key:"name",required:!0,length:[30]},{key:"address",length:[100]},{key:"cellPhone",length:[10]},{key:"phone",length:[10]},{key:"education",length:[10]},{key:"experience",length:[10]},{key:"note",length:[255]}],Gt=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).history=Object(Q.b)(),n.employeeAPI=new Vt,n.getEmployeeData=function(){n.employeeAPI.getEmployeeData(n.props.employeeId).then((function(t){0===t.code?n.setState({loading:!1,formData:Object(h.a)(Object(h.a)({},t.data),{},{birthday:Ut()(t.data.birthday.join("-"),"YYYY-MM-DD").valueOf(),takeOfficeDay:Ut()(t.data.takeOfficeDay.join("-"),"YYYY-MM-DD").valueOf()})},(function(){return n.checkCanSubmit()})):(g.b.error(t.message),n.history.push("/Basic/Employee"))})).catch((function(){g.b.error("Error!"),n.history.push("/Basic/Employee")}))},n.getFormErrorStatus=function(t){var e=n.state.formStatus.find((function(e){return e.key===t}));return!!e&&e.error},n.onInputChange=function(t){var e=t.target.getAttribute("id"),a=t.target.value,r=n.state.formData;r[e]=a,n.checkData(r,e)},n.onDateChange=function(t,e){var a=n.state.formData;a[t]=Ut()(e).valueOf(),n.checkData(a,t)},n.onNumberChange=function(t,e){var a=n.state.formData;a[t]=e,n.checkData(a,t)},n.checkData=function(t,e){var a=n.state.formStatus,r=a.find((function(t){return t.key===e}));if(r){var c=t[e],i=!1;r.required&&!c&&(i=!0),r.length&&r.length.length>0&&c&&(1===r.length.length&&c.length>r.length[0]||r.length.length>1&&(c.length<r.length[0]||c.length>r.length[1]))&&(i=!0),r.regExp&&!r.regExp.test(c)&&(i=!0),r.error=i}n.setState({formData:t,formStatus:a},(function(){return n.checkCanSubmit()}))},n.checkCanSubmit=function(){n.setState({canSubmit:!n.state.formStatus.some((function(t){return t.error}))})},n.handleCreate=function(t){n.setState({loading:!0},(function(){setTimeout((function(){g.b.success("\u6210\u529f\u65b0\u589e\u8cc7\u6599"),t&&n.history.push("/Parts/Vehicle")}),1e3)}))},n.handleSubmit=function(t){n.setState({loading:!0},(function(){n.employeeAPI.updateEmployeeData(n.props.employeeId,Object(h.a)(Object(h.a)({},n.state.formData),{},{birthday:Ut()(n.state.formData.birthday).format("YYYY-MM-DD"),takeOfficeDay:Ut()(n.state.formData.takeOfficeDay).format("YYYY-MM-DD")})).then((function(e){0===e.code?(g.b.success("\u6210\u529f\u66f4\u65b0\u8cc7\u6599"),t?n.history.push("/Basic/Employee"):n.getEmployeeData()):gt.a.error({title:e.message,icon:Object(m.jsx)(xt.a,{}),content:e.data.map((function(t,e){return Object(m.jsxs)(m.Fragment,{children:[e>0&&Object(m.jsx)("br",{}),t.split(": ")[1]]})})),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(t){g.b.error("\u8cc7\u6599\u66f4\u65b0\u5931\u6557"),n.setState({loading:!1})}))}))},n.handleCancel=function(){gt.a.confirm({title:"\u8b8a\u66f4\u5c1a\u672a\u5132\u5b58\uff0c\u78ba\u5b9a\u8981\u96e2\u958b\u55ce",icon:Object(m.jsx)(xt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){n.history.push("/Basic/Employee")}})},n.state={loading:!t.createFlag,formData:Object(h.a)({},_t),formStatus:JSON.parse(JSON.stringify(Kt)),canSubmit:!1},t.createFlag||n.getEmployeeData(),n}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(t){var e=this;!t.createFlag&&this.props.createFlag?this.setState({formData:Object(h.a)({},_t),formStatus:JSON.parse(JSON.stringify(Kt)),canSubmit:!1}):this.props.createFlag||t.employeeId===this.props.employeeId||this.setState({loading:!0,formData:Object(h.a)({},_t),formStatus:JSON.parse(JSON.stringify(Kt)),canSubmit:!1},(function(){return e.getEmployeeData()}))}},{key:"render",value:function(){var t={gutter:[24,24],type:"flex",align:"middle",style:{marginBottom:24,marginTop:24}},e={xs:24,sm:24,md:24,lg:8};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(Ct.a,{style:{marginBottom:10},children:[Object(m.jsx)(Ct.a.Item,{children:Object(m.jsx)(s.b,{to:"/Basic/Employee",children:"\u54e1\u5de5"})}),Object(m.jsx)(Ct.a.Item,{children:this.props.createFlag?"\u65b0\u589e\u54e1\u5de5":"\u4fee\u6539\u54e1\u5de5\u8cc7\u6599"})]}),Object(m.jsxs)(vt.a,{spinning:this.state.loading,children:[Object(m.jsx)(kt.a,{className:"form-detail-card",children:Object(m.jsxs)(Ot.a,Object(h.a)(Object(h.a)({},t),{},{children:[Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!0,title:"\u54e1\u5de5\u7de8\u865f",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.employeeId,id:"employeeId",disabled:!this.props.createFlag}),message:"\u54e1\u5de5\u7de8\u865f\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("employeeId")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!0,title:"\u8eab\u5206\u8b49\u865f",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.identityCardNumber,id:"identityCardNumber"}),message:"\u8eab\u5206\u8b49\u865f\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("identityCardNumber")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!0,title:"\u59d3\u540d",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.name,id:"name"}),message:"\u59d3\u540d\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572830\u5b57\u5167",error:this.getFormErrorStatus("name")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!1,title:"\u51fa\u751f\u5e74\u6708\u65e5",content:Object(m.jsx)(Jt.a,{onChange:this.onDateChange.bind(this,"birthday"),value:this.state.formData.birthday?Ut()(this.state.formData.birthday):void 0,format:"YYYY-MM-DD",placeholder:"",style:{display:"block"}})})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!1,title:"\u624b\u6a5f\u865f\u78bc",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.cellPhone,id:"cellPhone"}),message:"\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("cellPhone")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!1,title:"\u5e02\u5167\u96fb\u8a71",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.phone,id:"phone"}),message:"\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("phone")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!1,title:"\u5c31\u8077\u65e5\u671f",content:Object(m.jsx)(Jt.a,{onChange:this.onDateChange.bind(this,"takeOfficeDay"),value:this.state.formData.takeOfficeDay?Ut()(this.state.formData.takeOfficeDay):void 0,format:"YYYY-MM-DD",placeholder:"",style:{display:"block"}})})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!1,title:"\u5b78\u6b77",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.education,id:"education"}),message:"\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("education")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!1,title:"\u85aa\u8cc7",content:Object(m.jsx)(Ht.a,{onChange:this.onNumberChange.bind(this,"salary"),value:this.state.formData.salary,min:0,max:999999,step:1,style:{display:"block",width:"100%"}})})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!1,title:"\u8077\u52d9\u6d25\u8cbc",content:Object(m.jsx)(Ht.a,{onChange:this.onNumberChange.bind(this,"extraBonus"),value:this.state.formData.extraBonus,min:0,max:999999,step:1,style:{display:"block",width:"100%"}})})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},e),{},{children:Object(m.jsx)(Dt,{required:!1,title:"\u5168\u52e4\u6d25\u8cbc",content:Object(m.jsx)(Ht.a,{onChange:this.onNumberChange.bind(this,"fullAttendanceBonus"),value:this.state.formData.fullAttendanceBonus,min:0,max:999999,step:1,style:{display:"block",width:"100%"}})})}))]}))}),Object(m.jsx)(kt.a,{className:"form-detail-card",children:Object(m.jsx)(Ot.a,Object(h.a)(Object(h.a)({},t),{},{children:Object(m.jsx)(pt.a,{span:24,children:Object(m.jsx)(Dt,{required:!1,title:"\u5730\u5740",content:Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(Ot.a,{type:"flex",gutter:[10],children:[Object(m.jsx)(pt.a,{style:{width:120},children:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.postCode,id:"postCode",placeholder:"\u90f5\u905e\u5340\u865f"})}),Object(m.jsx)(pt.a,{style:{width:"calc(100% - 120px)"},children:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.address,id:"address",placeholder:"\u5730\u5740"})})]})}),message:"\u9577\u5ea6\u9700\u5728100\u5b57\u5167",error:this.getFormErrorStatus("address")})})}))}),Object(m.jsxs)(kt.a,{className:"form-detail-card",children:[Object(m.jsx)(Ot.a,Object(h.a)(Object(h.a)({},t),{},{align:"top",children:Object(m.jsx)(pt.a,{span:24,children:Object(m.jsx)(Dt,{required:!1,align:"flex-start",title:"\u7d93\u6b77",content:Object(m.jsx)(Z.a.TextArea,{onChange:this.onInputChange,value:this.state.formData.experience,id:"experience",autoSize:{minRows:4,maxRows:4}}),message:"\u9577\u5ea6\u9700\u5728255\u5b57\u5167",error:this.getFormErrorStatus("experience")})})})),Object(m.jsx)(Ot.a,Object(h.a)(Object(h.a)({},t),{},{children:Object(m.jsx)(pt.a,{span:24,children:Object(m.jsx)(Dt,{required:!1,align:"flex-start",title:"\u5099\u8a3b",content:Object(m.jsx)(Z.a.TextArea,{onChange:this.onInputChange,value:this.state.formData.note,id:"note",autoSize:{minRows:4,maxRows:4}}),message:"\u9577\u5ea6\u9700\u5728255\u5b57\u5167",error:this.getFormErrorStatus("note")})})}))]}),Object(m.jsx)("div",{style:{margin:"20px",textAlign:"center"},children:Object(m.jsxs)(jt.b,{children:[this.props.createFlag?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleCreate.bind(this,!1),children:"\u65b0\u589e"}),Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleCreate.bind(this,!0),children:"\u65b0\u589e\u4e26\u8fd4\u56de"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleSubmit.bind(this,!1),children:"\u5132\u5b58"}),Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleSubmit.bind(this,!0),children:"\u5132\u5b58\u4e26\u8fd4\u56de"})]}),Object(m.jsx)(tt.a,{danger:!0,icon:Object(m.jsx)(Ft.a,{}),onClick:this.handleCancel,children:"\u53d6\u6d88"})]})})]})]})}}]),a}(r.a.Component),Wt=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(m.jsx)(Gt,{createFlag:this.props.createFlag,employeeId:this.props.match.params.employeeId})}}]),a}(r.a.Component),Qt=function t(){Object(u.a)(this,t),this.getVehicleList=function(t){return ct("get","/kinds",t).then((function(t){return t.data}))},this.getVehicleData=function(t){return ct("get","/kinds/".concat(t)).then((function(t){return t.data}))},this.updateVehicleData=function(t,e){return ct("patch","/kinds/".concat(t),e).then((function(t){return t.data}))}},Xt=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).history=Object(Q.b)(),n.vehicleAPI=new Qt,n.getList=function(){var t=n.state,e=t.search,a=t.pagination,r={pageNum:a.current,pageSize:a.pageSize,kindIdLike:"%".concat(e.keyword,"%")};n.vehicleAPI.getVehicleList(r).then((function(t){a.total=t.data.total,n.setState({loading:!1,list:t.data.list,pagination:a})})).catch((function(){return n.setState({loading:!1})}))},n.onInputChange=function(t){var e=n.state.search;e.keyword=t.target.value,n.setState({search:e})},n.handleSearch=function(){n.setState({loading:!0},(function(){return n.getList()}))},n.getColumns=function(){var t=Object(dt.a)(n),e=n.state.pagination;return[{dataIndex:"kindId",title:"\u57f7\u884c",width:50,render:function(e){return Object(m.jsxs)(jt.b,{className:"list-table-option",children:[Object(m.jsx)(bt.a,{title:"\u7de8\u8f2f",children:Object(m.jsx)(tt.a,{className:"list-table-option-edit",size:"small",onClick:t.onEdit.bind(t,e),children:Object(m.jsx)(S,{})})}),Object(m.jsx)(bt.a,{title:"\u522a\u9664",children:Object(m.jsx)(tt.a,{className:"list-table-option-delete",size:"small",onClick:t.handleDelete.bind(t,e),children:Object(m.jsx)(x,{})})})]})}},{title:"\u5e8f",width:30,align:"center",render:function(t,a,n){return(e.current-1)*e.pageSize+n+1}},{title:"\u8eca\u7a2e\u4ee3\u865f",dataIndex:"kindId"},{title:"\u8eca\u7a2e\u7c21\u7a31",dataIndex:"shortName"},{title:"\u8eca\u7a2e\u540d\u7a31",dataIndex:"name"},{title:"\u8eca\u5ee0",dataIndex:"factory"}]},n.onEdit=function(t){n.history.push("/Parts/Vehicle/".concat(t))},n.handleDelete=function(t){gt.a.confirm({title:"\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u7b46\u8cc7\u6599\u55ce",icon:Object(m.jsx)(xt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){console.log("delete: "+t)}})},n.onPageChange=function(t,e){var a=n.state.pagination;a.current=t,a.pageSize=e,n.setState({loading:!0},(function(){return n.getList()}))},n.state={loading:!0,search:{keyword:""},list:[],pagination:{current:1,total:0,pageSize:10,position:["bottomLeft"]}},n.getList(),n}return Object(d.a)(a,[{key:"render",value:function(){var t=this;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"",style:{marginBottom:10},children:Object(m.jsxs)(Ot.a,{type:"flex",justify:"space-between",children:[Object(m.jsx)(pt.a,{children:Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(I,{}),onClick:function(){return t.history.push("/Parts/Vehicle/Add")},className:"list-header-add",children:"\u65b0\u589e"})}),Object(m.jsx)(pt.a,{children:Object(m.jsxs)(jt.b,{children:[Object(m.jsx)(Z.a,{placeholder:"\u641c\u5c0b\u8eca\u7a2e\u4ee3\u865f",allowClear:!0,onChange:this.onInputChange,style:{width:140}}),Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(v,{}),onClick:this.handleSearch,className:"list-header-search",children:"\u67e5\u8a62"})]})})]})}),Object(m.jsx)(ft.a,{className:"list-table-wrapper",rowKey:"vendorId",size:"small",columns:this.getColumns(),loading:this.state.loading,dataSource:this.state.list,pagination:Object(h.a)(Object(h.a)({},this.state.pagination),{},{showTotal:function(t,e){return"".concat(e[0]," - ").concat(e[1]," \u5171 ").concat(t," \u7b46")},showSizeChanger:!0,onChange:this.onPageChange})})]})}}]),a}(r.a.Component),Zt={kindId:"",name:"",shortName:"",factory:""},$t=[{key:"kindId",required:!0,length:[8]},{key:"name",required:!0,length:[20]},{key:"shortName",required:!0,length:[15]},{key:"factory",length:[3]}],te=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).history=Object(Q.b)(),n.vehicleAPI=new Qt,n.getVehicleData=function(){n.vehicleAPI.getVehicleData(n.props.kindId).then((function(t){0===t.code?n.setState({loading:!1,formData:t.data},(function(){return n.checkCanSubmit()})):(g.b.error(t.message),n.history.push("/Parts/Vehicle"))})).catch((function(){g.b.error("Error!"),n.history.push("/Parts/Vehicle")}))},n.getFormErrorStatus=function(t){var e=n.state.formStatus.find((function(e){return e.key===t}));return!!e&&e.error},n.onInputChange=function(t){var e=t.target.getAttribute("id"),a=t.target.value,r=n.state.formData;r[e]=a,n.checkData(r,e)},n.checkData=function(t,e){var a=n.state.formStatus,r=a.find((function(t){return t.key===e}));if(r){var c=t[e],i=!1;r.required&&!c&&(i=!0),r.length&&r.length.length>0&&c&&(1===r.length.length&&c.length>r.length[0]||r.length.length>1&&(c.length<r.length[0]||c.length>r.length[1]))&&(i=!0),r.regExp&&!r.regExp.test(c)&&(i=!0),r.error=i}n.setState({formData:t,formStatus:a},(function(){return n.checkCanSubmit()}))},n.checkCanSubmit=function(){n.setState({canSubmit:!n.state.formStatus.some((function(t){return t.error}))})},n.handleCreate=function(t){n.setState({loading:!0},(function(){setTimeout((function(){g.b.success("\u6210\u529f\u65b0\u589e\u8cc7\u6599"),t&&n.history.push("/Parts/Vehicle")}),1e3)}))},n.handleSubmit=function(t){n.setState({loading:!0},(function(){n.vehicleAPI.updateVehicleData(n.props.kindId,n.state.formData).then((function(e){0===e.code?(g.b.success("\u6210\u529f\u66f4\u65b0\u8cc7\u6599"),t?n.history.push("/Parts/Vehicle"):n.getVehicleData()):gt.a.error({title:e.message,icon:Object(m.jsx)(xt.a,{}),content:e.data.map((function(t,e){return Object(m.jsxs)(m.Fragment,{children:[e>0&&Object(m.jsx)("br",{}),t.split(": ")[1]]})})),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(){g.b.error("\u8cc7\u6599\u66f4\u65b0\u5931\u6557"),n.setState({loading:!1})}))}))},n.handleCancel=function(){gt.a.confirm({title:"\u8b8a\u66f4\u5c1a\u672a\u5132\u5b58\uff0c\u78ba\u5b9a\u8981\u96e2\u958b\u55ce",icon:Object(m.jsx)(xt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){n.history.push("/Parts/Vehicle")}})},n.state={loading:!t.createFlag,formData:Object(h.a)({},Zt),formStatus:JSON.parse(JSON.stringify($t)),canSubmit:!1},t.createFlag||n.getVehicleData(),n}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(t){var e=this;!t.createFlag&&this.props.createFlag?this.setState({formData:Object(h.a)({},Zt),formStatus:JSON.parse(JSON.stringify($t)),canSubmit:!1}):this.props.createFlag||t.kindId===this.props.kindId||this.setState({loading:!0,formData:Object(h.a)({},Zt),formStatus:JSON.parse(JSON.stringify($t)),canSubmit:!1},(function(){return e.getVehicleData()}))}},{key:"render",value:function(){var t={xs:24,sm:24,md:24,lg:12};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(Ct.a,{style:{marginBottom:10},children:[Object(m.jsx)(Ct.a.Item,{children:Object(m.jsx)(s.b,{to:"/Parts/Vehicle",children:"\u8eca\u7a2e"})}),Object(m.jsx)(Ct.a.Item,{children:this.props.createFlag?"\u65b0\u589e\u8eca\u7a2e":"\u4fee\u6539\u8eca\u7a2e\u8cc7\u6599"})]}),Object(m.jsxs)(vt.a,{spinning:this.state.loading,children:[Object(m.jsx)(kt.a,{className:"form-detail-card",children:Object(m.jsxs)(Ot.a,Object(h.a)(Object(h.a)({},{gutter:[24,24],type:"flex",align:"middle",style:{marginBottom:24,marginTop:24}}),{},{children:[Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},t),{},{children:Object(m.jsx)(Dt,{required:!0,title:"\u8eca\u7a2e\u4ee3\u865f",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.kindId,id:"kindId",disabled:!this.props.createFlag}),message:"\u8eca\u7a2e\u4ee3\u865f\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u57288\u5b57\u5167",error:this.getFormErrorStatus("kindId")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},t),{},{children:Object(m.jsx)(Dt,{required:!0,title:"\u8eca\u7a2e\u540d\u7a31",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.name,id:"name"}),message:"\u8eca\u7a2e\u540d\u7a31\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572820\u5b57",error:this.getFormErrorStatus("name")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},t),{},{children:Object(m.jsx)(Dt,{required:!0,title:"\u8eca\u7a2e\u7c21\u7a31",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.shortName,id:"shortName"}),message:"\u8eca\u7a2e\u7c21\u7a31\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572815\u5b57\u5167",error:this.getFormErrorStatus("shortName")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},t),{},{children:Object(m.jsx)(Dt,{required:!1,title:"\u8eca\u5ee0",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.factory,id:"factory"}),message:"\u9577\u5ea6\u9700\u57283\u5b57\u5167",error:this.getFormErrorStatus("factory")})}))]}))}),Object(m.jsx)("div",{style:{margin:"20px",textAlign:"center"},children:Object(m.jsxs)(jt.b,{children:[this.props.createFlag?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleCreate.bind(this,!1),children:"\u65b0\u589e"}),Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleCreate.bind(this,!0),children:"\u65b0\u589e\u4e26\u8fd4\u56de"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleSubmit.bind(this,!1),children:"\u5132\u5b58"}),Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleSubmit.bind(this,!0),children:"\u5132\u5b58\u4e26\u8fd4\u56de"})]}),Object(m.jsx)(tt.a,{danger:!0,icon:Object(m.jsx)(Ft.a,{}),onClick:this.handleCancel,children:"\u53d6\u6d88"})]})})]})]})}}]),a}(r.a.Component),ee=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(m.jsx)(te,{createFlag:this.props.createFlag,kindId:this.props.match.params.kindId})}}]),a}(r.a.Component),ae=function t(){Object(u.a)(this,t),this.getLevelList=function(t){return ct("get","/grades",t).then((function(t){return t.data}))},this.getLevelData=function(t){return ct("get","/grades/".concat(t)).then((function(t){return t.data}))},this.updateLevelData=function(t,e){return ct("patch","/grades/".concat(t),e).then((function(t){return t.data}))}},ne=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).history=Object(Q.b)(),n.levelAPI=new ae,n.getList=function(){var t=n.state,e=t.search,a=t.pagination,r={pageNum:a.current,pageSize:a.pageSize,gradeId:"%".concat(e.keyword,"%")};n.levelAPI.getLevelList(r).then((function(t){a.total=t.data.total,n.setState({loading:!1,list:t.data.list,pagination:a})})).catch((function(){return n.setState({loading:!1})}))},n.onInputChange=function(t){var e=n.state.search;e.keyword=t.target.value,n.setState({search:e})},n.handleSearch=function(){n.setState({loading:!0},(function(){return n.getList()}))},n.getColumns=function(){var t=Object(dt.a)(n),e=n.state.pagination;return[{dataIndex:"gradeId",title:"\u57f7\u884c",width:50,render:function(e){return Object(m.jsxs)(jt.b,{className:"list-table-option",children:[Object(m.jsx)(bt.a,{title:"\u7de8\u8f2f",children:Object(m.jsx)(tt.a,{className:"list-table-option-edit",size:"small",onClick:t.onEdit.bind(t,e),children:Object(m.jsx)(S,{})})}),Object(m.jsx)(bt.a,{title:"\u522a\u9664",children:Object(m.jsx)(tt.a,{className:"list-table-option-delete",size:"small",onClick:t.handleDelete.bind(t,e),children:Object(m.jsx)(x,{})})})]})}},{title:"\u5e8f",width:30,align:"center",render:function(t,a,n){return(e.current-1)*e.pageSize+n+1}},{title:"\u7b49\u7d1a\u4ee3\u865f",dataIndex:"gradeId"},{title:"\u7b49\u7d1a\u540d\u7a31",dataIndex:"name"}]},n.onEdit=function(t){n.history.push("/Parts/Level/".concat(t))},n.handleDelete=function(t){gt.a.confirm({title:"\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u7b46\u8cc7\u6599\u55ce",icon:Object(m.jsx)(xt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){console.log("delete: "+t)}})},n.onPageChange=function(t,e){var a=n.state.pagination;a.current=t,a.pageSize=e,n.setState({loading:!0},(function(){return n.getList()}))},n.state={loading:!0,search:{keyword:""},list:[],pagination:{current:1,total:0,pageSize:10,position:["bottomLeft"]}},n.getList(),n}return Object(d.a)(a,[{key:"render",value:function(){var t=this;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"",style:{marginBottom:10},children:Object(m.jsxs)(Ot.a,{type:"flex",justify:"space-between",children:[Object(m.jsx)(pt.a,{children:Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(I,{}),onClick:function(){return t.history.push("/Parts/Level/Add")},className:"list-header-add",children:"\u65b0\u589e"})}),Object(m.jsx)(pt.a,{children:Object(m.jsxs)(jt.b,{children:[Object(m.jsx)(Z.a,{placeholder:"\u641c\u5c0b\u7b49\u7d1a\u4ee3\u865f",allowClear:!0,onChange:this.onInputChange,style:{width:140}}),Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(v,{}),onClick:this.handleSearch,className:"list-header-search",children:"\u67e5\u8a62"})]})})]})}),Object(m.jsx)(ft.a,{className:"list-table-wrapper",rowKey:"vendorId",size:"small",columns:this.getColumns(),loading:this.state.loading,dataSource:this.state.list,pagination:Object(h.a)(Object(h.a)({},this.state.pagination),{},{showTotal:function(t,e){return"".concat(e[0]," - ").concat(e[1]," \u5171 ").concat(t," \u7b46")},showSizeChanger:!0,onChange:this.onPageChange})})]})}}]),a}(r.a.Component),re={gradeId:"",name:""},ce=[{key:"gradeId",required:!0,length:[2]},{key:"name",required:!0,length:[10]}],ie=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).history=Object(Q.b)(),n.levelAPI=new ae,n.getLevelData=function(){n.levelAPI.getLevelData(n.props.gradeId).then((function(t){0===t.code?n.setState({loading:!1,formData:t.data},(function(){return n.checkCanSubmit()})):(g.b.error(t.message),n.history.push("/Parts/Level"))})).catch((function(){g.b.error("Error!"),n.history.push("/Parts/Level")}))},n.getFormErrorStatus=function(t){var e=n.state.formStatus.find((function(e){return e.key===t}));return!!e&&e.error},n.onInputChange=function(t){var e=t.target.getAttribute("id"),a=t.target.value,r=n.state.formData;r[e]=a,n.checkData(r,e)},n.checkData=function(t,e){var a=n.state.formStatus,r=a.find((function(t){return t.key===e}));if(r){var c=t[e],i=!1;r.required&&!c&&(i=!0),r.length&&r.length.length>0&&c&&(1===r.length.length&&c.length>r.length[0]||r.length.length>1&&(c.length<r.length[0]||c.length>r.length[1]))&&(i=!0),r.regExp&&!r.regExp.test(c)&&(i=!0),r.error=i}n.setState({formData:t,formStatus:a},(function(){return n.checkCanSubmit()}))},n.checkCanSubmit=function(){n.setState({canSubmit:!n.state.formStatus.some((function(t){return t.error}))})},n.handleCreate=function(t){n.setState({loading:!0},(function(){setTimeout((function(){g.b.success("\u6210\u529f\u65b0\u589e\u8cc7\u6599"),t&&n.history.push("/Parts/Level")}),1e3)}))},n.handleSubmit=function(t){n.setState({loading:!0},(function(){n.levelAPI.updateLevelData(n.props.gradeId,n.state.formData).then((function(e){0===e.code?(g.b.success("\u6210\u529f\u66f4\u65b0\u8cc7\u6599"),t?n.history.push("/Parts/Level"):n.getLevelData()):gt.a.error({title:e.message,icon:Object(m.jsx)(xt.a,{}),content:e.data.map((function(t,e){return Object(m.jsxs)(m.Fragment,{children:[e>0&&Object(m.jsx)("br",{}),t.split(": ")[1]]})})),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(){g.b.error("\u8cc7\u6599\u66f4\u65b0\u5931\u6557"),n.setState({loading:!1})}))}))},n.handleCancel=function(){gt.a.confirm({title:"\u8b8a\u66f4\u5c1a\u672a\u5132\u5b58\uff0c\u78ba\u5b9a\u8981\u96e2\u958b\u55ce",icon:Object(m.jsx)(xt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){n.history.push("/Parts/Level")}})},n.state={loading:!t.createFlag,formData:Object(h.a)({},re),formStatus:JSON.parse(JSON.stringify(ce)),canSubmit:!1},t.createFlag||n.getLevelData(),n}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(t){var e=this;!t.createFlag&&this.props.createFlag?this.setState({formData:Object(h.a)({},re),formStatus:JSON.parse(JSON.stringify(ce)),canSubmit:!1}):this.props.createFlag||t.gradeId===this.props.gradeId||this.setState({loading:!0,formData:Object(h.a)({},re),formStatus:JSON.parse(JSON.stringify(ce)),canSubmit:!1},(function(){return e.getLevelData()}))}},{key:"render",value:function(){var t={xs:24,sm:24,md:24,lg:12};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(Ct.a,{style:{marginBottom:10},children:[Object(m.jsx)(Ct.a.Item,{children:Object(m.jsx)(s.b,{to:"/Parts/Level",children:"\u7b49\u7d1a"})}),Object(m.jsx)(Ct.a.Item,{children:this.props.createFlag?"\u65b0\u589e\u7b49\u7d1a":"\u4fee\u6539\u7b49\u7d1a\u8cc7\u6599"})]}),Object(m.jsxs)(vt.a,{spinning:this.state.loading,children:[Object(m.jsx)(kt.a,{className:"form-detail-card",children:Object(m.jsxs)(Ot.a,Object(h.a)(Object(h.a)({},{gutter:[24,24],type:"flex",align:"middle",style:{marginBottom:24,marginTop:24}}),{},{children:[Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},t),{},{children:Object(m.jsx)(Dt,{required:!0,title:"\u7b49\u7d1a\u4ee3\u865f",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.gradeId,id:"gradeId",disabled:!this.props.createFlag}),message:"\u7b49\u7d1a\u4ee3\u865f\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u57282\u5b57\u5167",error:this.getFormErrorStatus("gradeId")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},t),{},{children:Object(m.jsx)(Dt,{required:!0,title:"\u7b49\u7d1a\u540d\u7a31",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.name,id:"name"}),message:"\u7b49\u7d1a\u540d\u7a31\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572810\u5b57",error:this.getFormErrorStatus("name")})}))]}))}),Object(m.jsx)("div",{style:{margin:"20px",textAlign:"center"},children:Object(m.jsxs)(jt.b,{children:[this.props.createFlag?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleCreate.bind(this,!1),children:"\u65b0\u589e"}),Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleCreate.bind(this,!0),children:"\u65b0\u589e\u4e26\u8fd4\u56de"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleSubmit.bind(this,!1),children:"\u5132\u5b58"}),Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleSubmit.bind(this,!0),children:"\u5132\u5b58\u4e26\u8fd4\u56de"})]}),Object(m.jsx)(tt.a,{danger:!0,icon:Object(m.jsx)(Ft.a,{}),onClick:this.handleCancel,children:"\u53d6\u6d88"})]})})]})]})}}]),a}(r.a.Component),se=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(m.jsx)(ie,{createFlag:this.props.createFlag,gradeId:this.props.match.params.gradeId})}}]),a}(r.a.Component),oe=function t(){Object(u.a)(this,t),this.getColourList=function(t){return ct("get","/colors",t).then((function(t){return t.data}))},this.getColourData=function(t){return ct("get","/colors/".concat(t)).then((function(t){return t.data}))},this.updateColourData=function(t,e){return ct("patch","/colors/".concat(t),e).then((function(t){return t.data}))}},le=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).history=Object(Q.b)(),n.colourAPI=new oe,n.getList=function(){var t=n.state,e=t.search,a=t.pagination,r={pageNum:a.current,pageSize:a.pageSize,colorId:"%".concat(e.keyword,"%")};n.colourAPI.getColourList(r).then((function(t){a.total=t.data.total,n.setState({loading:!1,list:t.data.list,pagination:a})})).catch((function(){return n.setState({loading:!1})}))},n.onInputChange=function(t){var e=n.state.search;e.keyword=t.target.value,n.setState({search:e})},n.handleSearch=function(){n.setState({loading:!0},(function(){return n.getList()}))},n.getColumns=function(){var t=Object(dt.a)(n),e=n.state.pagination;return[{dataIndex:"colorId",title:"\u57f7\u884c",width:50,render:function(e){return Object(m.jsxs)(jt.b,{className:"list-table-option",children:[Object(m.jsx)(bt.a,{title:"\u7de8\u8f2f",children:Object(m.jsx)(tt.a,{className:"list-table-option-edit",size:"small",onClick:t.onEdit.bind(t,e),children:Object(m.jsx)(S,{})})}),Object(m.jsx)(bt.a,{title:"\u522a\u9664",children:Object(m.jsx)(tt.a,{className:"list-table-option-delete",size:"small",onClick:t.handleDelete.bind(t,e),children:Object(m.jsx)(x,{})})})]})}},{title:"\u5e8f",width:30,align:"center",render:function(t,a,n){return(e.current-1)*e.pageSize+n+1}},{title:"\u984f\u8272\u4ee3\u865f",dataIndex:"colorId"},{title:"\u984f\u8272\u540d\u7a31",dataIndex:"name"}]},n.onEdit=function(t){n.history.push("/Parts/Colour/".concat(t))},n.handleDelete=function(t){gt.a.confirm({title:"\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u7b46\u8cc7\u6599\u55ce",icon:Object(m.jsx)(xt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){console.log("delete: "+t)}})},n.onPageChange=function(t,e){var a=n.state.pagination;a.current=t,a.pageSize=e,n.setState({loading:!0},(function(){return n.getList()}))},n.state={loading:!0,search:{keyword:""},list:[],pagination:{current:1,total:0,pageSize:10,position:["bottomLeft"]}},n.getList(),n}return Object(d.a)(a,[{key:"render",value:function(){var t=this;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"",style:{marginBottom:10},children:Object(m.jsxs)(Ot.a,{type:"flex",justify:"space-between",children:[Object(m.jsx)(pt.a,{children:Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(I,{}),onClick:function(){return t.history.push("/Parts/Colour/Add")},className:"list-header-add",children:"\u65b0\u589e"})}),Object(m.jsx)(pt.a,{children:Object(m.jsxs)(jt.b,{children:[Object(m.jsx)(Z.a,{placeholder:"\u641c\u5c0b\u984f\u8272\u4ee3\u865f",allowClear:!0,onChange:this.onInputChange,style:{width:140}}),Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(v,{}),onClick:this.handleSearch,className:"list-header-search",children:"\u67e5\u8a62"})]})})]})}),Object(m.jsx)(ft.a,{className:"list-table-wrapper",rowKey:"vendorId",size:"small",columns:this.getColumns(),loading:this.state.loading,dataSource:this.state.list,pagination:Object(h.a)(Object(h.a)({},this.state.pagination),{},{showTotal:function(t,e){return"".concat(e[0]," - ").concat(e[1]," \u5171 ").concat(t," \u7b46")},showSizeChanger:!0,onChange:this.onPageChange})})]})}}]),a}(r.a.Component),he={colorId:"",name:""},ue=[{key:"colorId",required:!0,length:[2]},{key:"name",required:!0,length:[10]}],de=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).history=Object(Q.b)(),n.colourAPI=new oe,n.getColourData=function(){n.colourAPI.getColourData(n.props.colorId).then((function(t){0===t.code?n.setState({loading:!1,formData:t.data},(function(){return n.checkCanSubmit()})):(g.b.error(t.message),n.history.push("/Parts/Colour"))})).catch((function(){g.b.error("Error!"),n.history.push("/Parts/Colour")}))},n.getFormErrorStatus=function(t){var e=n.state.formStatus.find((function(e){return e.key===t}));return!!e&&e.error},n.onInputChange=function(t){var e=t.target.getAttribute("id"),a=t.target.value,r=n.state.formData;r[e]=a,n.checkData(r,e)},n.checkData=function(t,e){var a=n.state.formStatus,r=a.find((function(t){return t.key===e}));if(r){var c=t[e],i=!1;r.required&&!c&&(i=!0),r.length&&r.length.length>0&&c&&(1===r.length.length&&c.length>r.length[0]||r.length.length>1&&(c.length<r.length[0]||c.length>r.length[1]))&&(i=!0),r.regExp&&!r.regExp.test(c)&&(i=!0),r.error=i}n.setState({formData:t,formStatus:a},(function(){return n.checkCanSubmit()}))},n.checkCanSubmit=function(){n.setState({canSubmit:!n.state.formStatus.some((function(t){return t.error}))})},n.handleCreate=function(t){n.setState({loading:!0},(function(){setTimeout((function(){g.b.success("\u6210\u529f\u65b0\u589e\u8cc7\u6599"),t&&n.history.push("/Parts/Colour")}),1e3)}))},n.handleSubmit=function(t){n.setState({loading:!0},(function(){n.colourAPI.updateColourData(n.props.colorId,n.state.formData).then((function(e){0===e.code?(g.b.success("\u6210\u529f\u66f4\u65b0\u8cc7\u6599"),t?n.history.push("/Parts/Colour"):n.getColourData()):gt.a.error({title:e.message,icon:Object(m.jsx)(xt.a,{}),content:e.data.map((function(t,e){return Object(m.jsxs)(m.Fragment,{children:[e>0&&Object(m.jsx)("br",{}),t.split(": ")[1]]})})),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(){g.b.error("\u8cc7\u6599\u66f4\u65b0\u5931\u6557"),n.setState({loading:!1})}))}))},n.handleCancel=function(){gt.a.confirm({title:"\u8b8a\u66f4\u5c1a\u672a\u5132\u5b58\uff0c\u78ba\u5b9a\u8981\u96e2\u958b\u55ce",icon:Object(m.jsx)(xt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){n.history.push("/Parts/Colour")}})},n.state={loading:!t.createFlag,formData:Object(h.a)({},he),formStatus:JSON.parse(JSON.stringify(ue)),canSubmit:!1},t.createFlag||n.getColourData(),n}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(t){var e=this;!t.createFlag&&this.props.createFlag?this.setState({formData:Object(h.a)({},he),formStatus:JSON.parse(JSON.stringify(ue)),canSubmit:!1}):this.props.createFlag||t.colorId===this.props.colorId||this.setState({loading:!0,formData:Object(h.a)({},he),formStatus:JSON.parse(JSON.stringify(ue)),canSubmit:!1},(function(){return e.getColourData()}))}},{key:"render",value:function(){var t={xs:24,sm:24,md:24,lg:12};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(Ct.a,{style:{marginBottom:10},children:[Object(m.jsx)(Ct.a.Item,{children:Object(m.jsx)(s.b,{to:"/Parts/Colour",children:"\u984f\u8272"})}),Object(m.jsx)(Ct.a.Item,{children:this.props.createFlag?"\u65b0\u589e\u984f\u8272":"\u4fee\u6539\u984f\u8272\u8cc7\u6599"})]}),Object(m.jsxs)(vt.a,{spinning:this.state.loading,children:[Object(m.jsx)(kt.a,{className:"form-detail-card",children:Object(m.jsxs)(Ot.a,Object(h.a)(Object(h.a)({},{gutter:[24,24],type:"flex",align:"middle",style:{marginBottom:24,marginTop:24}}),{},{children:[Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},t),{},{children:Object(m.jsx)(Dt,{required:!0,title:"\u984f\u8272\u4ee3\u865f",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.colorId,id:"colorId",disabled:!this.props.createFlag}),message:"\u984f\u8272\u4ee3\u865f\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u57282\u5b57\u5167",error:this.getFormErrorStatus("colorId")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},t),{},{children:Object(m.jsx)(Dt,{required:!0,title:"\u984f\u8272\u540d\u7a31",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.name,id:"name"}),message:"\u984f\u8272\u540d\u7a31\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572810\u5b57",error:this.getFormErrorStatus("name")})}))]}))}),Object(m.jsx)("div",{style:{margin:"20px",textAlign:"center"},children:Object(m.jsxs)(jt.b,{children:[this.props.createFlag?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleCreate.bind(this,!1),children:"\u65b0\u589e"}),Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleCreate.bind(this,!0),children:"\u65b0\u589e\u4e26\u8fd4\u56de"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleSubmit.bind(this,!1),children:"\u5132\u5b58"}),Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleSubmit.bind(this,!0),children:"\u5132\u5b58\u4e26\u8fd4\u56de"})]}),Object(m.jsx)(tt.a,{danger:!0,icon:Object(m.jsx)(Ft.a,{}),onClick:this.handleCancel,children:"\u53d6\u6d88"})]})})]})]})}}]),a}(r.a.Component),je=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(m.jsx)(de,{createFlag:this.props.createFlag,colorId:this.props.match.params.colorId})}}]),a}(r.a.Component),be=function t(){Object(u.a)(this,t),this.getComponentList=function(t){return ct("get","/parts",t).then((function(t){return t.data}))},this.getComponentData=function(t){return ct("get","/parts/".concat(t)).then((function(t){return t.data}))},this.updateComponentData=function(t,e){return ct("patch","/parts/".concat(t),e).then((function(t){return t.data}))}},ge=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).history=Object(Q.b)(),n.componentAPI=new be,n.getList=function(){var t=n.state,e=t.search,a=t.pagination,r={pageNum:a.current,pageSize:a.pageSize,partId:"%".concat(e.partId,"%"),name:"%".concat(e.name,"%")};n.componentAPI.getComponentList(r).then((function(t){a.total=t.data.total,n.setState({loading:!1,list:t.data.list,pagination:a})})).catch((function(){return n.setState({loading:!1})}))},n.onInputChange=function(t,e){var a=n.state.search;a[t]=e.target.value,n.setState({search:a})},n.handleSearch=function(){n.setState({loading:!0},(function(){return n.getList()}))},n.getColumns=function(){var t=Object(dt.a)(n),e=n.state.pagination;return[{dataIndex:"partId",title:"\u57f7\u884c",width:50,render:function(e){return Object(m.jsxs)(jt.b,{className:"list-table-option",children:[Object(m.jsx)(bt.a,{title:"\u7de8\u8f2f",children:Object(m.jsx)(tt.a,{className:"list-table-option-edit",size:"small",onClick:t.onEdit.bind(t,e),children:Object(m.jsx)(S,{})})}),Object(m.jsx)(bt.a,{title:"\u522a\u9664",children:Object(m.jsx)(tt.a,{className:"list-table-option-delete",size:"small",onClick:t.handleDelete.bind(t,e),children:Object(m.jsx)(x,{})})})]})}},{title:"\u5e8f",width:30,align:"center",render:function(t,a,n){return(e.current-1)*e.pageSize+n+1}},{title:"\u96f6\u4ef6\u4ee3\u865f",dataIndex:"partId"},{title:"\u96f6\u4ef6\u540d\u7a31",dataIndex:"name"}]},n.onEdit=function(t){n.history.push("/Parts/Component/".concat(t))},n.handleDelete=function(t){gt.a.confirm({title:"\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u7b46\u8cc7\u6599\u55ce",icon:Object(m.jsx)(xt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){console.log("delete: "+t)}})},n.onPageChange=function(t,e){var a=n.state.pagination;a.current=t,a.pageSize=e,n.setState({loading:!0},(function(){return n.getList()}))},n.state={loading:!0,search:{partId:"",name:""},list:[],pagination:{current:1,total:0,pageSize:10,position:["bottomLeft"]}},n.getList(),n}return Object(d.a)(a,[{key:"render",value:function(){var t=this;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"",style:{marginBottom:10},children:Object(m.jsxs)(Ot.a,{type:"flex",justify:"space-between",children:[Object(m.jsx)(pt.a,{children:Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(I,{}),onClick:function(){return t.history.push("/Parts/Component/Add")},className:"list-header-add",children:"\u65b0\u589e"})}),Object(m.jsx)(pt.a,{children:Object(m.jsxs)(jt.b,{children:[Object(m.jsx)(Z.a,{placeholder:"\u641c\u5c0b\u96f6\u4ef6\u4ee3\u865f",allowClear:!0,onChange:this.onInputChange.bind(this,"partId"),style:{width:140}}),Object(m.jsx)(Z.a,{placeholder:"\u641c\u5c0b\u96f6\u4ef6\u540d\u7a31",allowClear:!0,onChange:this.onInputChange.bind(this,"name")}),Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(v,{}),onClick:this.handleSearch,className:"list-header-search",children:"\u67e5\u8a62"})]})})]})}),Object(m.jsx)(ft.a,{className:"list-table-wrapper",rowKey:"vendorId",size:"small",columns:this.getColumns(),loading:this.state.loading,dataSource:this.state.list,pagination:Object(h.a)(Object(h.a)({},this.state.pagination),{},{showTotal:function(t,e){return"".concat(e[0]," - ").concat(e[1]," \u5171 ").concat(t," \u7b46")},showSizeChanger:!0,onChange:this.onPageChange})})]})}}]),a}(r.a.Component),Oe={partId:"",name:""},pe=[{key:"partId",required:!0,length:[4]},{key:"name",required:!0,length:[10]}],me=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).history=Object(Q.b)(),n.componentAPI=new be,n.getComponentData=function(){n.componentAPI.getComponentData(n.props.partId).then((function(t){0===t.code?n.setState({loading:!1,formData:t.data},(function(){return n.checkCanSubmit()})):(g.b.error(t.message),n.history.push("/Parts/Component"))})).catch((function(){g.b.error("Error!"),n.history.push("/Parts/Component")}))},n.getFormErrorStatus=function(t){var e=n.state.formStatus.find((function(e){return e.key===t}));return!!e&&e.error},n.onInputChange=function(t){var e=t.target.getAttribute("id"),a=t.target.value,r=n.state.formData;r[e]=a,n.checkData(r,e)},n.checkData=function(t,e){var a=n.state.formStatus,r=a.find((function(t){return t.key===e}));if(r){var c=t[e],i=!1;r.required&&!c&&(i=!0),r.length&&r.length.length>0&&c&&(1===r.length.length&&c.length>r.length[0]||r.length.length>1&&(c.length<r.length[0]||c.length>r.length[1]))&&(i=!0),r.regExp&&!r.regExp.test(c)&&(i=!0),r.error=i}n.setState({formData:t,formStatus:a},(function(){return n.checkCanSubmit()}))},n.checkCanSubmit=function(){n.setState({canSubmit:!n.state.formStatus.some((function(t){return t.error}))})},n.handleCreate=function(t){n.setState({loading:!0},(function(){setTimeout((function(){g.b.success("\u6210\u529f\u65b0\u589e\u8cc7\u6599"),t&&n.history.push("/Parts/Component")}),1e3)}))},n.handleSubmit=function(t){n.setState({loading:!0},(function(){n.componentAPI.updateComponentData(n.props.partId,n.state.formData).then((function(e){0===e.code?(g.b.success("\u6210\u529f\u66f4\u65b0\u8cc7\u6599"),t?n.history.push("/Parts/Component"):n.getComponentData()):gt.a.error({title:e.message,icon:Object(m.jsx)(xt.a,{}),content:e.data.map((function(t,e){return Object(m.jsxs)(m.Fragment,{children:[e>0&&Object(m.jsx)("br",{}),t.split(": ")[1]]})})),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(){g.b.error("\u8cc7\u6599\u66f4\u65b0\u5931\u6557"),n.setState({loading:!1})}))}))},n.handleCancel=function(){gt.a.confirm({title:"\u8b8a\u66f4\u5c1a\u672a\u5132\u5b58\uff0c\u78ba\u5b9a\u8981\u96e2\u958b\u55ce",icon:Object(m.jsx)(xt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){n.history.push("/Parts/Component")}})},n.state={loading:!t.createFlag,formData:Object(h.a)({},Oe),formStatus:JSON.parse(JSON.stringify(pe)),canSubmit:!1},t.createFlag||n.getComponentData(),n}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(t){var e=this;!t.createFlag&&this.props.createFlag?this.setState({formData:Object(h.a)({},Oe),formStatus:JSON.parse(JSON.stringify(pe)),canSubmit:!1}):this.props.createFlag||t.partId===this.props.partId||this.setState({loading:!0,formData:Object(h.a)({},Oe),formStatus:JSON.parse(JSON.stringify(pe)),canSubmit:!1},(function(){return e.getComponentData()}))}},{key:"render",value:function(){var t={xs:24,sm:24,md:24,lg:12};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(Ct.a,{style:{marginBottom:10},children:[Object(m.jsx)(Ct.a.Item,{children:Object(m.jsx)(s.b,{to:"/Parts/Component",children:"\u96f6\u4ef6"})}),Object(m.jsx)(Ct.a.Item,{children:this.props.createFlag?"\u65b0\u589e\u96f6\u4ef6":"\u4fee\u6539\u96f6\u4ef6\u8cc7\u6599"})]}),Object(m.jsxs)(vt.a,{spinning:this.state.loading,children:[Object(m.jsx)(kt.a,{className:"form-detail-card",children:Object(m.jsxs)(Ot.a,Object(h.a)(Object(h.a)({},{gutter:[24,24],type:"flex",align:"middle",style:{marginBottom:24,marginTop:24}}),{},{children:[Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},t),{},{children:Object(m.jsx)(Dt,{required:!0,title:"\u96f6\u4ef6\u4ee3\u865f",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.partId,id:"partId",disabled:!this.props.createFlag}),message:"\u96f6\u4ef6\u4ee3\u865f\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u57284\u5b57\u5167",error:this.getFormErrorStatus("partId")})})),Object(m.jsx)(pt.a,Object(h.a)(Object(h.a)({},t),{},{children:Object(m.jsx)(Dt,{required:!0,title:"\u96f6\u4ef6\u540d\u7a31",content:Object(m.jsx)(Z.a,{onChange:this.onInputChange,value:this.state.formData.name,id:"name"}),message:"\u96f6\u4ef6\u540d\u7a31\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572810\u5b57",error:this.getFormErrorStatus("name")})}))]}))}),Object(m.jsx)("div",{style:{margin:"20px",textAlign:"center"},children:Object(m.jsxs)(jt.b,{children:[this.props.createFlag?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleCreate.bind(this,!1),children:"\u65b0\u589e"}),Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleCreate.bind(this,!0),children:"\u65b0\u589e\u4e26\u8fd4\u56de"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleSubmit.bind(this,!1),children:"\u5132\u5b58"}),Object(m.jsx)(tt.a,{type:"primary",icon:Object(m.jsx)(Nt.a,{}),disabled:!this.state.canSubmit,onClick:this.handleSubmit.bind(this,!0),children:"\u5132\u5b58\u4e26\u8fd4\u56de"})]}),Object(m.jsx)(tt.a,{danger:!0,icon:Object(m.jsx)(Ft.a,{}),onClick:this.handleCancel,children:"\u53d6\u6d88"})]})})]})]})}}]),a}(r.a.Component),fe=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(m.jsx)(me,{createFlag:this.props.createFlag,partId:this.props.match.params.partId})}}]),a}(r.a.Component),xe=function(t){Object(j.a)(a,t);var e=Object(b.a)(a);function a(t){var n;Object(u.a)(this,a),(n=e.call(this,t)).clearCookie=function(){var t=document.cookie.split(";");t.find((function(t){return t.includes("MOTOBUY_KEEP_LOGIN")}))&&"true"===t.find((function(t){return t.includes("MOTOBUY_KEEP_LOGIN")})).split("=")[1]||(document.cookie="MOTOBUY_AUTH=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT")},n.onLogin=function(){n.setState({isAuth:!0})},n.onLogout=function(){g.b.success("\u5df2\u6210\u529f\u767b\u51fa"),document.cookie="MOTOBUY_AUTH=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",n.setState({isAuth:!1})};var r=document.cookie.split(";");return n.state={isLand:!r.find((function(t){return t.includes("MOTOBUY_AUTH")})),isAuth:!1,siderCollapsed:!1},r.find((function(t){return t.includes("MOTOBUY_AUTH")}))&&function(t,e,a){var n={url:"https://britz-psi-heroku.herokuapp.com/test/v1"+e,method:t,timeout:6e4,headers:{Authorization:"Basic "+rt()}};return"get"===t&&a&&Object.keys(a).length>0?n.params=a:a&&Object.keys(a).length>0&&(n.data=a),new Promise((function(t,e){at()(n).then((function(e){return t(e)})).catch((function(t){e(t),console.log(t.response)}))}))}("get","/auth").then((function(t){0===t.data.code?n.setState({isLand:!0,isAuth:!0}):n.setState({isLand:!0})})).catch((function(){return n.setState({isLand:!0})})),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.clearCookie)}},{key:"componentWillUnmount",value:function(){this.clearCookie()}},{key:"render",value:function(){var t=this;return this.state.isLand?this.state.isAuth?Object(m.jsxs)(O.a,{className:"layout-wrapper",children:[Object(m.jsx)(O.a.Sider,{collapsible:!0,collapsed:this.state.siderCollapsed,onCollapse:function(e){return t.setState({siderCollapsed:e})},trigger:Object(m.jsx)(V,{}),className:"layout-sider-wrapper",children:Object(m.jsx)(o.a,{path:"/:type?/:page?",component:lt})}),Object(m.jsxs)(O.a,{className:"layout-main",children:[Object(m.jsx)(O.a.Header,{className:"layout-header",children:Object(m.jsx)(ht,{onLogout:this.onLogout})}),Object(m.jsx)(O.a.Content,{className:"layout-content-wrapper",children:Object(m.jsxs)(o.c,{children:[Object(m.jsx)(o.a,{exact:!0,path:"/Basic/Supplier/Add",render:function(t){return Object(m.jsx)(zt,Object(h.a)(Object(h.a)({},t),{},{createFlag:!0}))}}),Object(m.jsx)(o.a,{exact:!0,path:"/Basic/Supplier/:vendorId",render:function(t){return Object(m.jsx)(zt,Object(h.a)(Object(h.a)({},t),{},{createFlag:!1}))}}),Object(m.jsx)(o.a,{exact:!0,path:"/Basic/Supplier",component:St}),Object(m.jsx)(o.a,{exact:!0,path:"/Basic/Customer/Add",render:function(t){return Object(m.jsx)(qt,Object(h.a)(Object(h.a)({},t),{},{createFlag:!0}))}}),Object(m.jsx)(o.a,{exact:!0,path:"/Basic/Customer/:customerId",render:function(t){return Object(m.jsx)(qt,Object(h.a)(Object(h.a)({},t),{},{createFlag:!1}))}}),Object(m.jsx)(o.a,{exact:!0,path:"/Basic/Customer",component:Bt}),Object(m.jsx)(o.a,{exact:!0,path:"/Basic/Employee/Add",render:function(t){return Object(m.jsx)(Wt,Object(h.a)(Object(h.a)({},t),{},{createFlag:!0}))}}),Object(m.jsx)(o.a,{exact:!0,path:"/Basic/Employee/:employeeId",render:function(t){return Object(m.jsx)(Wt,Object(h.a)(Object(h.a)({},t),{},{createFlag:!1}))}}),Object(m.jsx)(o.a,{exact:!0,path:"/Basic/Employee",component:Rt}),Object(m.jsx)(o.a,{exact:!0,path:"/Parts/Vehicle/Add",render:function(t){return Object(m.jsx)(ee,Object(h.a)(Object(h.a)({},t),{},{createFlag:!0}))}}),Object(m.jsx)(o.a,{exact:!0,path:"/Parts/Vehicle/:kindId",render:function(t){return Object(m.jsx)(ee,Object(h.a)(Object(h.a)({},t),{},{createFlag:!1}))}}),Object(m.jsx)(o.a,{exact:!0,path:"/Parts/Vehicle",component:Xt}),Object(m.jsx)(o.a,{exact:!0,path:"/Parts/Level/Add",render:function(t){return Object(m.jsx)(se,Object(h.a)(Object(h.a)({},t),{},{createFlag:!0}))}}),Object(m.jsx)(o.a,{exact:!0,path:"/Parts/Level/:gradeId",render:function(t){return Object(m.jsx)(se,Object(h.a)(Object(h.a)({},t),{},{createFlag:!1}))}}),Object(m.jsx)(o.a,{exact:!0,path:"/Parts/Level",component:ne}),Object(m.jsx)(o.a,{exact:!0,path:"/Parts/Colour/Add",render:function(t){return Object(m.jsx)(je,Object(h.a)(Object(h.a)({},t),{},{createFlag:!0}))}}),Object(m.jsx)(o.a,{exact:!0,path:"/Parts/Colour/:colorId",render:function(t){return Object(m.jsx)(je,Object(h.a)(Object(h.a)({},t),{},{createFlag:!1}))}}),Object(m.jsx)(o.a,{exact:!0,path:"/Parts/Colour",component:le}),Object(m.jsx)(o.a,{exact:!0,path:"/Parts/Component/Add",render:function(t){return Object(m.jsx)(fe,Object(h.a)(Object(h.a)({},t),{},{createFlag:!0}))}}),Object(m.jsx)(o.a,{exact:!0,path:"/Parts/Component/:partId",render:function(t){return Object(m.jsx)(fe,Object(h.a)(Object(h.a)({},t),{},{createFlag:!1}))}}),Object(m.jsx)(o.a,{exact:!0,path:"/Parts/Component",component:ge}),Object(m.jsx)(o.a,{path:"/",component:ut})]})}),Object(m.jsx)(O.a.Footer,{className:"layout-footer",children:"2021 \xa9 Copyright"})]})]}):Object(m.jsx)(it,{onLogin:this.onLogin}):null}}]),a}(r.a.Component);a(292),a(293),a(294),a(295),a(296),a(297);i.a.render(Object(m.jsx)(s.a,{children:Object(m.jsx)(o.a,{path:"/:type?/:page?/:id?",component:xe})}),document.getElementById("root")),l()}},[[298,1,2]]]);
//# sourceMappingURL=main.6861026e.chunk.js.map