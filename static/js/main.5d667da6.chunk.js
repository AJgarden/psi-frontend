(this["webpackJsonppsi-frontend"]=this["webpackJsonppsi-frontend"]||[]).push([[0],{310:function(t,e,a){},311:function(t,e,a){},312:function(t,e,a){},313:function(t,e,a){},314:function(t,e,a){},315:function(t,e,a){},316:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(35),i=a.n(c),s=a(37),o=a(39),l=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,333)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;a(t),n(t),r(t),c(t),i(t)}))},d=a(6),u=a(42),h=a.n(u),j=a(67),p=a(16),b=a(21),g=a(23),m=a(22),O=a(196),f=a(20),x=a(319),S=a(163),v=a.n(S),C=a(29),y=a.n(C),I=(a(205),a(318)),D=a(1),k=function(){return Object(D.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(D.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(D.jsx)("path",{d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z"})]})},w=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:k},t))},N=function(){return Object(D.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(D.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(D.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})]})},P=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:N},t))},L=function(){return Object(D.jsxs)("svg",{enableBackground:"new 0 0 24 24",height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(D.jsx)("g",{children:Object(D.jsx)("rect",{fill:"none",height:"24",width:"24"})}),Object(D.jsx)("g",{children:Object(D.jsx)("path",{d:"M18,15v3H6v-3H4v3c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2v-3H18z M7,9l1.41,1.41L11,7.83V16h2V7.83l2.59,2.58L17,9l-5-5L7,9z"})})]})},F=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:L},t))},E=function(){return Object(D.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(D.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(D.jsx)("path",{d:"M12 6c3.79 0 7.17 2.13 8.82 5.5C19.17 14.87 15.79 17 12 17s-7.17-2.13-8.82-5.5C4.83 8.13 8.21 6 12 6m0-2C7 4 2.73 7.11 1 11.5 2.73 15.89 7 19 12 19s9.27-3.11 11-7.5C21.27 7.11 17 4 12 4zm0 5c1.38 0 2.5 1.12 2.5 2.5S13.38 14 12 14s-2.5-1.12-2.5-2.5S10.62 9 12 9m0-2c-2.48 0-4.5 2.02-4.5 4.5S9.52 16 12 16s4.5-2.02 4.5-4.5S14.48 7 12 7z"})]})},T=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:E},t))},A=function(){return Object(D.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(D.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(D.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"})]})},q=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:A},t))},z=function(){return Object(D.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(D.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(D.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})]})},M=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:z},t))},B=function(){return Object(D.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#ffffff",children:[Object(D.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(D.jsx)("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"})]})},V=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:B},t))},U=function(){return Object(D.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#ffffff",children:[Object(D.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(D.jsx)("path",{d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"})]})},R=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:U},t))},J=function(){return Object(D.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#ffffff",children:[Object(D.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(D.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})]})},H=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:J},t))},Y=function(){return Object(D.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#ffffff",children:[Object(D.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(D.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})]})},_=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:Y},t))},K=function(){return Object(D.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#ffffff",children:[Object(D.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(D.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"})]})},G=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:K},t))},Q=function(){return Object(D.jsxs)("svg",{enableBackground:"new 0 0 24 24",height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#ffffff",children:[Object(D.jsx)("g",{children:Object(D.jsx)("path",{d:"M0,0h24v24H0V0z",fill:"none"})}),Object(D.jsx)("g",{children:Object(D.jsx)("path",{d:"M17,8l-1.41,1.41L17.17,11H9v2h8.17l-1.58,1.58L17,16l4-4L17,8z M5,5h7V3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h7v-2H5V5z"})})]})},W=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:Q},t))},$=function(){return Object(D.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#ffffff",children:[Object(D.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(D.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM7.07 18.28c.43-.9 3.05-1.78 4.93-1.78s4.51.88 4.93 1.78C15.57 19.36 13.86 20 12 20s-3.57-.64-4.93-1.72zm11.29-1.45c-1.43-1.74-4.9-2.33-6.36-2.33s-4.93.59-6.36 2.33C4.62 15.49 4 13.82 4 12c0-4.41 3.59-8 8-8s8 3.59 8 8c0 1.82-.62 3.49-1.64 4.83zM12 6c-1.94 0-3.5 1.56-3.5 3.5S10.06 13 12 13s3.5-1.56 3.5-3.5S13.94 6 12 6zm0 5c-.83 0-1.5-.67-1.5-1.5S11.17 8 12 8s1.5.67 1.5 1.5S12.83 11 12 11z"})]})},X=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:$},t))},Z=function(){return Object(D.jsxs)("svg",{enableBackground:"new 0 0 24 24",height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(D.jsx)("g",{children:Object(D.jsx)("rect",{fill:"none",height:"24",width:"24"})}),Object(D.jsx)("g",{children:Object(D.jsxs)("g",{children:[Object(D.jsx)("path",{d:"M5,5h2v3h10V5h2v5h2V5c0-1.1-0.9-2-2-2h-4.18C14.4,1.84,13.3,1,12,1S9.6,1.84,9.18,3H5C3.9,3,3,3.9,3,5v14 c0,1.1,0.9,2,2,2h6v-2H5V5z M12,3c0.55,0,1,0.45,1,1s-0.45,1-1,1s-1-0.45-1-1S11.45,3,12,3z"}),Object(D.jsx)("polygon",{points:"21,11.5 15.51,17 12.5,14 11,15.5 15.51,20 22.5,13"})]})})]})},tt=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:Z},t))},et=function(){return Object(D.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(D.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(D.jsx)("path",{d:"M12 2l-5.5 9h11L12 2zm0 3.84L13.93 9h-3.87L12 5.84zM17.5 13c-2.49 0-4.5 2.01-4.5 4.5s2.01 4.5 4.5 4.5 4.5-2.01 4.5-4.5-2.01-4.5-4.5-4.5zm0 7c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5zM3 21.5h8v-8H3v8zm2-6h4v4H5v-4z"})]})},at=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:et},t))},nt=function(){return Object(D.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(D.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(D.jsx)("path",{d:"M16.66 4.52l2.83 2.83-2.83 2.83-2.83-2.83 2.83-2.83M9 5v4H5V5h4m10 10v4h-4v-4h4M9 15v4H5v-4h4m7.66-13.31L11 7.34 16.66 13l5.66-5.66-5.66-5.65zM11 3H3v8h8V3zm10 10h-8v8h8v-8zm-10 0H3v8h8v-8z"})]})},rt=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:nt},t))},ct=function(){return Object(D.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(D.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(D.jsx)("path",{d:"M9 13.75c-2.34 0-7 1.17-7 3.5V19h14v-1.75c0-2.33-4.66-3.5-7-3.5zM4.34 17c.84-.58 2.87-1.25 4.66-1.25s3.82.67 4.66 1.25H4.34zM9 12c1.93 0 3.5-1.57 3.5-3.5S10.93 5 9 5 5.5 6.57 5.5 8.5 7.07 12 9 12zm0-5c.83 0 1.5.67 1.5 1.5S9.83 10 9 10s-1.5-.67-1.5-1.5S8.17 7 9 7zm7.04 6.81c1.16.84 1.96 1.96 1.96 3.44V19h4v-1.75c0-2.02-3.5-3.17-5.96-3.44zM15 12c1.93 0 3.5-1.57 3.5-3.5S16.93 5 15 5c-.54 0-1.04.13-1.5.35.63.89 1 1.98 1 3.15s-.37 2.26-1 3.15c.46.22.96.35 1.5.35z"})]})},it=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:ct},t))},st=function(){return Object(D.jsx)("svg",{enableBackground:"new 0 0 24 24",height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:Object(D.jsxs)("g",{children:[Object(D.jsx)("rect",{fill:"none",height:"24",width:"24"}),Object(D.jsxs)("g",{children:[Object(D.jsx)("path",{d:"M19,3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h14c1.1,0,2-0.9,2-2V5C21,3.9,20.1,3,19,3z M19,19H5V5h14V19z"}),Object(D.jsx)("rect",{height:"5",width:"2",x:"7",y:"12"}),Object(D.jsx)("rect",{height:"10",width:"2",x:"15",y:"7"}),Object(D.jsx)("rect",{height:"3",width:"2",x:"11",y:"14"}),Object(D.jsx)("rect",{height:"2",width:"2",x:"11",y:"10"})]})]})})},ot=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:st},t))},lt=function(){return Object(D.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#ffffff",children:[Object(D.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(D.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})]})},dt=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:lt},t))},ut=function(){return Object(D.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(D.jsx)("path",{d:"M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z",fill:"none"}),Object(D.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"})]})},ht=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:ut},t))},jt=function(){return Object(D.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(D.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(D.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})]})},pt=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:jt},t))},bt=function(){return Object(D.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(D.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(D.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"})]})},gt=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:bt},t))},mt=function(){return Object(D.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(D.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(D.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})]})},Ot=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:mt},t))},ft=function(){return Object(D.jsxs)("svg",{height:"36px",viewBox:"0 0 24 24",width:"36px",fill:"#000000",children:[Object(D.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(D.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})]})},xt=function(t){return Object(D.jsx)(I.a,Object(d.a)({component:ft},t))},St=a(115),vt=a(24),Ct=a(185),yt=a(328),It=a(116),Dt=a(43),kt=a(119),wt=a.n(kt),Nt="https://britz-psi-heroku.herokuapp.com/api/v1",Pt=function(){var t=document.cookie.split(";").find((function(t){return t.includes("MOTOBUY_AUTH")}));return t?t.split("=")[1]:""},Lt=function(t,e,a){var n={url:Nt+e,method:t,timeout:6e4,headers:{Authorization:"Basic "+Pt()}};return"get"===t&&a&&Object.keys(a).length>0?n.params=a:a&&Object.keys(a).length>0&&(n.data=a),new Promise((function(t,e){wt()(n).then((function(e){return t(e)})).catch((function(t){e(t),console.log(t.response)}))}))},Ft=function(t){var e=document.cookie.split(";"),a=e.find((function(t){return t.includes("MOTOBUY_KEEP_LOGIN")}))&&"true"===e.find((function(t){return t.includes("MOTOBUY_KEEP_LOGIN")})).split("=")[1],r=Object(n.useState)(!1),c=Object(St.a)(r,2),i=c[0],s=c[1],o=Object(n.useState)({userId:"",password:""}),l=Object(St.a)(o,2),d=l[0],u=l[1];Object(n.useEffect)((function(){document.title="\u767b\u5165 - MOTOBUY PSI",Object(vt.b)().replace("/")}),[d]);var h=function(t,e){d[t]=e.target.value,u(d)};return Object(D.jsx)("div",{className:"login-wrapper",children:Object(D.jsxs)("div",{className:"login-board",children:[Object(D.jsxs)("div",{className:"login-board-header",children:[Object(D.jsx)("div",{className:"login-board-logo",children:"M"}),Object(D.jsx)("h1",{className:"login-board-title",children:"MOTOBUY PSI"})]}),Object(D.jsxs)("div",{className:"login-board-form",children:[Object(D.jsx)(yt.a,{placeholder:"User ID",prefix:Object(D.jsx)(Ot,{}),onChange:function(t){return h("userId",t)}}),Object(D.jsx)(yt.a.Password,{placeholder:"Password",prefix:Object(D.jsx)(gt,{}),iconRender:function(t){return t?Object(D.jsx)(pt,{}):Object(D.jsx)(ht,{})},onChange:function(t){return h("password",t)}}),Object(D.jsx)(It.a,{defaultChecked:a,onChange:function(t){return a=t.target.checked},children:"Keep me logged."})]}),Object(D.jsx)("div",{className:"login-board-footer",children:Object(D.jsx)(Dt.a,{onClick:function(){s(!0),a&&(document.cookie="MOTOBUY_KEEP_LOGIN=".concat(a,"; path=/; max-age=86400")),function(t,e,a){var n={url:Nt+e,method:t,timeout:6e4};return"get"===t&&a&&Object.keys(a).length>0?n.params=a:a&&Object.keys(a).length>0&&(n.data=a),new Promise((function(t,e){wt()(n).then((function(e){return t(e)})).catch((function(t){e(t),console.log(t.response)}))}))}("post","/author/login",d).then((function(e){var a=e.data;if(0===a.code){O.b.success("\u767b\u5165\u6210\u529f");var n=new Ct.Buffer("".concat(d.userId,":").concat(d.password)).toString("base64");document.cookie="MOTOBUY_AUTH=".concat(n,"; path=/; max-age=86400"),localStorage.setItem("MOTOBUY_ROLES",JSON.stringify(a.data.authorities.map((function(t){return t.authority})))),setTimeout((function(){return t.onLogin()}),200)}else O.b.error("\u767b\u5165\u5931\u6557"),s(!1)})).catch((function(t){O.b.error("\u767b\u5165\u5931\u6557"),s(!1)}))},loading:i,children:"LOGIN"})})]})})},Et=a(69),Tt=[{path:"/Dashboard",title:"\u5100\u8868\u677f"},{path:"/Basic/Supplier",title:"\u5ee0\u5546 - \u57fa\u672c\u8cc7\u6599"},{path:"/Basic/Customer",title:"\u5ba2\u6236 - \u57fa\u672c\u8cc7\u6599"},{path:"/Basic/Employee",title:"\u54e1\u5de5 - \u57fa\u672c\u8cc7\u6599"},{path:"/Basic",title:"\u57fa\u672c\u8cc7\u6599"},{path:"/Parts/Vehicle",title:"\u8eca\u7a2e - \u96f6\u4ef6\u7ba1\u7406"},{path:"/Parts/Level",title:"\u7b49\u7d1a - \u96f6\u4ef6\u7ba1\u7406"},{path:"/Parts/Colour",title:"\u984f\u8272 - \u96f6\u4ef6\u7ba1\u7406"},{path:"/Parts/Component",title:"\u96f6\u4ef6 - \u96f6\u4ef6\u7ba1\u7406"},{path:"/Parts",title:"\u96f6\u4ef6\u7ba1\u7406"},{path:"/Products/List",title:"\u5217\u8868 - \u5546\u54c1\u7ba1\u7406"},{path:"/Products",title:"\u5546\u54c1\u7ba1\u7406"},{path:"/Purchase",title:"\u5217\u8868 - \u9032\u8ca8\u55ae"},{path:"/Purchase",title:"\u9032\u8ca8\u55ae"},{path:"/",title:"\u9996\u9801"}],At=[{key:"Dashboard",routes:["Dashboard"],icon:Object(D.jsx)(ot,{}),title:"\u5100\u8868\u677f",accessRoles:[]},{key:"Basic",routes:["Basic"],icon:Object(D.jsx)(it,{}),title:"\u57fa\u672c\u8cc7\u6599",accessRoles:["ROLE_BASIC_MENU"],children:[{key:"BasicSupplier",routes:["Basic","Supplier"],title:"\u5ee0\u5546",accessRoles:["ROLE_VENDOR"]},{key:"BasicCustomer",routes:["Basic","Customer"],title:"\u5ba2\u6236",accessRoles:["ROLE_CUSTOMER"]},{key:"BasicEmployee",routes:["Basic","Employee"],title:"\u54e1\u5de5",accessRoles:["ROLE_EMPLOYEE"]}]},{key:"Parts",routes:["Parts"],icon:Object(D.jsx)(rt,{}),title:"\u96f6\u4ef6\u7ba1\u7406",accessRoles:["ROLE_PART_MENU"],children:[{key:"PartsVehicle",routes:["Parts","Vehicle"],title:"\u8eca\u7a2e",accessRoles:["ROLE_KIND"]},{key:"PartsLevel",routes:["Parts","Level"],title:"\u7b49\u7d1a",accessRoles:["ROLE_GRADE"]},{key:"PartsColour",routes:["Parts","Colour"],title:"\u984f\u8272",accessRoles:["ROLE_COLOR"]},{key:"PartsComponent",routes:["Parts","Component"],title:"\u96f6\u4ef6",accessRoles:["ROLE_PART"]}]},{key:"Products",routes:["Products"],icon:Object(D.jsx)(at,{}),title:"\u5546\u54c1\u7ba1\u7406",accessRoles:["ROLE_PRODUCT_MENU"],children:[{key:"ProductsList",routes:["Products","List"],title:"\u5217\u8868",accessRoles:["ROLE_PRODUCT"]},{key:"ProductsQuickEdit",routes:["Products","QuickEdit"],title:"\u5feb\u901f\u7de8\u4fee",accessRoles:["ROLE_PRODUCT_UPDATE"]}]},{key:"Purchase",routes:["Purchase"],icon:Object(D.jsx)(tt,{}),title:"\u9032\u8ca8",accessRoles:["ROLE_PURCHASE_MENU"],children:[{key:"PurchaseList",routes:["Purchase","List"],title:"\u5217\u8868",accessRoles:["ROLE_PURCHASE_LIST"]},{key:"PurchaseAdd",routes:["Purchase","Add"],title:"\u65b0\u589e",accessRoles:["ROLE_PRODUCT_ADD"]}]}],qt=function(t){var e=Object(n.useState)([]),a=Object(St.a)(e,2),r=a[0],c=a[1];Object(n.useEffect)((function(){i(t.match.url);var e=t.history.listen((function(t){i(t.pathname)}));return function(){e()}}),[]),Object(n.useEffect)((function(){void 0!==t.match.params.page?c([t.match.params.type+t.match.params.page]):void 0!==t.match.params.type?c([t.match.params.type]):c(["Home"])}),[t.match.params.type,t.match.params.page]);var i=function(t){var e=Tt.find((function(e){return new RegExp("^(".concat(e.path,")")).test(t)}));e&&(document.title="".concat(e.title," - MOTOBUY PSI"))};return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("h1",{className:"layout-sider-logo",children:Object(D.jsxs)(s.b,{to:"/",children:[Object(D.jsxs)("span",{className:"layout-sider-logo-f",children:["MOTOBUY",Object(D.jsx)("br",{}),"PSI"]}),Object(D.jsx)("span",{className:"layout-sider-logo-s",children:"M"})]})}),Object(D.jsx)(Et.a,{className:"layout-sider-menu",selectedKeys:r,onClick:function(t){var e=t.item,a=Object(vt.b)(),n=e.props.data.routes.map((function(t){return"/".concat(t)})).join("");a.push(n),c(""===e.props.data.routes[0]?["Home"]:e.props.data.routes)},children:At.map((function(t){var e=JSON.parse(localStorage.getItem("MOTOBUY_ROLES"));return t.accessRoles.length<1||t.accessRoles.filter((function(t){return e.includes(t)})).length>0?t.children&&t.children.length>0?Object(D.jsx)(Et.a.SubMenu,{icon:t.icon,title:t.title,popupClassName:"layout-sider-popup",children:t.children.map((function(t){return t.accessRoles.length<1||t.accessRoles.filter((function(t){return e.includes(t)})).length>0?Object(D.jsx)(Et.a.Item,{data:t,children:t.title},t.key):null}))},t.key):Object(D.jsx)(Et.a.Item,{icon:t.icon,data:t,children:t.title},t.key):null}))})]})},zt=function(t){return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:"layout-header-left",children:Object(D.jsx)(yt.a.Search,{placeholder:"\u5168\u57df\u641c\u5c0b",enterButton:!0})}),Object(D.jsxs)("div",{className:"layout-header-right",children:[Object(D.jsx)(Dt.a,{children:Object(D.jsx)(G,{})}),Object(D.jsx)(Dt.a,{onClick:t.onLogout,children:Object(D.jsx)(W,{})}),Object(D.jsx)(Dt.a,{className:"layout-header-account",children:Object(D.jsx)(X,{})})]})]})},Mt=function(t){return Object(n.useEffect)((function(){Object(vt.b)().replace("/Dashboard")})),"Dashboard"},Bt=a(36),Vt=a(331),Ut=a(59),Rt=a(327),Jt=a(106),Ht=a(64),Yt=a(114),_t=a(320),Kt=a(118),Gt=function(t,e){return Object(d.a)(Object(d.a)({},t),{},{showTotal:function(t,e){return"".concat(e[0]," - ").concat(e[1]," \u5171 ").concat(t," \u7b46")},showSizeChanger:!0,showQuickJumper:!0,onChange:e})},Qt=function t(){Object(p.a)(this,t),this.getSupplierList=function(t){return Lt("get","/vendor",t).then((function(t){return t.data}))},this.getSupplierData=function(t){return Lt("get","/vendor/".concat(t)).then((function(t){return t.data}))},this.addSupplierData=function(t){return Lt("post","/vendor/".concat(t.vendorId),t).then((function(t){return t.data}))},this.updateSupplierData=function(t,e){return Lt("patch","/vendor/".concat(t),e).then((function(t){return t.data}))}},Wt=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).history=Object(vt.b)(),n.supplierAPI=new Qt,n.getList=function(){var t=n.state,e=t.search,a=t.pagination,r={pageNum:a.current,pageSize:a.pageSize,queryByEnum:e.id,queryKeyWord:"%".concat(e.keyword,"%")};n.supplierAPI.getSupplierList(r).then((function(t){a.total=t.data.total,n.setState({loading:!1,list:t.data.list,pagination:a})})).catch((function(){return n.setState({loading:!1})}))},n.onSelectChange=function(t){var e=n.state.search;e.id=t,n.setState({search:e})},n.onInputChange=function(t){var e=n.state.search;e.keyword=t.target.value,n.setState({search:e})},n.handleSearch=function(){var t=n.state.pagination;t.current=1,n.setState({loading:!0,list:[],pagination:t},(function(){return n.getList()}))},n.getColumns=function(){var t=Object(Bt.a)(n),e=n.state.pagination;return[{dataIndex:"vendorId",title:"\u57f7\u884c",width:50,render:function(e){return Object(D.jsxs)(Vt.b,{className:"list-table-option",children:[Object(D.jsx)(Ut.a,{title:"\u7de8\u8f2f",children:Object(D.jsx)(Dt.a,{className:"list-table-option-edit",size:"small",onClick:t.onEdit.bind(t,e),children:Object(D.jsx)(R,{})})}),Object(D.jsx)(Ut.a,{title:"\u522a\u9664",children:Object(D.jsx)(Dt.a,{className:"list-table-option-delete",size:"small",onClick:t.handleDelete.bind(t,e),children:Object(D.jsx)(V,{})})})]})}},{title:"\u5e8f",width:30,align:"center",render:function(t,a,n){return(e.current-1)*e.pageSize+n+1}},{title:"\u5ee0\u5546\u4ee3\u865f",dataIndex:"vendorId"},{title:"\u5ee0\u5546\u7c21\u7a31",dataIndex:"shortName"},{title:"\u806f\u7d61\u4eba",dataIndex:"contactPerson"},{title:"\u5730\u5740",dataIndex:"address"},{title:"\u96fb\u8a711",dataIndex:"phone1"},{title:"\u50b3\u771f\u865f\u78bc",dataIndex:"faxNumber"},{title:"\u884c\u52d5\u96fb\u8a71",dataIndex:"cellphone"}]},n.onEdit=function(t){n.history.push("/Basic/Supplier/".concat(t))},n.handleDelete=function(t){Rt.a.confirm({title:"\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u7b46\u8cc7\u6599\u55ce",icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){console.log("delete: "+t)}})},n.onPageChange=function(t,e){var a=n.state.pagination;a.current=t,a.pageSize=e,n.setState({loading:!0,list:[],pagination:a},(function(){return n.getList()}))},n.state={loading:!0,search:{id:"VENDOR_ID",keyword:""},list:[],pagination:{current:1,total:0,pageSize:10,position:["bottomLeft"]}},n.getList(),n}return Object(b.a)(a,[{key:"render",value:function(){var t=this;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:"list-header",children:Object(D.jsxs)(Jt.a,{type:"flex",justify:"space-between",children:[Object(D.jsx)(Ht.a,{children:Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(_,{}),onClick:function(){return t.history.push("/Basic/Supplier/Add")},className:"list-header-add",children:"\u65b0\u589e"})}),Object(D.jsx)(Ht.a,{children:Object(D.jsxs)(Vt.b,{children:[Object(D.jsxs)(Yt.a,{placeholder:"\u641c\u5c0b\u6b04\u4f4d",value:this.state.search.id,onChange:this.onSelectChange,children:[Object(D.jsx)(Yt.a.Option,{value:"VENDOR_ID",children:"\u5ee0\u5546\u4ee3\u865f"}),Object(D.jsx)(Yt.a.Option,{value:"NAME",children:"\u5ee0\u5546\u540d\u7a31"})]}),Object(D.jsx)(yt.a,{placeholder:"\u641c\u5c0b\u5167\u5bb9",allowClear:!0,onChange:this.onInputChange}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(H,{}),onClick:this.handleSearch,className:"list-header-search",children:"\u67e5\u8a62"})]})})]})}),Object(D.jsx)(_t.a,{className:"list-table-wrapper",rowKey:"vendorId",size:"small",columns:this.getColumns(),loading:this.state.loading,dataSource:this.state.list,pagination:Gt(this.state.pagination,this.onPageChange)})]})}}]),a}(r.a.Component),$t=a(330),Xt=a(191),Zt=a(323),te=a(324),ee=function(t){var e=t.required,a=t.align,n=void 0===a?"center":a,r=t.title,c=t.content,i=t.message,s=t.error;return Object(D.jsxs)("div",{style:{display:"flex",alignItems:n},children:[Object(D.jsxs)("div",{style:{marginRight:8,width:80,textAlign:"right"},children:[e&&Object(D.jsx)(te.a.Text,{type:"danger",style:{marginRight:5},children:"*"}),Object(D.jsx)(te.a.Text,{children:r})]}),Object(D.jsxs)("div",{style:{width:"calc(100% - 80px)",position:"relative"},children:[c,s&&Object(D.jsx)("span",{style:{color:"red",position:"absolute",width:"100%",left:0,top:"100%",fontSize:"12px"},children:i})]})]})},ae=a(103),ne=a(52),re={vendorId:"",name:"",shortName:"",principal:"",contactPerson:"",postCode:"",address:"",phone1:"",phone2:"",faxNumber:"",cellphone:"",note1:"",note2:""},ce=[{key:"vendorId",required:!0,length:[10]},{key:"name",required:!0,length:[30]},{key:"shortName",required:!0,length:[10]},{key:"principal",length:[2,10]},{key:"contactPerson",length:[2,10]},{key:"address",length:[100]},{key:"phone1",required:!0,length:[10]},{key:"phone2",length:[10]},{key:"faxNumber",length:[10]},{key:"cellphone",length:[10]},{key:"note1",length:[255]},{key:"note2",length:[255]}],ie=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).history=Object(vt.b)(),n.supplierAPI=new Qt,n.getSupplierData=function(){n.supplierAPI.getSupplierData(n.props.vendorId).then((function(t){0===t.code?n.setState({loading:!1,formData:t.data},(function(){return n.checkCanSubmit()})):(O.b.error(t.message),n.history.push("/Basic/Supplier"))})).catch((function(){O.b.error("Error!"),n.history.push("/Basic/Supplier")}))},n.getFormErrorStatus=function(t){var e=n.state.formStatus.find((function(e){return e.key===t}));return!!e&&e.error},n.onInputChange=function(t){var e=t.target.getAttribute("id"),a=t.target.value,r=n.state.formData;r[e]="vendorId"===e?a.toUpperCase():a,n.checkData(r,e)},n.checkData=function(t,e){var a=n.state.formStatus,r=a.find((function(t){return t.key===e}));if(r){var c=t[e],i=!1;r.required&&!c&&(i=!0),r.length&&r.length.length>0&&c&&(1===r.length.length&&c.length>r.length[0]||r.length.length>1&&(c.length<r.length[0]||c.length>r.length[1]))&&(i=!0),r.regExp&&!r.regExp.test(c)&&(i=!0),r.error=i}n.setState({formData:t,formStatus:a},(function(){return n.checkCanSubmit()}))},n.checkCanSubmit=function(){n.setState({canSubmit:!n.state.formStatus.some((function(t){return t.error}))})},n.checkId=function(){var t=n.state.formData;""!==t.vendorId&&n.setState({validId:!1},(function(){n.supplierAPI.getSupplierData(t.vendorId).then((function(e){0===e.code?Rt.a.error({title:"\u6b64\u7de8\u865f\u5df2\u91cd\u8907\uff0c\u8acb\u91cd\u65b0\u8f38\u5165",icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){t.vendorId="",n.setState({formData:t})}}):n.setState({validId:!0})}))}))},n.handleCreate=function(t){n.setState({loading:!0},(function(){n.supplierAPI.addSupplierData(n.state.formData).then((function(e){0===e.code?(O.b.success("\u6210\u529f\u65b0\u589e\u8cc7\u6599"),t?n.history.push("/Basic/Supplier"):(document.getElementById("layout-content-wrapper").scrollTo({top:0,behavior:"smooth"}),n.setState({loading:!1,formData:Object(d.a)({},re),formStatus:JSON.parse(JSON.stringify(ce)),canSubmit:!1}))):Rt.a.error({title:e.message,icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(t){O.b.error(t.response.data.message),n.setState({loading:!1})}))}))},n.handleSubmit=function(t){n.setState({loading:!0},(function(){n.supplierAPI.updateSupplierData(n.props.vendorId,n.state.formData).then((function(e){0===e.code?(O.b.success("\u6210\u529f\u66f4\u65b0\u8cc7\u6599"),t?n.history.push("/Basic/Supplier"):(document.getElementById("layout-content-wrapper").scrollTo({top:0,behavior:"smooth"}),n.getSupplierData())):Rt.a.error({title:e.message,icon:Object(D.jsx)(Kt.a,{}),content:e.data.map((function(t,e){return Object(D.jsxs)(D.Fragment,{children:[e>0&&Object(D.jsx)("br",{}),t.split(": ")[1]]})})),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(){O.b.error("\u8cc7\u6599\u66f4\u65b0\u5931\u6557"),n.setState({loading:!1})}))}))},n.handleCancel=function(){Rt.a.confirm({title:"\u8b8a\u66f4\u5c1a\u672a\u5132\u5b58\uff0c\u78ba\u5b9a\u8981\u96e2\u958b\u55ce",icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){n.history.push("/Basic/Supplier")}})},n.state={loading:!t.createFlag,formData:Object(d.a)({},re),formStatus:JSON.parse(JSON.stringify(ce)),validId:!1,canSubmit:!1},t.createFlag||n.getSupplierData(),n}return Object(b.a)(a,[{key:"componentDidUpdate",value:function(t){var e=this;!t.createFlag&&this.props.createFlag?this.setState({loading:!1,formData:Object(d.a)({},re),formStatus:JSON.parse(JSON.stringify(ce)),validId:!1,canSubmit:!1}):this.props.createFlag||t.vendorId===this.props.vendorId||this.setState({loading:!0,formData:Object(d.a)({},re),formStatus:JSON.parse(JSON.stringify(ce)),validId:!0,canSubmit:!1},(function(){return e.getSupplierData()}))}},{key:"render",value:function(){var t={gutter:[24,24],type:"flex",align:"middle",style:{marginBottom:24,marginTop:24}},e={xs:24,sm:24,md:24,lg:8};return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)($t.a,{style:{marginBottom:10},children:[Object(D.jsx)($t.a.Item,{children:Object(D.jsx)(s.b,{to:"/Basic/Supplier",children:"\u5ee0\u5546"})}),Object(D.jsx)($t.a.Item,{children:this.props.createFlag?"\u65b0\u589e\u5ee0\u5546":"\u4fee\u6539\u5ee0\u5546\u8cc7\u6599"})]}),Object(D.jsxs)(Xt.a,{spinning:this.state.loading,children:[Object(D.jsx)(Zt.a,{className:"form-detail-card",children:Object(D.jsxs)(Jt.a,Object(d.a)(Object(d.a)({},t),{},{children:[Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u5ee0\u5546\u4ee3\u865f",content:Object(D.jsx)(yt.a,{onBlur:this.checkId,onChange:this.onInputChange,value:this.state.formData.vendorId,id:"vendorId",disabled:!this.props.createFlag}),message:"\u5ee0\u5546\u4ee3\u865f\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("vendorId")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u5ee0\u5546\u540d\u7a31",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.name,id:"name"}),message:"\u5ee0\u5546\u540d\u7a31\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572830\u5b57\u5167",error:this.getFormErrorStatus("name")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u5ee0\u5546\u7c21\u7a31",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.shortName,id:"shortName"}),message:"\u5ee0\u5546\u7c21\u7a31\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("shortName")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u8ca0\u8cac\u4eba",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.principal,id:"principal"}),message:"\u9577\u5ea6\u9700\u57282~10\u5b57",error:this.getFormErrorStatus("principal")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u806f\u7d61\u4eba",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.contactPerson,id:"contactPerson"}),message:"\u9577\u5ea6\u9700\u57282~10\u5b57",error:this.getFormErrorStatus("contactPerson")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u50b3\u771f\u865f\u78bc",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.faxNumber,id:"faxNumber"}),message:"\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("faxNumber")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u96fb\u8a711",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.phone1,id:"phone1"}),message:"\u96fb\u8a711\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("phone1")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u96fb\u8a712",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.phone2,id:"phone2"}),message:"\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("phone2")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u884c\u52d5\u96fb\u8a71",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.cellphone,id:"cellphone"}),message:"\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("cellphone")})}))]}))}),Object(D.jsx)(Zt.a,{className:"form-detail-card",children:Object(D.jsx)(Jt.a,Object(d.a)(Object(d.a)({},t),{},{children:Object(D.jsx)(Ht.a,{span:24,children:Object(D.jsx)(ee,{required:!1,title:"\u5730\u5740",content:Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(Jt.a,{type:"flex",gutter:[10],children:[Object(D.jsx)(Ht.a,{style:{width:120},children:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.postCode,id:"postCode",placeholder:"\u90f5\u905e\u5340\u865f"})}),Object(D.jsx)(Ht.a,{style:{width:"calc(100% - 120px)"},children:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.address,id:"address",placeholder:"\u5730\u5740"})})]})}),message:"\u9577\u5ea6\u9700\u5728100\u5b57\u5167",error:this.getFormErrorStatus("address")})})}))}),Object(D.jsx)(Zt.a,{className:"form-detail-card",children:Object(D.jsxs)(Jt.a,Object(d.a)(Object(d.a)({},t),{},{align:"top",children:[Object(D.jsx)(Ht.a,{span:24,children:Object(D.jsx)(ee,{required:!1,align:"flex-start",title:"\u5099\u8a3b1",content:Object(D.jsx)(yt.a.TextArea,{onChange:this.onInputChange,value:this.state.formData.note1,id:"note1",autoSize:{minRows:4,maxRows:4}}),message:"\u9577\u5ea6\u9700\u5728255\u5b57\u5167",error:this.getFormErrorStatus("note1")})}),Object(D.jsx)(Ht.a,{span:24,children:Object(D.jsx)(ee,{required:!1,align:"flex-start",title:"\u5099\u8a3b2",content:Object(D.jsx)(yt.a.TextArea,{onChange:this.onInputChange,value:this.state.formData.note2,id:"note2",autoSize:{minRows:4,maxRows:4}}),message:"\u9577\u5ea6\u9700\u5728255\u5b57\u5167",error:this.getFormErrorStatus("note2")})})]}))}),Object(D.jsx)("div",{style:{margin:"20px",textAlign:"center"},children:Object(D.jsxs)(Vt.b,{children:[this.props.createFlag?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),disabled:!this.state.validId,onClick:this.handleCreate.bind(this,!0),children:"\u5132\u5b58"}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),disabled:!this.state.validId,onClick:this.handleCreate.bind(this,!1),children:"\u5132\u5b58\u4e26\u7e7c\u7e8c\u65b0\u589e"})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),onClick:this.handleSubmit.bind(this,!1),children:"\u5132\u5b58"}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),onClick:this.handleSubmit.bind(this,!0),children:"\u5132\u5b58\u4e26\u8fd4\u56de\u5217\u8868"})]}),Object(D.jsx)(Dt.a,{danger:!0,icon:Object(D.jsx)(ne.a,{}),onClick:this.handleCancel,children:"\u53d6\u6d88"})]})})]})]})}}]),a}(r.a.Component),se=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(){return Object(p.a)(this,a),e.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return Object(D.jsx)(ie,{createFlag:this.props.createFlag,vendorId:this.props.match.params.vendorId})}}]),a}(r.a.Component),oe=function t(){Object(p.a)(this,t),this.getCustomerList=function(t){return Lt("get","/customers",t).then((function(t){return t.data}))},this.getCustomerData=function(t){return Lt("get","/customers/".concat(t)).then((function(t){return t.data}))},this.addCustomerData=function(t){return Lt("post","/customers/".concat(t.customerId),t).then((function(t){return t.data}))},this.updateCustomerData=function(t,e){return Lt("patch","/customers/".concat(t),e).then((function(t){return t.data}))}},le=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).history=Object(vt.b)(),n.customerAPI=new oe,n.getList=function(){var t=n.state,e=t.search,a=t.pagination,r={pageNum:a.current,pageSize:a.pageSize,queryByEnum:e.id,queryKeyWord:"%".concat(e.keyword,"%")};n.customerAPI.getCustomerList(r).then((function(t){a.total=t.data.total,n.setState({loading:!1,list:t.data.list,pagination:a})})).catch((function(){return n.setState({loading:!1})}))},n.onSelectChange=function(t){var e=n.state.search;e.id=t,n.setState({search:e})},n.onInputChange=function(t){var e=n.state.search;e.keyword=t.target.value,n.setState({search:e})},n.handleSearch=function(){var t=n.state.pagination;t.current=1,n.setState({loading:!0,list:[],pagination:t},(function(){return n.getList()}))},n.getColumns=function(){var t=Object(Bt.a)(n),e=n.state.pagination;return[{dataIndex:"customerId",title:"\u57f7\u884c",width:50,render:function(e){return Object(D.jsxs)(Vt.b,{className:"list-table-option",children:[Object(D.jsx)(Ut.a,{title:"\u7de8\u8f2f",children:Object(D.jsx)(Dt.a,{className:"list-table-option-edit",size:"small",onClick:t.onEdit.bind(t,e),children:Object(D.jsx)(R,{})})}),Object(D.jsx)(Ut.a,{title:"\u522a\u9664",children:Object(D.jsx)(Dt.a,{className:"list-table-option-delete",size:"small",onClick:t.handleDelete.bind(t,e),children:Object(D.jsx)(V,{})})})]})}},{title:"\u5e8f",width:30,align:"center",render:function(t,a,n){return(e.current-1)*e.pageSize+n+1}},{title:"\u5ba2\u6236\u4ee3\u865f",dataIndex:"customerId"},{title:"\u5ba2\u6236\u7c21\u7a31",dataIndex:"shortName"},{title:"\u806f\u7d61\u4eba",dataIndex:"contactPerson"},{title:"\u5730\u5740",dataIndex:"address"},{title:"\u96fb\u8a711",dataIndex:"phone1"},{title:"\u50b3\u771f\u865f\u78bc",dataIndex:"faxNumber"},{title:"\u884c\u52d5\u96fb\u8a71",dataIndex:"cellphone"}]},n.onEdit=function(t){n.history.push("/Basic/Customer/".concat(t))},n.handleDelete=function(t){Rt.a.confirm({title:"\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u7b46\u8cc7\u6599\u55ce",icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){console.log("delete: "+t)}})},n.onPageChange=function(t,e){var a=n.state.pagination;a.current=t,a.pageSize=e,n.setState({loading:!0,list:[],pagination:a},(function(){return n.getList()}))},n.state={loading:!0,search:{id:"CUSTOMER_ID",keyword:""},list:[],pagination:{current:1,total:0,pageSize:10,position:["bottomLeft"]}},n.getList(),n}return Object(b.a)(a,[{key:"render",value:function(){var t=this;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:"list-header",children:Object(D.jsxs)(Jt.a,{type:"flex",justify:"space-between",children:[Object(D.jsx)(Ht.a,{children:Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(_,{}),onClick:function(){return t.history.push("/Basic/Customer/Add")},className:"list-header-add",children:"\u65b0\u589e"})}),Object(D.jsx)(Ht.a,{children:Object(D.jsxs)(Vt.b,{children:[Object(D.jsxs)(Yt.a,{placeholder:"\u641c\u5c0b\u6b04\u4f4d",value:this.state.search.id,onChange:this.onSelectChange,children:[Object(D.jsx)(Yt.a.Option,{value:"CUSTOMER_ID",children:"\u5ba2\u6236\u4ee3\u865f"}),Object(D.jsx)(Yt.a.Option,{value:"NAME",children:"\u5ba2\u6236\u540d\u7a31"})]}),Object(D.jsx)(yt.a,{placeholder:"\u641c\u5c0b\u5167\u5bb9",allowClear:!0,onChange:this.onInputChange}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(H,{}),onClick:this.handleSearch,className:"list-header-search",children:"\u67e5\u8a62"})]})})]})}),Object(D.jsx)(_t.a,{className:"list-table-wrapper",rowKey:"customerId",size:"small",columns:this.getColumns(),loading:this.state.loading,dataSource:this.state.list,pagination:Gt(this.state.pagination,this.onPageChange)})]})}}]),a}(r.a.Component),de={customerId:"",name:"",shortName:"",principal:"",contactPerson:"",postCode:"",address:"",phone1:"",phone2:"",faxNumber:"",cellphone:"",note1:"",note2:""},ue=[{key:"customerId",required:!0,length:[10]},{key:"name",required:!0,length:[30]},{key:"shortName",required:!0,length:[10]},{key:"principal",length:[2,10]},{key:"contactPerson",length:[2,10]},{key:"address",length:[100]},{key:"phone1",length:[10]},{key:"phone2",length:[10]},{key:"faxNumber",length:[10]},{key:"cellphone",length:[10]},{key:"note1",length:[255]},{key:"note2",length:[255]}],he=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).history=Object(vt.b)(),n.customerAPI=new oe,n.getCustomerData=function(){n.customerAPI.getCustomerData(n.props.customerId).then((function(t){0===t.code?n.setState({loading:!1,formData:t.data},(function(){return n.checkCanSubmit()})):(O.b.error(t.message),n.history.push("/Basic/Customer"))})).catch((function(){O.b.error("Error!"),n.history.push("/Basic/Customer")}))},n.getFormErrorStatus=function(t){var e=n.state.formStatus.find((function(e){return e.key===t}));return!!e&&e.error},n.onInputChange=function(t){var e=t.target.getAttribute("id"),a=t.target.value,r=n.state.formData;r[e]=a,n.checkData(r,e)},n.checkData=function(t,e){var a=n.state.formStatus,r=a.find((function(t){return t.key===e}));if(r){var c=t[e],i=!1;r.required&&!c&&(i=!0),r.length&&r.length.length>0&&c&&(1===r.length.length&&c.length>r.length[0]||r.length.length>1&&(c.length<r.length[0]||c.length>r.length[1]))&&(i=!0),r.regExp&&!r.regExp.test(c)&&(i=!0),r.error=i}n.setState({formData:t,formStatus:a},(function(){return n.checkCanSubmit()}))},n.checkCanSubmit=function(){n.setState({canSubmit:!n.state.formStatus.some((function(t){return t.error}))})},n.checkId=function(){var t=n.state.formData;""!==t.customerId&&n.setState({validId:!1},(function(){n.customerAPI.getCustomerData(t.customerId).then((function(e){0===e.code?Rt.a.error({title:"\u6b64\u7de8\u865f\u5df2\u91cd\u8907\uff0c\u8acb\u91cd\u65b0\u8f38\u5165",icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){t.customerId="",n.setState({formData:t})}}):n.setState({validId:!0})}))}))},n.handleCreate=function(t){n.setState({loading:!0},(function(){n.customerAPI.addCustomerData(n.state.formData).then((function(e){0===e.code?(O.b.success("\u6210\u529f\u65b0\u589e\u8cc7\u6599"),t?n.history.push("/Basic/Customer"):(document.getElementById("layout-content-wrapper").scrollTo({top:0,behavior:"smooth"}),n.setState({loading:!1,formData:Object(d.a)({},de),formStatus:JSON.parse(JSON.stringify(ue)),canSubmit:!1}))):Rt.a.error({title:e.message,icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(t){O.b.error(t.response.data.message),n.setState({loading:!1})}))}))},n.handleSubmit=function(t){n.setState({loading:!0},(function(){n.customerAPI.updateCustomerData(n.props.customerId,n.state.formData).then((function(e){0===e.code?(O.b.success("\u6210\u529f\u66f4\u65b0\u8cc7\u6599"),t?n.history.push("/Basic/Customer"):(document.getElementById("layout-content-wrapper").scrollTo({top:0,behavior:"smooth"}),n.getCustomerData())):Rt.a.error({title:e.message,icon:Object(D.jsx)(Kt.a,{}),content:e.data.map((function(t,e){return Object(D.jsxs)(D.Fragment,{children:[e>0&&Object(D.jsx)("br",{}),t.split(": ")[1]]})})),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(){O.b.error("\u8cc7\u6599\u66f4\u65b0\u5931\u6557"),n.setState({loading:!1})}))}))},n.handleCancel=function(){Rt.a.confirm({title:"\u8b8a\u66f4\u5c1a\u672a\u5132\u5b58\uff0c\u78ba\u5b9a\u8981\u96e2\u958b\u55ce",icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){n.history.push("/Basic/Customer")}})},n.state={loading:!t.createFlag,formData:Object(d.a)({},de),formStatus:JSON.parse(JSON.stringify(ue)),validId:!1,canSubmit:!1},t.createFlag||n.getCustomerData(),n}return Object(b.a)(a,[{key:"componentDidUpdate",value:function(t){var e=this;!t.createFlag&&this.props.createFlag?this.setState({loading:!1,formData:Object(d.a)({},de),formStatus:JSON.parse(JSON.stringify(ue)),validId:!1,canSubmit:!1}):this.props.createFlag||t.customerId===this.props.customerId||this.setState({loading:!0,formData:Object(d.a)({},de),formStatus:JSON.parse(JSON.stringify(ue)),validId:!0,canSubmit:!1},(function(){return e.getCustomerData()}))}},{key:"render",value:function(){var t={gutter:[24,24],type:"flex",align:"middle",style:{marginBottom:24,marginTop:24}},e={xs:24,sm:24,md:24,lg:8};return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)($t.a,{style:{marginBottom:10},children:[Object(D.jsx)($t.a.Item,{children:Object(D.jsx)(s.b,{to:"/Basic/Customer",children:"\u5ba2\u6236"})}),Object(D.jsx)($t.a.Item,{children:this.props.createFlag?"\u65b0\u589e\u5ba2\u6236":"\u4fee\u6539\u5ba2\u6236\u8cc7\u6599"})]}),Object(D.jsxs)(Xt.a,{spinning:this.state.loading,children:[Object(D.jsx)(Zt.a,{className:"form-detail-card",children:Object(D.jsxs)(Jt.a,Object(d.a)(Object(d.a)({},t),{},{children:[Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u5ba2\u6236\u4ee3\u865f",content:Object(D.jsx)(yt.a,{onBlur:this.checkId,onChange:this.onInputChange,value:this.state.formData.customerId,id:"customerId",disabled:!this.props.createFlag}),message:"\u5ba2\u6236\u4ee3\u865f\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("customerId")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u5ba2\u6236\u540d\u7a31",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.name,id:"name"}),message:"\u5ba2\u6236\u540d\u7a31\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572830\u5b57\u5167",error:this.getFormErrorStatus("name")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u5ba2\u6236\u7c21\u7a31",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.shortName,id:"shortName"}),message:"\u5ba2\u6236\u7c21\u7a31\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("shortName")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u8ca0\u8cac\u4eba",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.principal,id:"principal"}),message:"\u9577\u5ea6\u9700\u57282~10\u5b57",error:this.getFormErrorStatus("principal")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u806f\u7d61\u4eba",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.contactPerson,id:"contactPerson"}),message:"\u9577\u5ea6\u9700\u57282~10\u5b57",error:this.getFormErrorStatus("contactPerson")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u50b3\u771f\u865f\u78bc",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.faxNumber,id:"faxNumber"}),message:"\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("faxNumber")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u96fb\u8a711",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.phone1,id:"phone1"}),message:"\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("phone1")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u96fb\u8a712",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.phone2,id:"phone2"}),message:"\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("phone2")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u884c\u52d5\u96fb\u8a71",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.cellphone,id:"cellphone"}),message:"\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("cellphone")})}))]}))}),Object(D.jsx)(Zt.a,{className:"form-detail-card",children:Object(D.jsx)(Jt.a,Object(d.a)(Object(d.a)({},t),{},{children:Object(D.jsx)(Ht.a,{span:24,children:Object(D.jsx)(ee,{required:!1,title:"\u5730\u5740",content:Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(Jt.a,{type:"flex",gutter:[10],children:[Object(D.jsx)(Ht.a,{style:{width:120},children:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.postCode,id:"postCode",placeholder:"\u90f5\u905e\u5340\u865f"})}),Object(D.jsx)(Ht.a,{style:{width:"calc(100% - 120px)"},children:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.address,id:"address",placeholder:"\u5730\u5740"})})]})}),message:"\u9577\u5ea6\u9700\u5728100\u5b57\u5167",error:this.getFormErrorStatus("address")})})}))}),Object(D.jsxs)(Zt.a,{className:"form-detail-card",children:[Object(D.jsx)(Jt.a,Object(d.a)(Object(d.a)({},t),{},{align:"top",children:Object(D.jsx)(Ht.a,{span:24,children:Object(D.jsx)(ee,{required:!1,align:"flex-start",title:"\u5099\u8a3b1",content:Object(D.jsx)(yt.a.TextArea,{onChange:this.onInputChange,value:this.state.formData.note1,id:"note1",autoSize:{minRows:4,maxRows:4}}),message:"\u9577\u5ea6\u9700\u5728255\u5b57\u5167",error:this.getFormErrorStatus("note1")})})})),Object(D.jsx)(Jt.a,Object(d.a)(Object(d.a)({},t),{},{children:Object(D.jsx)(Ht.a,{span:24,children:Object(D.jsx)(ee,{required:!1,align:"flex-start",title:"\u5099\u8a3b2",content:Object(D.jsx)(yt.a.TextArea,{onChange:this.onInputChange,value:this.state.formData.note2,id:"note2",autoSize:{minRows:4,maxRows:4}}),message:"\u9577\u5ea6\u9700\u5728255\u5b57\u5167",error:this.getFormErrorStatus("note2")})})}))]}),Object(D.jsx)("div",{style:{margin:"20px",textAlign:"center"},children:Object(D.jsxs)(Vt.b,{children:[this.props.createFlag?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),disabled:!this.state.validId,onClick:this.handleCreate.bind(this,!0),children:"\u5132\u5b58"}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),disabled:!this.state.validId,onClick:this.handleCreate.bind(this,!1),children:"\u5132\u5b58\u4e26\u7e7c\u7e8c\u65b0\u589e"})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),onClick:this.handleSubmit.bind(this,!1),children:"\u5132\u5b58"}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),onClick:this.handleSubmit.bind(this,!0),children:"\u5132\u5b58\u4e26\u8fd4\u56de\u5217\u8868"})]}),Object(D.jsx)(Dt.a,{danger:!0,icon:Object(D.jsx)(ne.a,{}),onClick:this.handleCancel,children:"\u53d6\u6d88"})]})})]})]})}}]),a}(r.a.Component),je=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(){return Object(p.a)(this,a),e.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return Object(D.jsx)(he,{createFlag:this.props.createFlag,customerId:this.props.match.params.customerId})}}]),a}(r.a.Component),pe=function t(){Object(p.a)(this,t),this.getEmployeeList=function(t){return Lt("get","/employees",t).then((function(t){return t.data}))},this.getEmployeeData=function(t){return Lt("get","/employees/".concat(t)).then((function(t){return t.data}))},this.addEmployeeData=function(t){return Lt("post","/employees/".concat(t.employeeId),t).then((function(t){return t.data}))},this.updateEmployeeData=function(t,e){return Lt("patch","/employees/".concat(t),e).then((function(t){return t.data}))}},be=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).history=Object(vt.b)(),n.employeeAPI=new pe,n.getList=function(){var t=n.state,e=t.search,a=t.pagination,r={pageNum:a.current,pageSize:a.pageSize,queryByEnum:e.id,queryKeyWord:"%".concat(e.keyword,"%")};n.employeeAPI.getEmployeeList(r).then((function(t){a.total=t.data.total,n.setState({loading:!1,list:t.data.list,pagination:a})})).catch((function(){return n.setState({loading:!1})}))},n.onSelectChange=function(t){var e=n.state.search;e.id=t,n.setState({search:e})},n.onInputChange=function(t){var e=n.state.search;e.keyword=t.target.value,n.setState({search:e})},n.handleSearch=function(){var t=n.state.pagination;t.current=1,n.setState({loading:!0,list:[],pagination:t},(function(){return n.getList()}))},n.getColumns=function(){var t=Object(Bt.a)(n),e=n.state.pagination;return[{dataIndex:"employeeId",title:"\u57f7\u884c",width:50,render:function(e){return Object(D.jsxs)(Vt.b,{className:"list-table-option",children:[Object(D.jsx)(Ut.a,{title:"\u7de8\u8f2f",children:Object(D.jsx)(Dt.a,{className:"list-table-option-edit",size:"small",onClick:t.onEdit.bind(t,e),children:Object(D.jsx)(R,{})})}),Object(D.jsx)(Ut.a,{title:"\u522a\u9664",children:Object(D.jsx)(Dt.a,{className:"list-table-option-delete",size:"small",onClick:t.handleDelete.bind(t,e),children:Object(D.jsx)(V,{})})})]})}},{title:"\u5e8f",width:30,align:"center",render:function(t,a,n){return(e.current-1)*e.pageSize+n+1}},{title:"\u54e1\u5de5\u7de8\u865f",dataIndex:"employeeId"},{title:"\u59d3\u540d",dataIndex:"name"},{title:"\u624b\u6a5f\u865f\u78bc",dataIndex:"cellphone"},{title:"\u5e02\u5167\u96fb\u8a71",dataIndex:"phone"}]},n.onEdit=function(t){n.history.push("/Basic/Employee/".concat(t))},n.handleDelete=function(t){Rt.a.confirm({title:"\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u7b46\u8cc7\u6599\u55ce",icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){console.log("delete: "+t)}})},n.onPageChange=function(t,e){var a=n.state.pagination;a.current=t,a.pageSize=e,n.setState({loading:!0,list:[],pagination:a},(function(){return n.getList()}))},n.state={loading:!0,search:{id:"EMPLOYEE_ID",keyword:""},list:[],pagination:{current:1,total:0,pageSize:10,position:["bottomLeft"]}},n.getList(),n}return Object(b.a)(a,[{key:"render",value:function(){var t=this;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:"list-header",children:Object(D.jsxs)(Jt.a,{type:"flex",justify:"space-between",children:[Object(D.jsx)(Ht.a,{children:Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(_,{}),onClick:function(){return t.history.push("/Basic/Employee/Add")},className:"list-header-add",children:"\u65b0\u589e"})}),Object(D.jsx)(Ht.a,{children:Object(D.jsxs)(Vt.b,{children:[Object(D.jsxs)(Yt.a,{placeholder:"\u641c\u5c0b\u6b04\u4f4d",value:this.state.search.id,onChange:this.onSelectChange,children:[Object(D.jsx)(Yt.a.Option,{value:"EMPLOYEE_ID",children:"\u54e1\u5de5\u7de8\u865f"}),Object(D.jsx)(Yt.a.Option,{value:"NAME",children:"\u59d3\u540d"})]}),Object(D.jsx)(yt.a,{placeholder:"\u641c\u5c0b\u5167\u5bb9",allowClear:!0,onChange:this.onInputChange}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(H,{}),onClick:this.handleSearch,className:"list-header-search",children:"\u67e5\u8a62"})]})})]})}),Object(D.jsx)(_t.a,{className:"list-table-wrapper",rowKey:"employeeId",size:"small",columns:this.getColumns(),loading:this.state.loading,dataSource:this.state.list,pagination:Gt(this.state.pagination,this.onPageChange)})]})}}]),a}(r.a.Component),ge=a(321),me=a(325),Oe={employeeId:"",identityCardNumber:"",name:"",birthday:null,address:"",cellphone:"",phone:"",takeOfficeDay:null,education:"",experience:"",note:"",salary:null,extraBonus:null,fullAttendanceBonus:null},fe=[{key:"employeeId",required:!0,length:[10]},{key:"identityCardNumber",required:!0,length:[10]},{key:"name",required:!0,length:[30]},{key:"address",length:[100]},{key:"cellphone",length:[10]},{key:"phone",length:[10]},{key:"education",length:[10]},{key:"experience",length:[10]},{key:"note",length:[255]}],xe=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).history=Object(vt.b)(),n.employeeAPI=new pe,n.getEmployeeData=function(){n.employeeAPI.getEmployeeData(n.props.employeeId).then((function(t){0===t.code?n.setState({loading:!1,formData:Object(d.a)(Object(d.a)({},t.data),{},{birthday:y()(t.data.birthday,"YYYY-MM-DD").valueOf(),takeOfficeDay:y()(t.data.takeOfficeDay,"YYYY-MM-DD").valueOf()})},(function(){return n.checkCanSubmit()})):(O.b.error(t.message),n.history.push("/Basic/Employee"))})).catch((function(){O.b.error("Error!"),n.history.push("/Basic/Employee")}))},n.getFormErrorStatus=function(t){var e=n.state.formStatus.find((function(e){return e.key===t}));return!!e&&e.error},n.onInputChange=function(t){var e=t.target.getAttribute("id"),a=t.target.value,r=n.state.formData;r[e]=a,n.checkData(r,e)},n.onDateChange=function(t,e){var a=n.state.formData;a[t]=y()(e).valueOf(),n.checkData(a,t)},n.onNumberChange=function(t,e){var a=n.state.formData;a[t]=e,n.checkData(a,t)},n.checkData=function(t,e){var a=n.state.formStatus,r=a.find((function(t){return t.key===e}));if(r){var c=t[e],i=!1;r.required&&!c&&(i=!0),r.length&&r.length.length>0&&c&&(1===r.length.length&&c.length>r.length[0]||r.length.length>1&&(c.length<r.length[0]||c.length>r.length[1]))&&(i=!0),r.regExp&&!r.regExp.test(c)&&(i=!0),r.error=i}n.setState({formData:t,formStatus:a},(function(){return n.checkCanSubmit()}))},n.checkCanSubmit=function(){n.setState({canSubmit:!n.state.formStatus.some((function(t){return t.error}))})},n.checkId=function(){var t=n.state.formData;""!==t.employeeId&&n.setState({validId:!1},(function(){n.employeeAPI.getEmployeeData(t.employeeId).then((function(e){0===e.code?Rt.a.error({title:"\u6b64\u7de8\u865f\u5df2\u91cd\u8907\uff0c\u8acb\u91cd\u65b0\u8f38\u5165",icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){t.employeeId="",n.setState({formData:t})}}):n.setState({validId:!0})}))}))},n.handleCreate=function(t){n.setState({loading:!0},(function(){n.employeeAPI.addEmployeeData(n.state.formData).then((function(e){0===e.code?(O.b.success("\u6210\u529f\u65b0\u589e\u8cc7\u6599"),t?n.history.push("/Basic/Employee"):(document.getElementById("layout-content-wrapper").scrollTo({top:0,behavior:"smooth"}),n.setState({loading:!1,formData:Object(d.a)({},Oe),formStatus:JSON.parse(JSON.stringify(fe)),canSubmit:!1}))):Rt.a.error({title:e.message,icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(t){O.b.error(t.response.data.message),n.setState({loading:!1})}))}))},n.handleSubmit=function(t){n.setState({loading:!0},(function(){n.employeeAPI.updateEmployeeData(n.props.employeeId,Object(d.a)(Object(d.a)({},n.state.formData),{},{birthday:y()(n.state.formData.birthday).format("YYYY-MM-DD"),takeOfficeDay:y()(n.state.formData.takeOfficeDay).format("YYYY-MM-DD")})).then((function(e){0===e.code?(O.b.success("\u6210\u529f\u66f4\u65b0\u8cc7\u6599"),t?n.history.push("/Basic/Employee"):(document.getElementById("layout-content-wrapper").scrollTo({top:0,behavior:"smooth"}),n.getEmployeeData())):Rt.a.error({title:e.message,icon:Object(D.jsx)(Kt.a,{}),content:e.data.map((function(t,e){return Object(D.jsxs)(D.Fragment,{children:[e>0&&Object(D.jsx)("br",{}),t.split(": ")[1]]})})),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(t){O.b.error("\u8cc7\u6599\u66f4\u65b0\u5931\u6557"),n.setState({loading:!1})}))}))},n.handleCancel=function(){Rt.a.confirm({title:"\u8b8a\u66f4\u5c1a\u672a\u5132\u5b58\uff0c\u78ba\u5b9a\u8981\u96e2\u958b\u55ce",icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){n.history.push("/Basic/Employee")}})},n.state={loading:!t.createFlag,formData:Object(d.a)({},Oe),formStatus:JSON.parse(JSON.stringify(fe)),validId:!1,canSubmit:!1},t.createFlag||n.getEmployeeData(),n}return Object(b.a)(a,[{key:"componentDidUpdate",value:function(t){var e=this;!t.createFlag&&this.props.createFlag?this.setState({loading:!1,formData:Object(d.a)({},Oe),formStatus:JSON.parse(JSON.stringify(fe)),validId:!1,canSubmit:!1}):this.props.createFlag||t.employeeId===this.props.employeeId||this.setState({loading:!0,formData:Object(d.a)({},Oe),formStatus:JSON.parse(JSON.stringify(fe)),validId:!0,canSubmit:!1},(function(){return e.getEmployeeData()}))}},{key:"render",value:function(){var t={gutter:[24,24],type:"flex",align:"middle",style:{marginBottom:24,marginTop:24}},e={xs:24,sm:24,md:24,lg:8};return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)($t.a,{style:{marginBottom:10},children:[Object(D.jsx)($t.a.Item,{children:Object(D.jsx)(s.b,{to:"/Basic/Employee",children:"\u54e1\u5de5"})}),Object(D.jsx)($t.a.Item,{children:this.props.createFlag?"\u65b0\u589e\u54e1\u5de5":"\u4fee\u6539\u54e1\u5de5\u8cc7\u6599"})]}),Object(D.jsxs)(Xt.a,{spinning:this.state.loading,children:[Object(D.jsx)(Zt.a,{className:"form-detail-card",children:Object(D.jsxs)(Jt.a,Object(d.a)(Object(d.a)({},t),{},{children:[Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u54e1\u5de5\u7de8\u865f",content:Object(D.jsx)(yt.a,{onBlur:this.checkId,onChange:this.onInputChange,value:this.state.formData.employeeId,id:"employeeId",disabled:!this.props.createFlag}),message:"\u54e1\u5de5\u7de8\u865f\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("employeeId")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u8eab\u5206\u8b49\u865f",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.identityCardNumber,id:"identityCardNumber"}),message:"\u8eab\u5206\u8b49\u865f\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("identityCardNumber")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u59d3\u540d",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.name,id:"name"}),message:"\u59d3\u540d\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572830\u5b57\u5167",error:this.getFormErrorStatus("name")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u51fa\u751f\u5e74\u6708\u65e5",content:Object(D.jsx)(ge.a,{onChange:this.onDateChange.bind(this,"birthday"),value:this.state.formData.birthday?y()(this.state.formData.birthday):void 0,format:"YYYY-MM-DD",placeholder:"",style:{display:"block"}})})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u624b\u6a5f\u865f\u78bc",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.cellphone,id:"cellphone"}),message:"\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("cellphone")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u5e02\u5167\u96fb\u8a71",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.phone,id:"phone"}),message:"\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("phone")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u5c31\u8077\u65e5\u671f",content:Object(D.jsx)(ge.a,{onChange:this.onDateChange.bind(this,"takeOfficeDay"),value:this.state.formData.takeOfficeDay?y()(this.state.formData.takeOfficeDay):void 0,format:"YYYY-MM-DD",placeholder:"",style:{display:"block"}})})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u5b78\u6b77",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.education,id:"education"}),message:"\u9577\u5ea6\u9700\u572810\u5b57\u5167",error:this.getFormErrorStatus("education")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u85aa\u8cc7",content:Object(D.jsx)(me.a,{onChange:this.onNumberChange.bind(this,"salary"),value:this.state.formData.salary,min:0,max:999999,step:1,style:{display:"block",width:"100%"}})})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u8077\u52d9\u6d25\u8cbc",content:Object(D.jsx)(me.a,{onChange:this.onNumberChange.bind(this,"extraBonus"),value:this.state.formData.extraBonus,min:0,max:999999,step:1,style:{display:"block",width:"100%"}})})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u5168\u52e4\u6d25\u8cbc",content:Object(D.jsx)(me.a,{onChange:this.onNumberChange.bind(this,"fullAttendanceBonus"),value:this.state.formData.fullAttendanceBonus,min:0,max:999999,step:1,style:{display:"block",width:"100%"}})})}))]}))}),Object(D.jsx)(Zt.a,{className:"form-detail-card",children:Object(D.jsx)(Jt.a,Object(d.a)(Object(d.a)({},t),{},{children:Object(D.jsx)(Ht.a,{span:24,children:Object(D.jsx)(ee,{required:!1,title:"\u5730\u5740",content:Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(Jt.a,{type:"flex",gutter:[10],children:[Object(D.jsx)(Ht.a,{style:{width:120},children:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.postCode,id:"postCode",placeholder:"\u90f5\u905e\u5340\u865f"})}),Object(D.jsx)(Ht.a,{style:{width:"calc(100% - 120px)"},children:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.address,id:"address",placeholder:"\u5730\u5740"})})]})}),message:"\u9577\u5ea6\u9700\u5728100\u5b57\u5167",error:this.getFormErrorStatus("address")})})}))}),Object(D.jsxs)(Zt.a,{className:"form-detail-card",children:[Object(D.jsx)(Jt.a,Object(d.a)(Object(d.a)({},t),{},{align:"top",children:Object(D.jsx)(Ht.a,{span:24,children:Object(D.jsx)(ee,{required:!1,align:"flex-start",title:"\u7d93\u6b77",content:Object(D.jsx)(yt.a.TextArea,{onChange:this.onInputChange,value:this.state.formData.experience,id:"experience",autoSize:{minRows:4,maxRows:4}}),message:"\u9577\u5ea6\u9700\u5728255\u5b57\u5167",error:this.getFormErrorStatus("experience")})})})),Object(D.jsx)(Jt.a,Object(d.a)(Object(d.a)({},t),{},{children:Object(D.jsx)(Ht.a,{span:24,children:Object(D.jsx)(ee,{required:!1,align:"flex-start",title:"\u5099\u8a3b",content:Object(D.jsx)(yt.a.TextArea,{onChange:this.onInputChange,value:this.state.formData.note,id:"note",autoSize:{minRows:4,maxRows:4}}),message:"\u9577\u5ea6\u9700\u5728255\u5b57\u5167",error:this.getFormErrorStatus("note")})})}))]}),Object(D.jsx)("div",{style:{margin:"20px",textAlign:"center"},children:Object(D.jsxs)(Vt.b,{children:[this.props.createFlag?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),disabled:!this.state.validId,onClick:this.handleCreate.bind(this,!0),children:"\u5132\u5b58"}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),disabled:!this.state.validId,onClick:this.handleCreate.bind(this,!1),children:"\u5132\u5b58\u4e26\u7e7c\u7e8c\u65b0\u589e"})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),onClick:this.handleSubmit.bind(this,!1),children:"\u5132\u5b58"}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),onClick:this.handleSubmit.bind(this,!0),children:"\u5132\u5b58\u4e26\u8fd4\u56de\u5217\u8868"})]}),Object(D.jsx)(Dt.a,{danger:!0,icon:Object(D.jsx)(ne.a,{}),onClick:this.handleCancel,children:"\u53d6\u6d88"})]})})]})]})}}]),a}(r.a.Component),Se=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(){return Object(p.a)(this,a),e.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return Object(D.jsx)(xe,{createFlag:this.props.createFlag,employeeId:this.props.match.params.employeeId})}}]),a}(r.a.Component),ve=function t(){Object(p.a)(this,t),this.getVehicleList=function(t){return Lt("get","/kinds",t).then((function(t){return t.data}))},this.getVehicleData=function(t){return Lt("get","/kinds/".concat(t)).then((function(t){return t.data}))},this.addVehicleData=function(t){return Lt("post","/kinds/".concat(t.kindId),t).then((function(t){return t.data}))},this.updateVehicleData=function(t,e){return Lt("patch","/kinds/".concat(t),e).then((function(t){return t.data}))}},Ce=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).history=Object(vt.b)(),n.vehicleAPI=new ve,n.getList=function(){var t=n.state,e=t.search,a=t.pagination,r={pageNum:a.current,pageSize:a.pageSize,kindIdLike:"%".concat(e.keyword,"%")};n.vehicleAPI.getVehicleList(r).then((function(t){a.total=t.data.total,n.setState({loading:!1,list:t.data.list,pagination:a})})).catch((function(){return n.setState({loading:!1})}))},n.onInputChange=function(t){var e=n.state.search;e.keyword=t.target.value,n.setState({search:e})},n.handleSearch=function(){var t=n.state.pagination;t.current=1,n.setState({loading:!0,list:[],pagination:t},(function(){return n.getList()}))},n.getColumns=function(){var t=Object(Bt.a)(n),e=n.state.pagination;return[{dataIndex:"kindId",title:"\u57f7\u884c",width:50,render:function(e){return Object(D.jsxs)(Vt.b,{className:"list-table-option",children:[Object(D.jsx)(Ut.a,{title:"\u7de8\u8f2f",children:Object(D.jsx)(Dt.a,{className:"list-table-option-edit",size:"small",onClick:t.onEdit.bind(t,e),children:Object(D.jsx)(R,{})})}),Object(D.jsx)(Ut.a,{title:"\u522a\u9664",children:Object(D.jsx)(Dt.a,{className:"list-table-option-delete",size:"small",onClick:t.handleDelete.bind(t,e),children:Object(D.jsx)(V,{})})})]})}},{title:"\u5e8f",width:30,align:"center",render:function(t,a,n){return(e.current-1)*e.pageSize+n+1}},{title:"\u8eca\u7a2e\u4ee3\u865f",dataIndex:"kindId"},{title:"\u8eca\u7a2e\u7c21\u7a31",dataIndex:"shortName"},{title:"\u8eca\u7a2e\u540d\u7a31",dataIndex:"name"},{title:"\u8eca\u5ee0",dataIndex:"factory"}]},n.onEdit=function(t){n.history.push("/Parts/Vehicle/".concat(t))},n.handleDelete=function(t){Rt.a.confirm({title:"\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u7b46\u8cc7\u6599\u55ce",icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){console.log("delete: "+t)}})},n.onPageChange=function(t,e){var a=n.state.pagination;a.current=t,a.pageSize=e,n.setState({loading:!0,list:[],pagination:a},(function(){return n.getList()}))},n.state={loading:!0,search:{keyword:""},list:[],pagination:{current:1,total:0,pageSize:10,position:["bottomLeft"]}},n.getList(),n}return Object(b.a)(a,[{key:"render",value:function(){var t=this;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:"list-header",children:Object(D.jsxs)(Jt.a,{type:"flex",justify:"space-between",children:[Object(D.jsx)(Ht.a,{children:Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(_,{}),onClick:function(){return t.history.push("/Parts/Vehicle/Add")},className:"list-header-add",children:"\u65b0\u589e"})}),Object(D.jsx)(Ht.a,{children:Object(D.jsxs)(Vt.b,{children:[Object(D.jsx)(yt.a,{placeholder:"\u641c\u5c0b\u8eca\u7a2e\u4ee3\u865f",allowClear:!0,onChange:this.onInputChange,style:{width:140}}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(H,{}),onClick:this.handleSearch,className:"list-header-search",children:"\u67e5\u8a62"})]})})]})}),Object(D.jsx)(_t.a,{className:"list-table-wrapper",rowKey:"vendorId",size:"small",columns:this.getColumns(),loading:this.state.loading,dataSource:this.state.list,pagination:Gt(this.state.pagination,this.onPageChange)})]})}}]),a}(r.a.Component),ye={kindId:"",name:"",shortName:"",factory:""},Ie=[{key:"kindId",required:!0,length:[8]},{key:"name",required:!0,length:[20]},{key:"shortName",required:!0,length:[15]},{key:"factory",length:[3]}],De=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).history=Object(vt.b)(),n.vehicleAPI=new ve,n.getVehicleData=function(){n.vehicleAPI.getVehicleData(n.props.kindId).then((function(t){0===t.code?n.setState({loading:!1,formData:t.data},(function(){return n.checkCanSubmit()})):(O.b.error(t.message),n.history.push("/Parts/Vehicle"))})).catch((function(){O.b.error("Error!"),n.history.push("/Parts/Vehicle")}))},n.getFormErrorStatus=function(t){var e=n.state.formStatus.find((function(e){return e.key===t}));return!!e&&e.error},n.onInputChange=function(t){var e=t.target.getAttribute("id"),a=t.target.value,r=n.state.formData;r[e]=a,n.checkData(r,e)},n.checkData=function(t,e){var a=n.state.formStatus,r=a.find((function(t){return t.key===e}));if(r){var c=t[e],i=!1;r.required&&!c&&(i=!0),r.length&&r.length.length>0&&c&&(1===r.length.length&&c.length>r.length[0]||r.length.length>1&&(c.length<r.length[0]||c.length>r.length[1]))&&(i=!0),r.regExp&&!r.regExp.test(c)&&(i=!0),r.error=i}n.setState({formData:t,formStatus:a},(function(){return n.checkCanSubmit()}))},n.checkCanSubmit=function(){n.setState({canSubmit:!n.state.formStatus.some((function(t){return t.error}))})},n.checkId=function(){var t=n.state.formData;""!==t.kindId&&n.setState({validId:!1},(function(){n.vehicleAPI.getVehicleData(t.kindId).then((function(e){0===e.code?Rt.a.error({title:"\u6b64\u7de8\u865f\u5df2\u91cd\u8907\uff0c\u8acb\u91cd\u65b0\u8f38\u5165",icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){t.kindId="",n.setState({formData:t})}}):n.setState({validId:!0})}))}))},n.handleCreate=function(t){n.setState({loading:!0},(function(){n.vehicleAPI.addVehicleData(n.state.formData).then((function(e){0===e.code?(O.b.success("\u6210\u529f\u65b0\u589e\u8cc7\u6599"),t?n.history.push("/Basic/Vehicle"):(document.getElementById("layout-content-wrapper").scrollTo({top:0,behavior:"smooth"}),n.setState({loading:!1,formData:Object(d.a)({},ye),formStatus:JSON.parse(JSON.stringify(Ie)),canSubmit:!1}))):Rt.a.error({title:e.message,icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(t){O.b.error(t.response.data.message),n.setState({loading:!1})}))}))},n.handleSubmit=function(t){n.setState({loading:!0},(function(){n.vehicleAPI.updateVehicleData(n.props.kindId,n.state.formData).then((function(e){0===e.code?(O.b.success("\u6210\u529f\u66f4\u65b0\u8cc7\u6599"),t?n.history.push("/Parts/Vehicle"):(document.getElementById("layout-content-wrapper").scrollTo({top:0,behavior:"smooth"}),n.getVehicleData())):Rt.a.error({title:e.message,icon:Object(D.jsx)(Kt.a,{}),content:e.data.map((function(t,e){return Object(D.jsxs)(D.Fragment,{children:[e>0&&Object(D.jsx)("br",{}),t.split(": ")[1]]})})),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(){O.b.error("\u8cc7\u6599\u66f4\u65b0\u5931\u6557"),n.setState({loading:!1})}))}))},n.handleCancel=function(){Rt.a.confirm({title:"\u8b8a\u66f4\u5c1a\u672a\u5132\u5b58\uff0c\u78ba\u5b9a\u8981\u96e2\u958b\u55ce",icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){n.history.push("/Parts/Vehicle")}})},n.state={loading:!t.createFlag,formData:Object(d.a)({},ye),formStatus:JSON.parse(JSON.stringify(Ie)),validId:!1,canSubmit:!1},t.createFlag||n.getVehicleData(),n}return Object(b.a)(a,[{key:"componentDidUpdate",value:function(t){var e=this;!t.createFlag&&this.props.createFlag?this.setState({loading:!1,formData:Object(d.a)({},ye),formStatus:JSON.parse(JSON.stringify(Ie)),validId:!1,canSubmit:!1}):this.props.createFlag||t.kindId===this.props.kindId||this.setState({loading:!0,formData:Object(d.a)({},ye),formStatus:JSON.parse(JSON.stringify(Ie)),validId:!0,canSubmit:!1},(function(){return e.getVehicleData()}))}},{key:"render",value:function(){var t={xs:24,sm:24,md:24,lg:12};return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)($t.a,{style:{marginBottom:10},children:[Object(D.jsx)($t.a.Item,{children:Object(D.jsx)(s.b,{to:"/Parts/Vehicle",children:"\u8eca\u7a2e"})}),Object(D.jsx)($t.a.Item,{children:this.props.createFlag?"\u65b0\u589e\u8eca\u7a2e":"\u4fee\u6539\u8eca\u7a2e\u8cc7\u6599"})]}),Object(D.jsxs)(Xt.a,{spinning:this.state.loading,children:[Object(D.jsx)(Zt.a,{className:"form-detail-card",children:Object(D.jsxs)(Jt.a,Object(d.a)(Object(d.a)({},{gutter:[24,24],type:"flex",align:"middle",style:{marginBottom:24,marginTop:24}}),{},{children:[Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},t),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u8eca\u7a2e\u4ee3\u865f",content:Object(D.jsx)(yt.a,{onBlur:this.checkId,onChange:this.onInputChange,value:this.state.formData.kindId,id:"kindId",disabled:!this.props.createFlag}),message:"\u8eca\u7a2e\u4ee3\u865f\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u57288\u5b57\u5167",error:this.getFormErrorStatus("kindId")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},t),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u8eca\u7a2e\u540d\u7a31",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.name,id:"name"}),message:"\u8eca\u7a2e\u540d\u7a31\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572820\u5b57",error:this.getFormErrorStatus("name")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},t),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u8eca\u7a2e\u7c21\u7a31",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.shortName,id:"shortName"}),message:"\u8eca\u7a2e\u7c21\u7a31\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572815\u5b57\u5167",error:this.getFormErrorStatus("shortName")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},t),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u8eca\u5ee0",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.factory,id:"factory"}),message:"\u9577\u5ea6\u9700\u57283\u5b57\u5167",error:this.getFormErrorStatus("factory")})}))]}))}),Object(D.jsx)("div",{style:{margin:"20px",textAlign:"center"},children:Object(D.jsxs)(Vt.b,{children:[this.props.createFlag?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),disabled:!this.state.validId,onClick:this.handleCreate.bind(this,!0),children:"\u5132\u5b58"}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),disabled:!this.state.validId,onClick:this.handleCreate.bind(this,!1),children:"\u5132\u5b58\u4e26\u7e7c\u7e8c\u65b0\u589e"})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),onClick:this.handleSubmit.bind(this,!1),children:"\u5132\u5b58"}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),onClick:this.handleSubmit.bind(this,!0),children:"\u5132\u5b58\u4e26\u8fd4\u56de\u5217\u8868"})]}),Object(D.jsx)(Dt.a,{danger:!0,icon:Object(D.jsx)(ne.a,{}),onClick:this.handleCancel,children:"\u53d6\u6d88"})]})})]})]})}}]),a}(r.a.Component),ke=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(){return Object(p.a)(this,a),e.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return Object(D.jsx)(De,{createFlag:this.props.createFlag,kindId:this.props.match.params.kindId})}}]),a}(r.a.Component),we=function t(){Object(p.a)(this,t),this.getLevelList=function(t){return Lt("get","/grades",t).then((function(t){return t.data}))},this.getLevelData=function(t){return Lt("get","/grades/".concat(t)).then((function(t){return t.data}))},this.addLevelData=function(t){return Lt("post","/grades/".concat(t.gradeId),t).then((function(t){return t.data}))},this.updateLevelData=function(t,e){return Lt("patch","/grades/".concat(t),e).then((function(t){return t.data}))}},Ne=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).history=Object(vt.b)(),n.levelAPI=new we,n.getList=function(){var t=n.state,e=t.search,a=t.pagination,r={pageNum:a.current,pageSize:a.pageSize,gradeId:"%".concat(e.keyword,"%")};n.levelAPI.getLevelList(r).then((function(t){a.total=t.data.total,n.setState({loading:!1,list:t.data.list,pagination:a})})).catch((function(){return n.setState({loading:!1})}))},n.onInputChange=function(t){var e=n.state.search;e.keyword=t.target.value,n.setState({search:e})},n.handleSearch=function(){var t=n.state.pagination;t.current=1,n.setState({loading:!0,list:[],pagination:t},(function(){return n.getList()}))},n.getColumns=function(){var t=Object(Bt.a)(n),e=n.state.pagination;return[{dataIndex:"gradeId",title:"\u57f7\u884c",width:50,render:function(e){return Object(D.jsxs)(Vt.b,{className:"list-table-option",children:[Object(D.jsx)(Ut.a,{title:"\u7de8\u8f2f",children:Object(D.jsx)(Dt.a,{className:"list-table-option-edit",size:"small",onClick:t.onEdit.bind(t,e),children:Object(D.jsx)(R,{})})}),Object(D.jsx)(Ut.a,{title:"\u522a\u9664",children:Object(D.jsx)(Dt.a,{className:"list-table-option-delete",size:"small",onClick:t.handleDelete.bind(t,e),children:Object(D.jsx)(V,{})})})]})}},{title:"\u5e8f",width:30,align:"center",render:function(t,a,n){return(e.current-1)*e.pageSize+n+1}},{title:"\u7b49\u7d1a\u4ee3\u865f",dataIndex:"gradeId"},{title:"\u7b49\u7d1a\u540d\u7a31",dataIndex:"name"}]},n.onEdit=function(t){n.history.push("/Parts/Level/".concat(t))},n.handleDelete=function(t){Rt.a.confirm({title:"\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u7b46\u8cc7\u6599\u55ce",icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){console.log("delete: "+t)}})},n.onPageChange=function(t,e){var a=n.state.pagination;a.current=t,a.pageSize=e,n.setState({loading:!0,list:[],pagination:a},(function(){return n.getList()}))},n.state={loading:!0,search:{keyword:""},list:[],pagination:{current:1,total:0,pageSize:10,position:["bottomLeft"]}},n.getList(),n}return Object(b.a)(a,[{key:"render",value:function(){var t=this;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:"list-header",children:Object(D.jsxs)(Jt.a,{type:"flex",justify:"space-between",children:[Object(D.jsx)(Ht.a,{children:Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(_,{}),onClick:function(){return t.history.push("/Parts/Level/Add")},className:"list-header-add",children:"\u65b0\u589e"})}),Object(D.jsx)(Ht.a,{children:Object(D.jsxs)(Vt.b,{children:[Object(D.jsx)(yt.a,{placeholder:"\u641c\u5c0b\u7b49\u7d1a\u4ee3\u865f",allowClear:!0,onChange:this.onInputChange,style:{width:140}}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(H,{}),onClick:this.handleSearch,className:"list-header-search",children:"\u67e5\u8a62"})]})})]})}),Object(D.jsx)(_t.a,{className:"list-table-wrapper",rowKey:"vendorId",size:"small",columns:this.getColumns(),loading:this.state.loading,dataSource:this.state.list,pagination:Gt(this.state.pagination,this.onPageChange)})]})}}]),a}(r.a.Component),Pe={gradeId:"",name:""},Le=[{key:"gradeId",required:!0,length:[2]},{key:"name",required:!0,length:[10]}],Fe=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).history=Object(vt.b)(),n.levelAPI=new we,n.getLevelData=function(){n.levelAPI.getLevelData(n.props.gradeId).then((function(t){0===t.code?n.setState({loading:!1,formData:t.data},(function(){return n.checkCanSubmit()})):(O.b.error(t.message),n.history.push("/Parts/Level"))})).catch((function(){O.b.error("Error!"),n.history.push("/Parts/Level")}))},n.getFormErrorStatus=function(t){var e=n.state.formStatus.find((function(e){return e.key===t}));return!!e&&e.error},n.onInputChange=function(t){var e=t.target.getAttribute("id"),a=t.target.value,r=n.state.formData;r[e]=a,n.checkData(r,e)},n.checkData=function(t,e){var a=n.state.formStatus,r=a.find((function(t){return t.key===e}));if(r){var c=t[e],i=!1;r.required&&!c&&(i=!0),r.length&&r.length.length>0&&c&&(1===r.length.length&&c.length>r.length[0]||r.length.length>1&&(c.length<r.length[0]||c.length>r.length[1]))&&(i=!0),r.regExp&&!r.regExp.test(c)&&(i=!0),r.error=i}n.setState({formData:t,formStatus:a},(function(){return n.checkCanSubmit()}))},n.checkCanSubmit=function(){n.setState({canSubmit:!n.state.formStatus.some((function(t){return t.error}))})},n.checkId=function(){var t=n.state.formData;""!==t.gradeId&&n.setState({validId:!1},(function(){n.levelAPI.getLevelData(t.gradeId).then((function(e){0===e.code?Rt.a.error({title:"\u6b64\u7de8\u865f\u5df2\u91cd\u8907\uff0c\u8acb\u91cd\u65b0\u8f38\u5165",icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){t.gradeId="",n.setState({formData:t})}}):n.setState({validId:!0})}))}))},n.handleCreate=function(t){n.setState({loading:!0},(function(){n.levelAPI.addLevelData(n.state.formData).then((function(e){0===e.code?(O.b.success("\u6210\u529f\u65b0\u589e\u8cc7\u6599"),t?n.history.push("/Basic/Level"):(document.getElementById("layout-content-wrapper").scrollTo({top:0,behavior:"smooth"}),n.setState({loading:!1,formData:Object(d.a)({},Pe),formStatus:JSON.parse(JSON.stringify(Le)),canSubmit:!1}))):Rt.a.error({title:e.message,icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(t){O.b.error(t.response.data.message),n.setState({loading:!1})}))}))},n.handleSubmit=function(t){n.setState({loading:!0},(function(){n.levelAPI.updateLevelData(n.props.gradeId,n.state.formData).then((function(e){0===e.code?(O.b.success("\u6210\u529f\u66f4\u65b0\u8cc7\u6599"),t?n.history.push("/Parts/Level"):(document.getElementById("layout-content-wrapper").scrollTo({top:0,behavior:"smooth"}),n.getLevelData())):Rt.a.error({title:e.message,icon:Object(D.jsx)(Kt.a,{}),content:e.data.map((function(t,e){return Object(D.jsxs)(D.Fragment,{children:[e>0&&Object(D.jsx)("br",{}),t.split(": ")[1]]})})),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(){O.b.error("\u8cc7\u6599\u66f4\u65b0\u5931\u6557"),n.setState({loading:!1})}))}))},n.handleCancel=function(){Rt.a.confirm({title:"\u8b8a\u66f4\u5c1a\u672a\u5132\u5b58\uff0c\u78ba\u5b9a\u8981\u96e2\u958b\u55ce",icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){n.history.push("/Parts/Level")}})},n.state={loading:!t.createFlag,formData:Object(d.a)({},Pe),formStatus:JSON.parse(JSON.stringify(Le)),validId:!1,canSubmit:!1},t.createFlag||n.getLevelData(),n}return Object(b.a)(a,[{key:"componentDidUpdate",value:function(t){var e=this;!t.createFlag&&this.props.createFlag?this.setState({loading:!1,formData:Object(d.a)({},Pe),formStatus:JSON.parse(JSON.stringify(Le)),validId:!1,canSubmit:!1}):this.props.createFlag||t.gradeId===this.props.gradeId||this.setState({loading:!0,formData:Object(d.a)({},Pe),formStatus:JSON.parse(JSON.stringify(Le)),validId:!0,canSubmit:!1},(function(){return e.getLevelData()}))}},{key:"render",value:function(){var t={xs:24,sm:24,md:24,lg:12};return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)($t.a,{style:{marginBottom:10},children:[Object(D.jsx)($t.a.Item,{children:Object(D.jsx)(s.b,{to:"/Parts/Level",children:"\u7b49\u7d1a"})}),Object(D.jsx)($t.a.Item,{children:this.props.createFlag?"\u65b0\u589e\u7b49\u7d1a":"\u4fee\u6539\u7b49\u7d1a\u8cc7\u6599"})]}),Object(D.jsxs)(Xt.a,{spinning:this.state.loading,children:[Object(D.jsx)(Zt.a,{className:"form-detail-card",children:Object(D.jsxs)(Jt.a,Object(d.a)(Object(d.a)({},{gutter:[24,24],type:"flex",align:"middle",style:{marginBottom:24,marginTop:24}}),{},{children:[Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},t),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u7b49\u7d1a\u4ee3\u865f",content:Object(D.jsx)(yt.a,{onBlur:this.checkId,onChange:this.onInputChange,value:this.state.formData.gradeId,id:"gradeId",disabled:!this.props.createFlag}),message:"\u7b49\u7d1a\u4ee3\u865f\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u57282\u5b57\u5167",error:this.getFormErrorStatus("gradeId")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},t),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u7b49\u7d1a\u540d\u7a31",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.name,id:"name"}),message:"\u7b49\u7d1a\u540d\u7a31\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572810\u5b57",error:this.getFormErrorStatus("name")})}))]}))}),Object(D.jsx)("div",{style:{margin:"20px",textAlign:"center"},children:Object(D.jsxs)(Vt.b,{children:[this.props.createFlag?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),disabled:!this.state.validId,onClick:this.handleCreate.bind(this,!0),children:"\u5132\u5b58"}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),disabled:!this.state.validId,onClick:this.handleCreate.bind(this,!1),children:"\u5132\u5b58\u4e26\u7e7c\u7e8c\u65b0\u589e"})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),onClick:this.handleSubmit.bind(this,!1),children:"\u5132\u5b58"}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),onClick:this.handleSubmit.bind(this,!0),children:"\u5132\u5b58\u4e26\u8fd4\u56de\u5217\u8868"})]}),Object(D.jsx)(Dt.a,{danger:!0,icon:Object(D.jsx)(ne.a,{}),onClick:this.handleCancel,children:"\u53d6\u6d88"})]})})]})]})}}]),a}(r.a.Component),Ee=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(){return Object(p.a)(this,a),e.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return Object(D.jsx)(Fe,{createFlag:this.props.createFlag,gradeId:this.props.match.params.gradeId})}}]),a}(r.a.Component),Te=function t(){Object(p.a)(this,t),this.getColourList=function(t){return Lt("get","/colors",t).then((function(t){return t.data}))},this.getColourData=function(t){return Lt("get","/colors/".concat(t)).then((function(t){return t.data}))},this.addColourData=function(t){return Lt("post","/colors/".concat(t.colorId),t).then((function(t){return t.data}))},this.updateColourData=function(t,e){return Lt("patch","/colors/".concat(t),e).then((function(t){return t.data}))}},Ae=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).history=Object(vt.b)(),n.colourAPI=new Te,n.getList=function(){var t=n.state,e=t.search,a=t.pagination,r={pageNum:a.current,pageSize:a.pageSize,colorId:"%".concat(e.keyword,"%")};n.colourAPI.getColourList(r).then((function(t){a.total=t.data.total,n.setState({loading:!1,list:t.data.list,pagination:a})})).catch((function(){return n.setState({loading:!1})}))},n.onInputChange=function(t){var e=n.state.search;e.keyword=t.target.value,n.setState({search:e})},n.handleSearch=function(){var t=n.state.pagination;t.current=1,n.setState({loading:!0,list:[],pagination:t},(function(){return n.getList()}))},n.getColumns=function(){var t=Object(Bt.a)(n),e=n.state.pagination;return[{dataIndex:"colorId",title:"\u57f7\u884c",width:50,render:function(e){return Object(D.jsxs)(Vt.b,{className:"list-table-option",children:[Object(D.jsx)(Ut.a,{title:"\u7de8\u8f2f",children:Object(D.jsx)(Dt.a,{className:"list-table-option-edit",size:"small",onClick:t.onEdit.bind(t,e),children:Object(D.jsx)(R,{})})}),Object(D.jsx)(Ut.a,{title:"\u522a\u9664",children:Object(D.jsx)(Dt.a,{className:"list-table-option-delete",size:"small",onClick:t.handleDelete.bind(t,e),children:Object(D.jsx)(V,{})})})]})}},{title:"\u5e8f",width:30,align:"center",render:function(t,a,n){return(e.current-1)*e.pageSize+n+1}},{title:"\u984f\u8272\u4ee3\u865f",dataIndex:"colorId"},{title:"\u984f\u8272\u540d\u7a31",dataIndex:"name"}]},n.onEdit=function(t){n.history.push("/Parts/Colour/".concat(t))},n.handleDelete=function(t){Rt.a.confirm({title:"\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u7b46\u8cc7\u6599\u55ce",icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){console.log("delete: "+t)}})},n.onPageChange=function(t,e){var a=n.state.pagination;a.current=t,a.pageSize=e,n.setState({loading:!0,list:[],pagination:a},(function(){return n.getList()}))},n.state={loading:!0,search:{keyword:""},list:[],pagination:{current:1,total:0,pageSize:10,position:["bottomLeft"]}},n.getList(),n}return Object(b.a)(a,[{key:"render",value:function(){var t=this;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:"list-header",children:Object(D.jsxs)(Jt.a,{type:"flex",justify:"space-between",children:[Object(D.jsx)(Ht.a,{children:Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(_,{}),onClick:function(){return t.history.push("/Parts/Colour/Add")},className:"list-header-add",children:"\u65b0\u589e"})}),Object(D.jsx)(Ht.a,{children:Object(D.jsxs)(Vt.b,{children:[Object(D.jsx)(yt.a,{placeholder:"\u641c\u5c0b\u984f\u8272\u4ee3\u865f",allowClear:!0,onChange:this.onInputChange,style:{width:140}}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(H,{}),onClick:this.handleSearch,className:"list-header-search",children:"\u67e5\u8a62"})]})})]})}),Object(D.jsx)(_t.a,{className:"list-table-wrapper",rowKey:"vendorId",size:"small",columns:this.getColumns(),loading:this.state.loading,dataSource:this.state.list,pagination:Gt(this.state.pagination,this.onPageChange)})]})}}]),a}(r.a.Component),qe={colorId:"",name:""},ze=[{key:"colorId",required:!0,length:[2]},{key:"name",required:!0,length:[10]}],Me=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).history=Object(vt.b)(),n.colourAPI=new Te,n.getColourData=function(){n.colourAPI.getColourData(n.props.colorId).then((function(t){0===t.code?n.setState({loading:!1,formData:t.data},(function(){return n.checkCanSubmit()})):(O.b.error(t.message),n.history.push("/Parts/Colour"))})).catch((function(){O.b.error("Error!"),n.history.push("/Parts/Colour")}))},n.getFormErrorStatus=function(t){var e=n.state.formStatus.find((function(e){return e.key===t}));return!!e&&e.error},n.onInputChange=function(t){var e=t.target.getAttribute("id"),a=t.target.value,r=n.state.formData;r[e]=a,n.checkData(r,e)},n.checkData=function(t,e){var a=n.state.formStatus,r=a.find((function(t){return t.key===e}));if(r){var c=t[e],i=!1;r.required&&!c&&(i=!0),r.length&&r.length.length>0&&c&&(1===r.length.length&&c.length>r.length[0]||r.length.length>1&&(c.length<r.length[0]||c.length>r.length[1]))&&(i=!0),r.regExp&&!r.regExp.test(c)&&(i=!0),r.error=i}n.setState({formData:t,formStatus:a},(function(){return n.checkCanSubmit()}))},n.checkCanSubmit=function(){n.setState({canSubmit:!n.state.formStatus.some((function(t){return t.error}))})},n.checkId=function(){var t=n.state.formData;""!==t.colorId&&n.setState({validId:!1},(function(){n.colourAPI.getColourData(t.colorId).then((function(e){0===e.code?Rt.a.error({title:"\u6b64\u7de8\u865f\u5df2\u91cd\u8907\uff0c\u8acb\u91cd\u65b0\u8f38\u5165",icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){t.colorId="",n.setState({formData:t})}}):n.setState({validId:!0})}))}))},n.handleCreate=function(t){n.setState({loading:!0},(function(){n.levelAPI.addLevelData(n.state.formData).then((function(e){0===e.code?(O.b.success("\u6210\u529f\u65b0\u589e\u8cc7\u6599"),t?n.history.push("/Basic/Level"):(document.getElementById("layout-content-wrapper").scrollTo({top:0,behavior:"smooth"}),n.setState({loading:!1,formData:Object(d.a)({},qe),formStatus:JSON.parse(JSON.stringify(ze)),canSubmit:!1}))):Rt.a.error({title:e.message,icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(t){O.b.error(t.response.data.message),n.setState({loading:!1})}))}))},n.handleSubmit=function(t){n.setState({loading:!0},(function(){n.colourAPI.updateColourData(n.props.colorId,n.state.formData).then((function(e){0===e.code?(O.b.success("\u6210\u529f\u66f4\u65b0\u8cc7\u6599"),t?n.history.push("/Parts/Colour"):(document.getElementById("layout-content-wrapper").scrollTo({top:0,behavior:"smooth"}),n.getColourData())):Rt.a.error({title:e.message,icon:Object(D.jsx)(Kt.a,{}),content:e.data.map((function(t,e){return Object(D.jsxs)(D.Fragment,{children:[e>0&&Object(D.jsx)("br",{}),t.split(": ")[1]]})})),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(){O.b.error("\u8cc7\u6599\u66f4\u65b0\u5931\u6557"),n.setState({loading:!1})}))}))},n.handleCancel=function(){Rt.a.confirm({title:"\u8b8a\u66f4\u5c1a\u672a\u5132\u5b58\uff0c\u78ba\u5b9a\u8981\u96e2\u958b\u55ce",icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){n.history.push("/Parts/Colour")}})},n.state={loading:!t.createFlag,formData:Object(d.a)({},qe),formStatus:JSON.parse(JSON.stringify(ze)),validId:!1,canSubmit:!1},t.createFlag||n.getColourData(),n}return Object(b.a)(a,[{key:"componentDidUpdate",value:function(t){var e=this;!t.createFlag&&this.props.createFlag?this.setState({loading:!1,formData:Object(d.a)({},qe),formStatus:JSON.parse(JSON.stringify(ze)),validId:!1,canSubmit:!1}):this.props.createFlag||t.colorId===this.props.colorId||this.setState({loading:!0,formData:Object(d.a)({},qe),formStatus:JSON.parse(JSON.stringify(ze)),validId:!0,canSubmit:!1},(function(){return e.getColourData()}))}},{key:"render",value:function(){var t={xs:24,sm:24,md:24,lg:12};return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)($t.a,{style:{marginBottom:10},children:[Object(D.jsx)($t.a.Item,{children:Object(D.jsx)(s.b,{to:"/Parts/Colour",children:"\u984f\u8272"})}),Object(D.jsx)($t.a.Item,{children:this.props.createFlag?"\u65b0\u589e\u984f\u8272":"\u4fee\u6539\u984f\u8272\u8cc7\u6599"})]}),Object(D.jsxs)(Xt.a,{spinning:this.state.loading,children:[Object(D.jsx)(Zt.a,{className:"form-detail-card",children:Object(D.jsxs)(Jt.a,Object(d.a)(Object(d.a)({},{gutter:[24,24],type:"flex",align:"middle",style:{marginBottom:24,marginTop:24}}),{},{children:[Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},t),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u984f\u8272\u4ee3\u865f",content:Object(D.jsx)(yt.a,{onBlur:this.checkId,onChange:this.onInputChange,value:this.state.formData.colorId,id:"colorId",disabled:!this.props.createFlag}),message:"\u984f\u8272\u4ee3\u865f\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u57282\u5b57\u5167",error:this.getFormErrorStatus("colorId")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},t),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u984f\u8272\u540d\u7a31",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.name,id:"name"}),message:"\u984f\u8272\u540d\u7a31\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572810\u5b57",error:this.getFormErrorStatus("name")})}))]}))}),Object(D.jsx)("div",{style:{margin:"20px",textAlign:"center"},children:Object(D.jsxs)(Vt.b,{children:[this.props.createFlag?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),disabled:!this.state.validId,onClick:this.handleCreate.bind(this,!0),children:"\u5132\u5b58"}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),disabled:!this.state.validId,onClick:this.handleCreate.bind(this,!1),children:"\u5132\u5b58\u4e26\u7e7c\u7e8c\u65b0\u589e"})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),onClick:this.handleSubmit.bind(this,!1),children:"\u5132\u5b58"}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),onClick:this.handleSubmit.bind(this,!0),children:"\u5132\u5b58\u4e26\u8fd4\u56de\u5217\u8868"})]}),Object(D.jsx)(Dt.a,{danger:!0,icon:Object(D.jsx)(ne.a,{}),onClick:this.handleCancel,children:"\u53d6\u6d88"})]})})]})]})}}]),a}(r.a.Component),Be=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(){return Object(p.a)(this,a),e.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return Object(D.jsx)(Me,{createFlag:this.props.createFlag,colorId:this.props.match.params.colorId})}}]),a}(r.a.Component),Ve=function t(){Object(p.a)(this,t),this.getComponentList=function(t){return Lt("get","/parts",t).then((function(t){return t.data}))},this.getComponentData=function(t){return Lt("get","/parts/".concat(t)).then((function(t){return t.data}))},this.addComponentData=function(t){return Lt("post","/parts/".concat(t.partId),t).then((function(t){return t.data}))},this.updateComponentData=function(t,e){return Lt("patch","/parts/".concat(t),e).then((function(t){return t.data}))}},Ue=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).history=Object(vt.b)(),n.componentAPI=new Ve,n.getList=function(){var t=n.state,e=t.search,a=t.pagination,r={pageNum:a.current,pageSize:a.pageSize,partId:"%".concat(e.partId,"%"),name:"%".concat(e.name,"%")};n.componentAPI.getComponentList(r).then((function(t){a.total=t.data.total,n.setState({loading:!1,list:t.data.list,pagination:a})})).catch((function(){return n.setState({loading:!1})}))},n.onInputChange=function(t,e){var a=n.state.search;a[t]=e.target.value,n.setState({search:a})},n.handleSearch=function(){var t=n.state.pagination;t.current=1,n.setState({loading:!0,list:[],pagination:t},(function(){return n.getList()}))},n.getColumns=function(){var t=Object(Bt.a)(n),e=n.state.pagination;return[{dataIndex:"partId",title:"\u57f7\u884c",width:50,render:function(e){return Object(D.jsxs)(Vt.b,{className:"list-table-option",children:[Object(D.jsx)(Ut.a,{title:"\u7de8\u8f2f",children:Object(D.jsx)(Dt.a,{className:"list-table-option-edit",size:"small",onClick:t.onEdit.bind(t,e),children:Object(D.jsx)(R,{})})}),Object(D.jsx)(Ut.a,{title:"\u522a\u9664",children:Object(D.jsx)(Dt.a,{className:"list-table-option-delete",size:"small",onClick:t.handleDelete.bind(t,e),children:Object(D.jsx)(V,{})})})]})}},{title:"\u5e8f",width:30,align:"center",render:function(t,a,n){return(e.current-1)*e.pageSize+n+1}},{title:"\u96f6\u4ef6\u4ee3\u865f",dataIndex:"partId"},{title:"\u96f6\u4ef6\u540d\u7a31",dataIndex:"name"}]},n.onEdit=function(t){n.history.push("/Parts/Component/".concat(t))},n.handleDelete=function(t){Rt.a.confirm({title:"\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u7b46\u8cc7\u6599\u55ce",icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){console.log("delete: "+t)}})},n.onPageChange=function(t,e){var a=n.state.pagination;a.current=t,a.pageSize=e,n.setState({loading:!0,list:[],pagination:a},(function(){return n.getList()}))},n.state={loading:!0,search:{partId:"",name:""},list:[],pagination:{current:1,total:0,pageSize:10,position:["bottomLeft"]}},n.getList(),n}return Object(b.a)(a,[{key:"render",value:function(){var t=this;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:"list-header",children:Object(D.jsxs)(Jt.a,{type:"flex",justify:"space-between",children:[Object(D.jsx)(Ht.a,{children:Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(_,{}),onClick:function(){return t.history.push("/Parts/Component/Add")},className:"list-header-add",children:"\u65b0\u589e"})}),Object(D.jsx)(Ht.a,{children:Object(D.jsxs)(Vt.b,{children:[Object(D.jsx)(yt.a,{placeholder:"\u641c\u5c0b\u96f6\u4ef6\u4ee3\u865f",allowClear:!0,onChange:this.onInputChange.bind(this,"partId"),style:{width:140}}),Object(D.jsx)(yt.a,{placeholder:"\u641c\u5c0b\u96f6\u4ef6\u540d\u7a31",allowClear:!0,onChange:this.onInputChange.bind(this,"name")}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(H,{}),onClick:this.handleSearch,className:"list-header-search",children:"\u67e5\u8a62"})]})})]})}),Object(D.jsx)(_t.a,{className:"list-table-wrapper",rowKey:"vendorId",size:"small",columns:this.getColumns(),loading:this.state.loading,dataSource:this.state.list,pagination:Gt(this.state.pagination,this.onPageChange)})]})}}]),a}(r.a.Component),Re={partId:"",name:""},Je=[{key:"partId",required:!0,length:[4]},{key:"name",required:!0,length:[10]}],He=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).history=Object(vt.b)(),n.componentAPI=new Ve,n.getComponentData=function(){n.componentAPI.getComponentData(n.props.partId).then((function(t){0===t.code?n.setState({loading:!1,formData:t.data},(function(){return n.checkCanSubmit()})):(O.b.error(t.message),n.history.push("/Parts/Component"))})).catch((function(){O.b.error("Error!"),n.history.push("/Parts/Component")}))},n.getFormErrorStatus=function(t){var e=n.state.formStatus.find((function(e){return e.key===t}));return!!e&&e.error},n.onInputChange=function(t){var e=t.target.getAttribute("id"),a=t.target.value,r=n.state.formData;r[e]=a,n.checkData(r,e)},n.checkData=function(t,e){var a=n.state.formStatus,r=a.find((function(t){return t.key===e}));if(r){var c=t[e],i=!1;r.required&&!c&&(i=!0),r.length&&r.length.length>0&&c&&(1===r.length.length&&c.length>r.length[0]||r.length.length>1&&(c.length<r.length[0]||c.length>r.length[1]))&&(i=!0),r.regExp&&!r.regExp.test(c)&&(i=!0),r.error=i}n.setState({formData:t,formStatus:a},(function(){return n.checkCanSubmit()}))},n.checkCanSubmit=function(){n.setState({canSubmit:!n.state.formStatus.some((function(t){return t.error}))})},n.checkId=function(){var t=n.state.formData;""!==t.partId&&n.setState({validId:!1},(function(){n.componentAPI.getComponentData(t.partId).then((function(e){0===e.code?Rt.a.error({title:"\u6b64\u7de8\u865f\u5df2\u91cd\u8907\uff0c\u8acb\u91cd\u65b0\u8f38\u5165",icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){t.partId="",n.setState({formData:t})}}):n.setState({validId:!0})}))}))},n.handleCreate=function(t){n.setState({loading:!0},(function(){n.componentAPI.addComponentData(n.state.formData).then((function(e){0===e.code?(O.b.success("\u6210\u529f\u65b0\u589e\u8cc7\u6599"),t?n.history.push("/Basic/Level"):(document.getElementById("layout-content-wrapper").scrollTo({top:0,behavior:"smooth"}),n.setState({loading:!1,formData:Object(d.a)({},Re),formStatus:JSON.parse(JSON.stringify(Je)),canSubmit:!1}))):Rt.a.error({title:e.message,icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(t){O.b.error(t.response.data.message),n.setState({loading:!1})}))}))},n.handleSubmit=function(t){n.setState({loading:!0},(function(){n.componentAPI.updateComponentData(n.props.partId,n.state.formData).then((function(e){0===e.code?(O.b.success("\u6210\u529f\u66f4\u65b0\u8cc7\u6599"),t?n.history.push("/Parts/Component"):(document.getElementById("layout-content-wrapper").scrollTo({top:0,behavior:"smooth"}),n.getComponentData())):Rt.a.error({title:e.message,icon:Object(D.jsx)(Kt.a,{}),content:e.data.map((function(t,e){return Object(D.jsxs)(D.Fragment,{children:[e>0&&Object(D.jsx)("br",{}),t.split(": ")[1]]})})),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(){O.b.error("\u8cc7\u6599\u66f4\u65b0\u5931\u6557"),n.setState({loading:!1})}))}))},n.handleCancel=function(){Rt.a.confirm({title:"\u8b8a\u66f4\u5c1a\u672a\u5132\u5b58\uff0c\u78ba\u5b9a\u8981\u96e2\u958b\u55ce",icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){n.history.push("/Parts/Component")}})},n.state={loading:!t.createFlag,formData:Object(d.a)({},Re),formStatus:JSON.parse(JSON.stringify(Je)),validId:!1,canSubmit:!1},t.createFlag||n.getComponentData(),n}return Object(b.a)(a,[{key:"componentDidUpdate",value:function(t){var e=this;!t.createFlag&&this.props.createFlag?this.setState({loading:!1,formData:Object(d.a)({},Re),formStatus:JSON.parse(JSON.stringify(Je)),validId:!1,canSubmit:!1}):this.props.createFlag||t.partId===this.props.partId||this.setState({loading:!0,formData:Object(d.a)({},Re),formStatus:JSON.parse(JSON.stringify(Je)),validId:!0,canSubmit:!1},(function(){return e.getComponentData()}))}},{key:"render",value:function(){var t={xs:24,sm:24,md:24,lg:12};return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)($t.a,{style:{marginBottom:10},children:[Object(D.jsx)($t.a.Item,{children:Object(D.jsx)(s.b,{to:"/Parts/Component",children:"\u96f6\u4ef6"})}),Object(D.jsx)($t.a.Item,{children:this.props.createFlag?"\u65b0\u589e\u96f6\u4ef6":"\u4fee\u6539\u96f6\u4ef6\u8cc7\u6599"})]}),Object(D.jsxs)(Xt.a,{spinning:this.state.loading,children:[Object(D.jsx)(Zt.a,{className:"form-detail-card",children:Object(D.jsxs)(Jt.a,Object(d.a)(Object(d.a)({},{gutter:[24,24],type:"flex",align:"middle",style:{marginBottom:24,marginTop:24}}),{},{children:[Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},t),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u96f6\u4ef6\u4ee3\u865f",content:Object(D.jsx)(yt.a,{onBlur:this.checkId,onChange:this.onInputChange,value:this.state.formData.partId,id:"partId",disabled:!this.props.createFlag}),message:"\u96f6\u4ef6\u4ee3\u865f\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u57284\u5b57\u5167",error:this.getFormErrorStatus("partId")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},t),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u96f6\u4ef6\u540d\u7a31",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.name,id:"name"}),message:"\u96f6\u4ef6\u540d\u7a31\u70ba\u5fc5\u586b,\u9577\u5ea6\u9700\u572810\u5b57",error:this.getFormErrorStatus("name")})}))]}))}),Object(D.jsx)("div",{style:{margin:"20px",textAlign:"center"},children:Object(D.jsxs)(Vt.b,{children:[this.props.createFlag?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),disabled:!this.state.validId,onClick:this.handleCreate.bind(this,!0),children:"\u5132\u5b58"}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),disabled:!this.state.validId,onClick:this.handleCreate.bind(this,!1),children:"\u5132\u5b58\u4e26\u7e7c\u7e8c\u65b0\u589e"})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),onClick:this.handleSubmit.bind(this,!1),children:"\u5132\u5b58"}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),onClick:this.handleSubmit.bind(this,!0),children:"\u5132\u5b58\u4e26\u8fd4\u56de\u5217\u8868"})]}),Object(D.jsx)(Dt.a,{danger:!0,icon:Object(D.jsx)(ne.a,{}),onClick:this.handleCancel,children:"\u53d6\u6d88"})]})})]})]})}}]),a}(r.a.Component),Ye=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(){return Object(p.a)(this,a),e.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){return Object(D.jsx)(He,{createFlag:this.props.createFlag,partId:this.props.match.params.partId})}}]),a}(r.a.Component),_e=a(329),Ke=function(t){return Object(D.jsx)(_e.a,Object(d.a)(Object(d.a)({},t),{},{className:"layout-content-drawer-wrapper",children:t.children}))},Ge=a(326),Qe=a(76),We=function(t){return t.picList.length>0?Object(D.jsx)(Ge.a,{adaptiveHeight:!0,arrows:!0,dots:!1,prevArrow:Object(D.jsx)(P,{}),nextArrow:Object(D.jsx)(w,{}),children:t.picList.map((function(t,e){return Object(D.jsx)("div",{children:Object(D.jsx)("div",{className:"product-real-pic-carousel-item",children:Object(D.jsx)("img",{src:t,alt:"\u5546\u54c1\u7167\u7247"})})},e)}))}):Object(D.jsx)(Qe.a,{})},$e=a(322),Xe=function t(){Object(p.a)(this,t),this.setRoles=function(e){return t.roles=e},this.setUnitList=function(e){return t.unitList=e}};Xe.roles=[];var Ze={seqNo:0,productId:"",productType:"REAL",partId:null,customCode1:"",customCode2:"",customCode3:"",kindShortName:"",name:"",mappingProductId:"",mappingProductSeqNo:null,unit:(Xe.unitList=[]).length>0?Xe.unitList[0].unit:"",price1:0,price2:0,price3:0,norm:"",vendorProductId:"",safetyStock:0,inventory:0,storingPlace:"",note:""},ta={width:null,height:null,weight:null,length:null,pic1GoogleBlobId:"",pic1Url:"",pic2GoogleBlobId:"",pic2Url:"",pic3GoogleBlobId:"",pic3Url:"",pic4GoogleBlobId:"",pic4Url:"",productSeqNo:null},ea=[],aa=function t(){Object(p.a)(this,t),this.getProductList=function(t){return Lt("get","/products",t).then((function(t){return t.data}))},this.getProductType=function(){return Lt("get","/common/productTypes").then((function(t){return t.data}))},this.getProductData=function(t){return Lt("get","/products/".concat(t)).then((function(t){return t.data}))},this.addProductData=function(t){return Lt("post","/products/0",t).then((function(t){return t.data}))},this.updateProductData=function(t){return Lt("patch","/products/".concat(t.seqNo),t).then((function(t){return t.data}))},this.getProductAdditionData=function(t){return Lt("get","/products/additional/".concat(t)).then((function(t){return t.data}))},this.uploadProductPic=function(t,e,a){return function(t,e,a){var n={url:Nt+e,method:t,timeout:6e4,headers:{"content-type":"multipart/form-data",Authorization:"Basic "+Pt()},data:a};return new Promise((function(t,e){wt()(n).then((function(e){return t(e)})).catch((function(t){e(t),console.log(t.response)}))}))}("patch","/products/additional/".concat(t,"/").concat(e),a).then((function(t){return t.data}))},this.searchProductMapping=function(t,e){return Lt("get","/products/smartQuery",{realProduct:t,queryString:e}).then((function(t){return t.data}))},this.getPartsList=function(){return Lt("get","/parts",{pageNum:1,pageSize:9999,partId:"",name:""}).then((function(t){return t.data}))},this.getKindsList=function(){return Lt("get","/kinds",{pageNum:1,pageSize:9999,kindIdLike:""}).then((function(t){return t.data}))},this.getGradesList=function(){return Lt("get","/grades",{pageNum:1,pageSize:9999,gradeId:""}).then((function(t){return t.data}))},this.getColorsList=function(){return Lt("get","/colors",{pageNum:1,pageSize:9999,colorId:""}).then((function(t){return t.data}))}},na=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).history=Object(vt.b)(),n.productAPI=new aa,n.productSearchTime=0,n.getInitData=function(){var t=Object(j.a)(h.a.mark((function t(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){n.productAPI.getProductType().then((function(e){n.setState({productType:e.data},(function(){return t(!0)}))}))}));case 2:if(!e){t.next=11;break}return t.next=5,new Promise((function(t){n.productAPI.getPartsList().then((function(e){n.setState({partsList:e.data.list},(function(){return t(!0)}))}))}));case 5:return t.next=7,new Promise((function(t){n.productAPI.getKindsList().then((function(e){n.setState({kindsList:e.data.list},(function(){return t(!0)}))}))}));case 7:return t.next=9,new Promise((function(t){n.productAPI.getGradesList().then((function(e){n.setState({gradesList:e.data.list},(function(){return t(!0)}))}))}));case 9:return t.next=11,new Promise((function(t){n.productAPI.getColorsList().then((function(e){n.setState({colorsList:e.data.list},(function(){return t(!0)}))}))}));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.getProductData=Object(j.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,e){n.productAPI.getProductData(n.props.seqNo).then((function(a){0===a.code?n.setState({formData:a.data},(function(){return n.checkCanSubmit().then((function(){return t(!0)}))})):(e(!1),O.b.error(a.message),n.props.isDrawMode?n.props.onClose():n.history.push("/Products/List"))})).catch((function(){e(!1),O.b.error("Error!"),n.props.isDrawMode?n.props.onClose():n.history.push("/Products/List")}))}));case 2:if("REAL"!==n.state.formData.productType){t.next=5;break}return t.next=5,new Promise((function(t){n.productAPI.getProductAdditionData(n.props.seqNo).then((function(e){0===e.code?n.setState({additionData:e.data},(function(){return t(!0)})):t(!0)})).catch((function(){return t(!0)}))}));case 5:if("VIRTUAL"!==n.state.formData.productType||0===n.state.formData.mappingProductSeqNo){t.next=8;break}return t.next=8,new Promise((function(t){n.productAPI.searchProductMapping(!0,n.state.formData.mappingProductId).then((function(e){0===e.code?n.setState({productList:e.data,productSelect:e.data[0]},(function(){return t(!0)})):t(!0)})).catch((function(){return t(!0)}))}));case 8:case"end":return t.stop()}}),t)}))),n.getFormErrorStatus=function(t){var e=n.state.formStatus.find((function(e){return e.key===t}));return!!e&&e.error},n.onInputChange=function(t){var e=t.target.getAttribute("id"),a=t.target.value,r=n.state.formData;r[e]=a,n.checkData(r,e)},n.onSelectChange=function(t,e){var a=n.state.formData;a[t]=e,n.checkData(a,t)},n.onNumberChange=function(t,e){var a=n.state.formData;a[t]=e,n.checkData(a,t)},n.getMappingProductDisplay=function(t){var e=t.desc1;if(t.desc2||t.desc3||t.desc4||t.desc5){var a="";a+=t.desc2?t.desc2:"",a+=t.desc3?""!==a?", ".concat(t.desc3):t.desc3:"",a+=t.desc4?""!==a?", ".concat(t.desc4):t.desc4:"",a+=t.desc5?""!==a?", ".concat(t.desc5):t.desc5:"",e+=" [".concat(a,"]")}return e},n.onMappingSearch=function(t){var e=n.state,a=e.search,r=e.formData;a.productId=t,n.productSearchTime=y()().valueOf(),n.setState({search:a},(function(){setTimeout((function(){y()().valueOf()-n.productSearchTime>=1e3&&""!==t?n.setState({productSearchLoading:!0},(function(){n.productAPI.searchProductMapping(!0,t).then((function(t){n.setState({productList:t.data,productSearchLoading:!1})})).catch((function(){n.setState({productList:[],productSearchLoading:!1})}))})):""===t&&(""!==r.mappingProductId?n.setState({productList:[n.state.productSelect]}):n.setState({productList:[]}))}),1e3)}))},n.onMappingSelect=function(t){var e=n.state,a=e.search,r=e.formData,c=e.productList.find((function(e){return e.data===t}));c&&(c.finished?(a.productId="",r.mappingProductId=c.data,r.mappingProductSeqNo=c.productSeqNo,n.setState({search:a,productList:[c],productSelect:c},(function(){return n.checkData(r,"mappingProductSeqNo")}))):(a.productId=t,r.mappingProductId=c.data,r.mappingProductSeqNo=null,n.setState({search:a,productList:[c],productSelect:c},(function(){n.checkData(r,"mappingProductSeqNo")}))))},n.onCodeSearch=function(t,e){if(!e.includes(" ")){var a=n.state,r=a.formData,c=a.search;if("partId"!==t){r[t]=e.toUpperCase();var i="";i+=r.partId?r.partId:"",i+=r.customCode1?""!==i?"-".concat(r.customCode1):r.customCode1:"",i+=r.customCode2?""!==i?"-".concat(r.customCode2):r.customCode2:"",i+=r.customCode3?""!==i?"-".concat(r.customCode3):r.customCode3:"",r.productId=i}c[t]=e.toUpperCase(),n.setState({search:c},(function(){return n.checkData(r,t)}))}},n.onCodeSelect=function(t,e){var a=n.state,r=a.formData,c=a.search,i=a.kindsList;if("partId"===t?c.partId="":c[t]=e,r[t]=e,"customCode1"===t){var s=i.find((function(t){return t.kindId.toLowerCase()===e.toLowerCase()}));s&&(r.kindShortName=s.shortName)}var o="";o+=r.partId?r.partId:"",o+=r.customCode1?""!==o?"-".concat(r.customCode1):r.customCode1:"",o+=r.customCode2?""!==o?"-".concat(r.customCode2):r.customCode2:"",o+=r.customCode3?""!==o?"-".concat(r.customCode3):r.customCode3:"",r.productId=o,n.setState({search:c},(function(){return n.checkData(r,t)}))},n.onCodeClear=function(t){var e=n.state,a=e.formData,r=e.search;a[t]="",r[t]="","customCode1"===t&&(a.kindShortName="");var c="";c+=a.partId?a.partId:"",c+=a.customCode1?""!==c?"-".concat(a.customCode1):a.customCode1:"",c+=a.customCode2?""!==c?"-".concat(a.customCode2):a.customCode2:"",c+=a.customCode3?""!==c?"-".concat(a.customCode3):a.customCode3:"",a.productId=c,n.setState({search:r},(function(){return n.checkData(a,t)}))},n.getPartOptions=function(){var t=n.state,e=t.formData,a=t.search;return t.partsList.filter((function(t){return e.partId===t.partId||a.partId&&t.partId.toLowerCase().includes(a.partId.toLowerCase())})).map((function(t){return{label:"".concat(t.partId," - ").concat(t.name),value:t.partId}}))},n.getKindOptions=function(){var t=n.state,e=t.formData,a=t.search,r=t.kindsList.filter((function(t){return e.customCode1===t.kindId||a.customCode1&&t.kindId.toLowerCase().includes(a.customCode1.toLowerCase())}));return a.customCode1&&!r.find((function(t){return t.kindId===a.customCode1}))&&r.unshift({kindId:a.customCode1,name:""}),r.map((function(t){return{label:""!==t.name?"".concat(t.kindId," - ").concat(t.name):t.kindId,value:t.kindId}}))},n.getGradeOptions=function(){var t=n.state,e=t.formData,a=t.search,r=t.gradesList.filter((function(t){return e.customCode2===t.gradeId||a.customCode2&&t.gradeId.toLowerCase().includes(a.customCode2.toLowerCase())}));return a.customCode2&&!r.find((function(t){return t.gradeId===a.customCode2}))&&r.unshift({gradeId:a.customCode2,name:""}),r.map((function(t){return{label:""!==t.name?"".concat(t.gradeId," - ").concat(t.name):t.gradeId,value:t.gradeId}}))},n.getColorOptions=function(){var t=n.state,e=t.formData,a=t.search,r=t.colorsList.filter((function(t){return e.customCode3===t.colorId||a.customCode3&&t.colorId.toLowerCase().includes(a.customCode3.toLowerCase())}));return a.customCode3&&!r.find((function(t){return t.colorId===a.customCode3}))&&r.unshift({colorId:a.customCode3,name:""}),r.map((function(t){return{label:""!==t.name?"".concat(t.colorId," - ").concat(t.name):t.colorId,value:t.colorId}}))},n.checkData=function(t,e){var a=n.state.formStatus,r=a.find((function(t){return t.key===e}));if(r){var c=t[e],i=!1;r.required&&!c&&(i=!0),r.length&&r.length.length>0&&c&&(1===r.length.length&&c.length>r.length[0]||r.length.length>1&&(c.length<r.length[0]||c.length>r.length[1]))&&(i=!0),r.regExp&&!r.regExp.test(c)&&(i=!0),r.error=i}n.setState({formData:t,formStatus:a},(function(){return n.checkCanSubmit()}))},n.checkCanSubmit=function(){return new Promise((function(t){n.setState({canSubmit:!n.state.formStatus.some((function(t){return t.error}))},(function(){return t(!0)}))}))},n.openPic=function(t){var e=n.state.additionData[t];n.setState({picOpen:!0,picUrl:e})},n.onPicUpload=function(t,e){return n.setState({loading:!0},(function(){var a=new FormData;a.append("file",e),n.productAPI.uploadProductPic(n.props.seqNo,t,a).then((function(t){0===t.code?(O.b.success("\u7167\u7247\u4e0a\u50b3\u6210\u529f"),n.productAPI.getProductAdditionData(n.props.seqNo).then((function(t){0===t.code?n.setState({loading:!1,additionData:t.data}):n.setState({loading:!1})}))):O.b.error("\u7167\u7247\u4e0a\u50b3\u5931\u6557")}))})),!1},n.handleCreate=function(t){n.setState({loading:!0},(function(){n.productAPI.addProductData(n.state.formData).then((function(e){if(0===e.code)if(O.b.success("\u6210\u529f\u65b0\u589e\u8cc7\u6599"),t)n.props.isDrawMode?n.props.onClose():n.history.push("/Products/List");else{var a=document.querySelector(".ant-drawer-body"),r=document.getElementById("layout-content-wrapper");a&&a.scrollTo({top:0,behavior:"smooth"}),r&&r.scrollTo({top:0,behavior:"smooth"}),n.setState({loading:!1,formData:Object(d.a)({},Ze),formStatus:JSON.parse(JSON.stringify(ea)),search:{partId:"",customCode1:"",customCode2:"",customCode3:""},canSubmit:!1})}else Rt.a.error({title:e.message,icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(t){O.b.error(t.response.data.message),n.setState({loading:!1})}))}))},n.handleSubmit=function(t){n.setState({loading:!0},(function(){n.productAPI.updateProductData(n.state.formData).then((function(e){if(0===e.code)if(O.b.success("\u6210\u529f\u66f4\u65b0\u8cc7\u6599"),t)n.props.isDrawMode?n.props.onClose():n.history.push("/Products/List");else{var a=document.querySelector(".ant-drawer-body"),r=document.getElementById("layout-content-wrapper");a&&a.scrollTo({top:0,behavior:"smooth"}),r&&r.scrollTo({top:0,behavior:"smooth"}),n.getProductData()}else Rt.a.error({title:e.message,icon:Object(D.jsx)(Kt.a,{}),content:e.data.map((function(t,e){return Object(D.jsxs)(D.Fragment,{children:[e>0&&Object(D.jsx)("br",{}),t.split(": ")[1]]})})),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(){O.b.error("\u8cc7\u6599\u66f4\u65b0\u5931\u6557"),n.setState({loading:!1})}))}))},n.handleCancel=function(){n.props.isDrawMode?n.props.onClose():n.history.push("/Products/List")},n.state={inited:!1,loading:!0,productType:[],formData:Object(d.a)({},Ze),additionData:Object(d.a)({},ta),picOpen:!1,picUrl:"",formStatus:JSON.parse(JSON.stringify(ea)),search:{partId:"",customCode1:"",customCode2:"",customCode3:"",productId:""},partsList:[],kindsList:[],gradesList:[],colorsList:[],productList:[],productSelect:{},productSearchLoading:!1,canSubmit:!1},t.createFlag?n.getInitData(!0).then((function(){return n.setState({inited:!0,loading:!1})})):n.getInitData(!1).then((function(){return n.getProductData().then((function(){return n.setState({inited:!0,loading:!1})}))})),n}return Object(b.a)(a,[{key:"componentDidUpdate",value:function(t){var e=this;(!t.createFlag&&this.props.createFlag||!t.drawModeVisible&&this.props.drawModeVisible||!this.props.createFlag&&t.seqNo!==this.props.seqNo)&&this.setState({inited:!1,loading:!0,formData:Object(d.a)({},Ze),additionData:Object(d.a)({},ta),picOpen:!1,picUrl:"",formStatus:JSON.parse(JSON.stringify(ea)),search:{partId:"",customCode1:"",customCode2:"",customCode3:"",productId:""},productList:[],productSelect:{},productSearchLoading:!1,canSubmit:!1},(function(){e.props.createFlag?e.getInitData(!0).then((function(){return e.setState({inited:!0,loading:!1})})):e.getInitData(!1).then((function(){return e.getProductData().then((function(){return e.setState({inited:!0,loading:!1})}))}))}))}},{key:"render",value:function(){var t=this,e=this.props.isDrawMode?{gutter:[12,12],type:"flex",align:"middle",style:{marginBottom:12,marginTop:12}}:{gutter:[24,24],type:"flex",align:"middle",style:{marginBottom:24,marginTop:24}},a=this.props.isDrawMode?{span:24}:{xs:24,sm:24,md:24,lg:8},n=this.props.isDrawMode?{span:24}:{xs:24,sm:24,md:24,lg:12},r={span:24},c={xs:24,sm:24,md:12,lg:12},i=this.props.isDrawMode?{span:12}:{xs:12,sm:12,md:6,lg:6};return Object(D.jsxs)(D.Fragment,{children:[!this.props.isDrawMode&&Object(D.jsxs)($t.a,{style:{marginBottom:10},children:[Object(D.jsx)($t.a.Item,{children:Object(D.jsx)(s.b,{to:"/Products/List",children:"\u5546\u54c1"})}),Object(D.jsx)($t.a.Item,{children:this.props.createFlag?"\u65b0\u589e\u5546\u54c1":"\u4fee\u6539\u5546\u54c1\u8cc7\u6599"})]}),Object(D.jsx)(Xt.a,{spinning:this.state.loading,className:"product-spinning",children:this.state.inited&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Zt.a,{className:"form-detail-card",children:Object(D.jsxs)(Jt.a,Object(d.a)(Object(d.a)({},e),{},{children:[Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},r),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u5546\u54c1\u7de8\u865f",content:Object(D.jsx)(yt.a,{value:this.state.formData.productId,disabled:!0})})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},r),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u5546\u54c1\u7a2e\u985e",content:Object(D.jsx)(Yt.a,{value:this.state.formData.productType,onChange:this.onSelectChange.bind(this,"productType"),style:{width:"100%"},children:this.state.productType.map((function(t){return Object(D.jsx)(Yt.a.Option,{value:t.productType,children:t.desc},t.productType)}))})})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},r),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u4ee3\u78bc",align:"flex-start",content:Object(D.jsxs)(Jt.a,{gutter:[12],className:"product-code-row",children:[Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},c),{},{children:Object(D.jsx)(Yt.a,{placeholder:"\u96f6\u4ef6\u7de8\u865f",value:this.state.formData.partId,searchValue:this.state.search.partId,showSearch:!0,showArrow:!1,options:this.getPartOptions(),onSearch:this.onCodeSearch.bind(this,"partId"),onSelect:this.onCodeSelect.bind(this,"partId"),style:{width:"100%"},notFoundContent:null,disabled:!this.props.createFlag,className:"product-search"})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},c),{},{children:Object(D.jsx)(Yt.a,{placeholder:"\u8eca\u7a2e\u6216\u81ea\u8a02\u4ee3\u78bc1",value:""===this.state.formData.customCode1?null:this.state.formData.customCode1,showSearch:!0,showArrow:!1,allowClear:!0,options:this.getKindOptions(),onSearch:this.onCodeSearch.bind(this,"customCode1"),onSelect:this.onCodeSelect.bind(this,"customCode1"),onClear:this.onCodeClear.bind(this,"customCode1"),style:{width:"100%"},notFoundContent:null,disabled:!this.props.createFlag,className:"product-search"})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},c),{},{children:Object(D.jsx)(Yt.a,{placeholder:"\u7b49\u7d1a\u6216\u81ea\u8a02\u4ee3\u78bc2",value:""===this.state.formData.customCode2?null:this.state.formData.customCode2,showSearch:!0,showArrow:!1,allowClear:!0,options:this.getGradeOptions(),onSearch:this.onCodeSearch.bind(this,"customCode2"),onSelect:this.onCodeSelect.bind(this,"customCode2"),onClear:this.onCodeClear.bind(this,"customCode2"),style:{width:"100%"},notFoundContent:null,disabled:!this.props.createFlag,className:"product-search"})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},c),{},{children:Object(D.jsx)(Yt.a,{placeholder:"\u984f\u8272\u6216\u81ea\u8a02\u4ee3\u78bc3",value:""===this.state.formData.customCode3?null:this.state.formData.customCode3,showSearch:!0,showArrow:!1,allowClear:!0,options:this.getColorOptions(),onSearch:this.onCodeSearch.bind(this,"customCode3"),onSelect:this.onCodeSelect.bind(this,"customCode3"),onClear:this.onCodeClear.bind(this,"customCode3"),style:{width:"100%"},notFoundContent:null,disabled:!this.props.createFlag,className:"product-search"})}))]}),message:"\u96f6\u4ef6\u7de8\u865f\u70ba\u5fc5\u586b",error:this.getFormErrorStatus("partId")})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},n),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u8eca\u7a2e",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.kindShortName,id:"kindShortName"})})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},n),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u55ae\u4f4d",content:Object(D.jsx)(Yt.a,{onChange:this.onSelectChange.bind(this,"unit"),value:this.state.formData.unit,options:Xe.unitList.map((function(t){return{label:t.desc,value:t.unit}})),optionFilterProp:"children",style:{width:"100%"}})})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},r),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u5546\u54c1\u540d\u7a31",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.name,id:"name"}),message:"\u5546\u54c1\u540d\u7a31\u70ba\u5fc5\u586b",error:this.getFormErrorStatus("name")})})),"VIRTUAL"===this.state.formData.productType?Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},r),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u5c0d\u61c9\u6599\u865f",content:Object(D.jsx)(Xt.a,{spinning:this.state.productSearchLoading,children:Object(D.jsx)(Yt.a,{showSearch:!0,showArrow:!1,value:this.state.formData.mappingProductId,searchValue:this.state.search.productId,onSearch:this.onMappingSearch,onSelect:this.onMappingSelect,optionFilterProp:"children",style:{width:"100%"},notFoundContent:null,className:"product-search",children:this.state.productList.map((function(e){return Object(D.jsx)(Yt.a.Option,{value:e.data,children:t.getMappingProductDisplay(e)},e.data)}))})}),message:"\u5c0d\u61c9\u6599\u865f\u70ba\u5fc5\u9078",error:this.getFormErrorStatus("mappingProductId")})})):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},a),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u5b9a\u50f91",content:Object(D.jsx)(me.a,{onChange:this.onNumberChange.bind(this,"price1"),value:this.state.formData.price1,min:0,max:99999999,step:1,style:{display:"block",width:"100%"}})})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},a),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u5b9a\u50f92",content:Object(D.jsx)(me.a,{onChange:this.onNumberChange.bind(this,"price2"),value:this.state.formData.price2,min:0,max:99999999,step:1,style:{display:"block",width:"100%"}})})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},a),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u5b9a\u50f93",content:Object(D.jsx)(me.a,{onChange:this.onNumberChange.bind(this,"price3"),value:this.state.formData.price3,min:0,max:99999999,step:1,style:{display:"block",width:"100%"}})})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},n),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u898f\u683c",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.norm,id:"norm"})})}))]}),"REAL"===this.state.formData.productType&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},n),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u539f\u5ee0\u6599\u865f",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.vendorProductId,id:"vendorProductId"})})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},a),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u5b89\u5168\u91cf",content:Object(D.jsx)(me.a,{onChange:this.onNumberChange.bind(this,"safetyStock"),value:this.state.formData.safetyStock,min:0,max:999999,step:1,style:{display:"block",width:"100%"}})})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},a),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u5eab\u5b58\u91cf",content:Object(D.jsx)(me.a,{onChange:this.onNumberChange.bind(this,"inventory"),value:this.state.formData.inventory,min:0,max:999999,step:1,style:{display:"block",width:"100%"}})})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},a),{},{children:Object(D.jsx)(ee,{required:!1,title:"\u5eab\u5b58\u5730\u9ede",content:Object(D.jsx)(yt.a,{onChange:this.onInputChange,value:this.state.formData.storingPlace,id:"storingPlace"})})}))]})]}))}),Object(D.jsx)(Zt.a,{className:"form-detail-card",children:Object(D.jsx)(Jt.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(D.jsx)(Ht.a,{span:24,children:Object(D.jsx)(ee,{required:!1,align:"flex-start",title:"\u5099\u8a3b",content:Object(D.jsx)(yt.a.TextArea,{onChange:this.onInputChange,value:this.state.formData.note,id:"note",autoSize:{minRows:4,maxRows:4}}),message:"\u9577\u5ea6\u9700\u5728255\u5b57\u5167",error:this.getFormErrorStatus("note")})})}))}),"REAL"===this.state.formData.productType&&Object(D.jsxs)(Zt.a,{className:"form-detail-card",children:[Object(D.jsxs)(Jt.a,Object(d.a)(Object(d.a)({},e),{},{children:[Object(D.jsx)(Ht.a,{span:24,children:Object(D.jsx)("p",{className:"product-real-pictitle",children:"\u5546\u54c1\u7167\u7247"})}),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},i),{},{children:this.state.additionData.pic1Url?Object(D.jsxs)("div",{className:"product-real-pic",children:[Object(D.jsx)("img",{src:this.state.additionData.pic1Url,alt:"\u7167\u72471"}),Object(D.jsxs)("div",{className:"product-real-pic-option",children:[Object(D.jsx)(Dt.a,{onClick:this.openPic.bind(this,"pic1Url"),children:Object(D.jsx)(T,{})}),Object(D.jsx)($e.a,{showUploadList:!1,beforeUpload:this.onPicUpload.bind(this,"PIC1"),children:Object(D.jsx)(Dt.a,{children:Object(D.jsx)(F,{})})})]})]}):Object(D.jsx)($e.a,{className:"product-real-upload-wrapper",showUploadList:!1,beforeUpload:this.onPicUpload.bind(this,"PIC1"),children:Object(D.jsxs)(Dt.a,{className:"product-real-upload-btn",children:[Object(D.jsx)(_,{}),Object(D.jsx)("span",{children:"\u4e0a\u50b3\u7167\u7247"})]})})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},i),{},{children:this.state.additionData.pic2Url?Object(D.jsxs)("div",{className:"product-real-pic",children:[Object(D.jsx)("img",{src:this.state.additionData.pic2Url,alt:"\u7167\u72472"}),Object(D.jsxs)("div",{className:"product-real-pic-option",children:[Object(D.jsx)(Dt.a,{onClick:this.openPic.bind(this,"pic2Url"),children:Object(D.jsx)(T,{})}),Object(D.jsx)($e.a,{showUploadList:!1,beforeUpload:this.onPicUpload.bind(this,"PIC2"),children:Object(D.jsx)(Dt.a,{children:Object(D.jsx)(F,{})})})]})]}):Object(D.jsx)($e.a,{className:"product-real-upload-wrapper",showUploadList:!1,beforeUpload:this.onPicUpload.bind(this,"PIC2"),children:Object(D.jsxs)(Dt.a,{className:"product-real-upload-btn",children:[Object(D.jsx)(_,{}),Object(D.jsx)("span",{children:"\u4e0a\u50b3\u7167\u7247"})]})})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},i),{},{children:this.state.additionData.pic3Url?Object(D.jsxs)("div",{className:"product-real-pic",children:[Object(D.jsx)("img",{src:this.state.additionData.pic3Url,alt:"\u7167\u72473"}),Object(D.jsxs)("div",{className:"product-real-pic-option",children:[Object(D.jsx)(Dt.a,{onClick:this.openPic.bind(this,"pic3Url"),children:Object(D.jsx)(T,{})}),Object(D.jsx)($e.a,{showUploadList:!1,beforeUpload:this.onPicUpload.bind(this,"PIC3"),children:Object(D.jsx)(Dt.a,{children:Object(D.jsx)(F,{})})})]})]}):Object(D.jsx)($e.a,{className:"product-real-upload-wrapper",showUploadList:!1,beforeUpload:this.onPicUpload.bind(this,"PIC3"),children:Object(D.jsxs)(Dt.a,{className:"product-real-upload-btn",children:[Object(D.jsx)(_,{}),Object(D.jsx)("span",{children:"\u4e0a\u50b3\u7167\u7247"})]})})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},i),{},{children:this.state.additionData.pic4Url?Object(D.jsxs)("div",{className:"product-real-pic",children:[Object(D.jsx)("img",{src:this.state.additionData.pic4Url,alt:"\u7167\u72474"}),Object(D.jsxs)("div",{className:"product-real-pic-option",children:[Object(D.jsx)(Dt.a,{onClick:this.openPic.bind(this,"pic4Url"),children:Object(D.jsx)(T,{})}),Object(D.jsx)($e.a,{showUploadList:!1,beforeUpload:this.onPicUpload.bind(this,"PIC4"),children:Object(D.jsx)(Dt.a,{children:Object(D.jsx)(F,{})})})]})]}):Object(D.jsx)($e.a,{className:"product-real-upload-wrapper",showUploadList:!1,beforeUpload:this.onPicUpload.bind(this,"PIC4"),children:Object(D.jsxs)(Dt.a,{className:"product-real-upload-btn",children:[Object(D.jsx)(_,{}),Object(D.jsx)("span",{children:"\u4e0a\u50b3\u7167\u7247"})]})})}))]})),Object(D.jsx)(Rt.a,{className:"product-real-pic-modal",visible:this.state.picOpen,title:null,footer:null,onCancel:function(){return t.setState({picOpen:!1})},children:Object(D.jsx)("img",{src:this.state.picUrl,alt:"\u7167\u7247\u653e\u5927"})})]}),Object(D.jsx)("div",{style:{margin:"20px",textAlign:"center"},children:Object(D.jsxs)(Vt.b,{children:[this.props.createFlag?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),disabled:!this.state.canSubmit,onClick:this.handleCreate.bind(this,!0),children:"\u5132\u5b58"}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),disabled:!this.state.canSubmit,onClick:this.handleCreate.bind(this,!1),children:"\u5132\u5b58\u4e26\u7e7c\u7e8c\u65b0\u589e"})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),disabled:!this.state.canSubmit,onClick:this.handleSubmit.bind(this,!1),children:"\u5132\u5b58"}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),disabled:!this.state.canSubmit,onClick:this.handleSubmit.bind(this,!0),children:"\u5132\u5b58\u4e26\u8fd4\u56de\u5217\u8868"})]}),Object(D.jsx)(Dt.a,{danger:!0,icon:Object(D.jsx)(ne.a,{}),onClick:this.handleCancel,children:"\u53d6\u6d88"})]})})]})})]})}}]),a}(r.a.Component),ra=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(){return Object(p.a)(this,a),e.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var t=void 0!==this.props.seqNo?this.props.seqNo:this.props.match.params.seqNo;return Object(D.jsx)(na,{createFlag:this.props.createFlag,isDrawMode:this.props.isDrawMode,drawModeVisible:this.props.drawModeVisible,seqNo:t,onClose:this.props.onClose})}}]),a}(r.a.Component),ca=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).history=Object(vt.b)(),n.productAPI=new aa,n.getList=function(){var t=n.state,e=t.search,a=t.pagination,r={pageNum:a.current,pageSize:a.pageSize,productId:"%".concat(e.productId,"%"),name:"%".concat(e.name,"%"),customCode1:"%".concat(e.customCode1,"%")};n.productAPI.getProductList(r).then((function(t){a.total=t.data.total,n.setState({loading:!1,list:t.data.list,pagination:a})})).catch((function(){return n.setState({loading:!1})}))},n.onInputChange=function(t,e){var a=n.state.search;a[t]=e.target.value,n.setState({search:a})},n.handleSearch=function(){var t=n.state.pagination;t.current=1,n.setState({loading:!0,list:[],pagination:t},(function(){return n.getList()}))},n.getColumns=function(){var t=Object(Bt.a)(n),e=n.state.pagination;return[{dataIndex:"productType",title:"",width:6,fixed:"left",className:"product-table-type",render:function(t){return"REAL"===t?Object(D.jsx)("span",{className:"product-table-type-real"}):"VIRTUAL"===t?Object(D.jsx)("span",{className:"product-table-type-virtual"}):Object(D.jsx)("span",{className:"product-table-type-others"})}},{dataIndex:"seqNo",title:"\u57f7\u884c",width:50,render:function(e){return Object(D.jsxs)(Vt.b,{className:"list-table-option",children:[Object(D.jsx)(Ut.a,{title:"\u7de8\u8f2f",children:Object(D.jsx)(Dt.a,{className:"list-table-option-edit",size:"small",onClick:t.onDetailOpen.bind(t,!1,e),children:Object(D.jsx)(R,{})})}),Object(D.jsx)(Ut.a,{title:"\u522a\u9664",children:Object(D.jsx)(Dt.a,{className:"list-table-option-delete",size:"small",onClick:t.handleDelete.bind(t,e),children:Object(D.jsx)(V,{})})})]})}},{title:"\u5e8f",width:30,align:"center",render:function(t,a,n){return(e.current-1)*e.pageSize+n+1}},{title:"\u5546\u54c1\u7de8\u865f",dataIndex:"productId"},{title:"\u8eca\u7a2e\u540d\u7a31",dataIndex:"kindShortName"},{title:"\u5546\u54c1\u540d\u7a31",dataIndex:"name"},{title:"\u55ae\u4f4d",dataIndex:"unit",render:function(t){var e=Xe.unitList.find((function(e){return e.unit===t}));return e?e.desc:t}},{title:"\u898f\u683c",dataIndex:"norm"},{title:"\u984d\u5916\u8cc7\u8a0a",dataIndex:"productType",render:function(e,a){return"REAL"===e?Object(D.jsx)("div",{className:"list-table-addition",children:Object(D.jsxs)(Dt.a,{type:"link",onClick:t.onPhotoOpen.bind(t,a.seqNo),children:[Object(D.jsx)("span",{children:"\u67e5\u770b\u5546\u54c1\u7167\u7247"}),Object(D.jsx)(M,{})]})}):"VIRTUAL"===e?Object(D.jsx)("div",{className:"list-table-addition",children:Object(D.jsxs)(Dt.a,{type:"link",onClick:t.onProductOpen.bind(t,a.mappingProductSeqNo),children:[Object(D.jsxs)("span",{children:["\u5c0d\u61c9\u5546\u54c1\u7de8\u865f: ",a.mappingProductId]}),Object(D.jsx)(q,{})]})}):null}}]},n.handleDelete=function(t){Rt.a.confirm({title:"\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u7b46\u8cc7\u6599\u55ce",icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){console.log("delete: "+t)}})},n.onPageChange=function(t,e){var a=n.state.pagination;a.current=t,a.pageSize=e,n.setState({loading:!0,list:[],pagination:a},(function(){return n.getList()}))},n.onDetailOpen=function(t,e){return n.setState({detailCreate:t,detailSeqNo:e,detailVisible:!0})},n.onDetailClose=function(){return n.setState({detailVisible:!1})},n.onPhotoOpen=function(t){n.setState({photoVisible:!0,photoLoading:!0,photoList:[]},(function(){n.productAPI.getProductAdditionData(t).then((function(t){if(0===t.code){var e=[];t.data.pic1Url&&e.push(t.data.pic1Url),t.data.pic2Url&&e.push(t.data.pic2Url),t.data.pic3Url&&e.push(t.data.pic3Url),t.data.pic4Url&&e.push(t.data.pic4Url),n.setState({photoLoading:!1,photoList:e})}else O.b.error("\u8cc7\u6599\u8f09\u5165\u5931\u6557"),n.setState({photoVisible:!1})})).catch((function(){O.b.error("\u8cc7\u6599\u8f09\u5165\u5931\u6557"),n.setState({photoVisible:!1})}))}))},n.onProductOpen=function(t){window.open("".concat(window.location.href.split("#")[0],"#/Products/Detail/").concat(t))},n.state={loading:!0,search:{productId:"",customCode1:"",name:""},list:[],pagination:{current:1,total:0,pageSize:50,position:["bottomLeft"]},detailCreate:!0,detailSeqNo:0,detailVisible:!1,photoVisible:!1,photoLoading:!0,photoList:[]},n.getList(),n}return Object(b.a)(a,[{key:"render",value:function(){var t=this;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:"list-header",children:Object(D.jsxs)(Jt.a,{type:"flex",justify:"space-between",children:[Object(D.jsx)(Ht.a,{children:Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(_,{}),onClick:function(){return t.history.push("/Products/Add")},className:"list-header-add",children:"\u65b0\u589e"})}),Object(D.jsx)(Ht.a,{children:Object(D.jsxs)(Vt.b,{children:[Object(D.jsx)(yt.a,{placeholder:"\u5546\u54c1\u7de8\u865f",allowClear:!0,onChange:this.onInputChange.bind(this,"productId"),style:{width:100}}),Object(D.jsx)(yt.a,{placeholder:"\u81ea\u8a02\u78bc1",allowClear:!0,onChange:this.onInputChange.bind(this,"customCode1"),style:{width:100}}),Object(D.jsx)(yt.a,{placeholder:"\u5546\u54c1\u540d\u7a31",allowClear:!0,onChange:this.onInputChange.bind(this,"name"),style:{width:140}}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(H,{}),onClick:this.handleSearch,className:"list-header-search",children:"\u67e5\u8a62"})]})})]})}),Object(D.jsx)(_t.a,{className:"list-table-wrapper",rowKey:"seqNo",size:"small",columns:this.getColumns(),loading:this.state.loading,dataSource:this.state.list,rowClassName:function(t){return"VIRTUAL"===t.productType?"product-virtual":"OTHERS"===t.productType?"product-others":""},pagination:Gt(this.state.pagination,this.onPageChange)}),Object(D.jsx)(Ke,{width:480,placement:"right",closeIcon:Object(D.jsx)(xt,{}),title:this.state.detailCreate?"\u65b0\u589e\u5546\u54c1":"\u7de8\u8f2f\u5546\u54c1\u8cc7\u6599",visible:this.state.detailVisible,onClose:this.onDetailClose,children:Object(D.jsx)(ra,{createFlag:this.state.detailCreate,isDrawMode:!0,drawModeVisible:this.state.detailVisible,seqNo:this.state.detailSeqNo,onClose:this.onDetailClose})}),Object(D.jsx)(Rt.a,{className:"product-real-pic-modal",visible:this.state.photoVisible,title:null,footer:null,onCancel:function(){return t.setState({photoVisible:!1})},children:Object(D.jsx)(Xt.a,{spinning:this.state.photoLoading,children:Object(D.jsx)(We,{picList:this.state.photoList})})})]})}}]),a}(r.a.Component),ia=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).history=Object(vt.b)(),n.productAPI=new aa,n.getList=function(){var t=n.state,e=t.search,a=t.pagination,r={pageNum:a.current,pageSize:a.pageSize,productId:"%".concat(e.productId,"%"),name:"%".concat(e.name,"%"),customCode1:"%".concat(e.customCode1,"%")};n.productAPI.getProductList(r).then((function(t){a.total=t.data.total;var e={};t.data.list.forEach((function(t){"VIRTUAL"===t.productType&&(e[t.seqNo]={loading:!1,value:t.mappingProductId,search:"",searchTime:0,list:[],select:{}})})),Object.keys(e).length>0?n.setState({list:t.data.list,pagination:a,mappingSearch:e},(function(){return n.getMappingProducts(e).then((function(t){return n.setState({loading:!1,mappingSearch:t})}))})):n.setState({loading:!1,list:t.data.list,pagination:a,mappingSearch:{}})})).catch((function(){return n.setState({loading:!1})}))},n.getMappingProducts=function(){var t=Object(j.a)(h.a.mark((function t(e){var a,r,c,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=Object.keys(e),r=h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=i[c],t.next=3,new Promise((function(t){n.productAPI.searchProductMapping(!0,e[a].value).then((function(n){e[a].list=n.data,e[a].select=n.data[0],t(!0)}))}));case 3:case"end":return t.stop()}}),t)})),c=0,i=a;case 3:if(!(c<i.length)){t.next=8;break}return t.delegateYield(r(),"t0",5);case 5:c++,t.next=3;break;case 8:return t.abrupt("return",Promise.resolve(e));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.onInputChange=function(t,e){var a=n.state.search;a[t]=e.target.value,n.setState({search:a})},n.handleSearch=function(){var t=n.state.pagination;t.current=1,n.setState({loading:!0,list:[],pagination:t,mappingSearch:{}},(function(){return n.getList()}))},n.getColumns=function(){var t=Object(Bt.a)(n);return[{dataIndex:"productType",title:"",width:6,fixed:"left",className:"product-table-type",render:function(t){return"REAL"===t?Object(D.jsx)("span",{className:"product-table-type-real"}):"VIRTUAL"===t?Object(D.jsx)("span",{className:"product-table-type-virtual"}):Object(D.jsx)("span",{className:"product-table-type-others"})}},{dataIndex:"productId",title:"\u5546\u54c1\u4ee3\u865f",width:120,fixed:"left"},{dataIndex:"kindShortName",title:"\u8eca\u7a2e\u7c21\u7a31",width:140,fixed:"left"},{dataIndex:"name",title:"\u5546\u54c1\u540d\u7a31",width:300,fixed:"left",render:function(e,a){return Object(D.jsx)(yt.a,{value:e,onChange:t.onProductInputChange.bind(t,a.seqNo,"name")})}},{dataIndex:"norm",title:"\u898f\u683c",width:120,render:function(e,a){return"VIRTUAL"!==a.productType&&Object(D.jsx)(yt.a,{value:e,onChange:t.onProductInputChange.bind(t,a.seqNo,"norm")})}},{dataIndex:"price1",title:"\u5b9a\u50f91",width:120,render:function(e,a){return"REAL"===a.productType&&Object(D.jsx)(me.a,{value:e,min:0,max:99999999,step:1,onChange:t.onProductValueChange.bind(t,a.seqNo,"price1")})}},{dataIndex:"price2",title:"\u5b9a\u50f92",width:120,render:function(e,a){return"REAL"===a.productType&&Object(D.jsx)(me.a,{value:e,min:0,max:99999999,step:1,onChange:t.onProductValueChange.bind(t,a.seqNo,"price2")})}},{dataIndex:"price3",title:"\u5b9a\u50f93",width:120,render:function(e,a){return"REAL"===a.productType&&Object(D.jsx)(me.a,{value:e,min:0,max:99999999,step:1,onChange:t.onProductValueChange.bind(t,a.seqNo,"price3")})}},{dataIndex:"vendorProductId",title:"\u539f\u5ee0\u6599\u865f",width:200,render:function(e,a){return"REAL"===a.productType&&Object(D.jsx)(yt.a,{value:e,onChange:t.onProductInputChange.bind(t,a.seqNo,"vendorProductId")})}},{dataIndex:"safetyStock",title:"\u5b89\u5168\u91cf",width:120,render:function(e,a){return"REAL"===a.productType&&Object(D.jsx)(me.a,{value:e,min:0,max:999999,step:1,onChange:t.onProductValueChange.bind(t,a.seqNo,"safetyStock")})}},{dataIndex:"inventory",title:"\u5eab\u5b58\u91cf",width:120,render:function(e,a){return"REAL"===a.productType&&Object(D.jsx)(me.a,{value:e,min:0,max:999999,step:1,onChange:t.onProductValueChange.bind(t,a.seqNo,"inventory")})}},{dataIndex:"storingPlace",title:"\u5eab\u5b58\u5730\u9ede",width:200,render:function(e,a){return"REAL"===a.productType&&Object(D.jsx)(yt.a,{value:e,onChange:t.onProductInputChange.bind(t,a.seqNo,"storingPlace")})}},{dataIndex:"note",title:"\u5099\u8a3b",width:300,render:function(e,a){return Object(D.jsx)(yt.a.TextArea,{value:e,autoSize:{minRows:1,maxRows:1},onChange:t.onProductInputChange.bind(t,a.seqNo,"note")})}},{dataIndex:"mappingProductId",title:"\u5c0d\u61c9\u6599\u865f",width:420,render:function(e,a){if("VIRTUAL"===a.productType){var n=t.state.mappingSearch[a.seqNo];return n&&Object(D.jsx)(Xt.a,{spinning:n.loading,children:Object(D.jsx)(Yt.a,{showSearch:!0,showArrow:!1,value:n.value,searchValue:n.search,onSearch:t.onMappingSearch.bind(t,a.seqNo),onSelect:t.onMappingSelect.bind(t,a.seqNo),optionFilterProp:"children",style:{width:"100%"},notFoundContent:null,className:"product-search",children:n.list.map((function(e){return Object(D.jsx)(Yt.a.Option,{value:e.data,children:t.getMappingProductDisplay(e)},e.data)}))})})}return null}}]},n.onProductInputChange=function(t,e,a){var r=n.state.list,c=r.find((function(e){return e.seqNo===t}));c&&(c[e]=a.target.value,n.setState({list:r},(function(){return n.updateProduct(c)})))},n.onProductValueChange=function(t,e,a){var r=n.state.list,c=r.find((function(e){return e.seqNo===t}));c&&(c[e]=a,n.setState({list:r},(function(){return n.updateProduct(c)})))},n.getMappingProductDisplay=function(t){var e=t.desc1;if(t.desc2||t.desc3||t.desc4||t.desc5){var a="";a+=t.desc2?t.desc2:"",a+=t.desc3?""!==a?", ".concat(t.desc3):t.desc3:"",a+=t.desc4?""!==a?", ".concat(t.desc4):t.desc4:"",a+=t.desc5?""!==a?", ".concat(t.desc5):t.desc5:"",e+=" [".concat(a,"]")}return e},n.onMappingSearch=function(t,e){var a=n.state.mappingSearch;a[t].search=e,a[t].searchTime=y()().valueOf(),n.setState({mappingSearch:a},(function(){setTimeout((function(){y()().valueOf()-a[t].searchTime>=1e3&&""!==e?(a[t].loading=!0,n.setState({mappingSearch:a},(function(){n.productAPI.searchProductMapping(!0,e).then((function(e){a[t].loading=!1,a[t].list=e.data,n.setState({mappingSearch:a})})).catch((function(){a[t].loading=!1,n.setState({mappingSearch:a})}))}))):""===e&&(""!==a[t].value?a[t].list=[a[t].select]:a[t].list=[],n.setState({mappingSearch:a}))}),1e3)}))},n.onMappingSelect=function(t,e){var a=n.state,r=a.list,c=a.mappingSearch,i=c[t].list.find((function(t){return t.data===e}));if(i){var s=r.find((function(e){return e.seqNo===t}));i.finished?(c[t].search="",c[t].value=i.data,c[t].list=[i],c[t].select=i,s.mappingProductId=i.data,s.mappingProductSeqNo=i.productSeqNo,n.setState({list:r,mappingSearch:c},(function(){return n.updateProduct(s)}))):(c[t].search=e,c[t].value=i.data,c[t].list=[i],c[t].select=i,s.mappingProductId=i.data,s.mappingProductSeqNo=null,n.setState({list:r,mappingSearch:c},(function(){n.updateProduct(s)})))}},n.updateProduct=function(t){n.productAPI.updateProductData(t)},n.onPageChange=function(t,e){var a=n.state.pagination;a.current=t,a.pageSize=e,n.setState({loading:!0,list:[],pagination:a,mappingSearch:{}},(function(){return n.getList()}))},n.state={loading:!0,search:{productId:"",customCode1:"",name:""},list:[],pagination:{current:1,total:0,pageSize:50,position:["bottomLeft"]},mappingSearch:{}},n.getList(),n}return Object(b.a)(a,[{key:"render",value:function(){var t=this;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:"list-header",children:Object(D.jsxs)(Jt.a,{type:"flex",justify:"space-between",children:[Object(D.jsx)(Ht.a,{children:Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(_,{}),onClick:function(){return t.history.push("/Products/Add")},className:"list-header-add",children:"\u65b0\u589e"})}),Object(D.jsx)(Ht.a,{children:Object(D.jsxs)(Vt.b,{children:[Object(D.jsx)(yt.a,{placeholder:"\u5546\u54c1\u7de8\u865f",allowClear:!0,onChange:this.onInputChange.bind(this,"productId"),style:{width:100}}),Object(D.jsx)(yt.a,{placeholder:"\u81ea\u8a02\u78bc1",allowClear:!0,onChange:this.onInputChange.bind(this,"customCode1"),style:{width:100}}),Object(D.jsx)(yt.a,{placeholder:"\u5546\u54c1\u540d\u7a31",allowClear:!0,onChange:this.onInputChange.bind(this,"name"),style:{width:140}}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(H,{}),onClick:this.handleSearch,className:"list-header-search",children:"\u67e5\u8a62"})]})})]})}),Object(D.jsx)(_t.a,{className:"list-table-wrapper",rowKey:"seqNo",size:"small",columns:this.getColumns(),loading:this.state.loading,dataSource:this.state.list,rowClassName:function(t){return"VIRTUAL"===t.productType?"product-virtual":"OTHERS"===t.productType?"product-others":""},scroll:{x:2400},pagination:Gt(this.state.pagination,this.onPageChange)})]})}}]),a}(r.a.Component),sa=a(332),oa={purchaseId:0,accountDate:y()().startOf("day"),vendorId:"",note:"",purchaseDetails:[]},la=[],da=function t(){Object(p.a)(this,t),this.getPurchaseList=function(t){return Lt("get","/purchases",t).then((function(t){return t.data}))},this.getPurchaseData=function(t){return Lt("get","/purchases/".concat(t)).then((function(t){return t.data}))},this.addPurchaseData=function(t){return Lt("post","/purchases",t).then((function(t){return t.data}))},this.updatePurchaseData=function(t){return Lt("patch","/purchases/".concat(t.purchaseId),t).then((function(t){return t.data}))},this.searchProductMapping=function(t,e){return Lt("get","/products/smartQuery",{realProduct:t,queryString:e}).then((function(t){return t.data}))},this.getProductData=function(t){return Lt("get","/products/".concat(t)).then((function(t){return t.data}))},this.getProductHistoryPrice=function(t){return Lt("get","/products/historyPurchasePrice",{productSeqNo:t}).then((function(t){return t.data}))},this.getVendorsList=function(){return Lt("get","/vendor",{pageNum:1,pageSize:9999,queryByEnum:"VENDOR_ID",queryKeyWord:""}).then((function(t){return t.data}))},this.getColorsList=function(){return Lt("get","/colors",{pageNum:1,pageSize:9999,colorId:""}).then((function(t){return t.data}))}},ua=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).history=Object(vt.b)(),n.purchaseAPI=new da,n.getInitData=Object(j.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){n.purchaseAPI.getVendorsList().then((function(e){n.setState({vendorList:e.data.list},(function(){return t(!0)}))}))}));case 2:return t.next=4,new Promise((function(t){n.purchaseAPI.getColorsList().then((function(e){n.setState({colorList:e.data.list},(function(){return t(!0)}))}))}));case 4:case"end":return t.stop()}}),t)}))),n.getPurchaseData=function(){return new Promise((function(t,e){n.purchaseAPI.getPurchaseData(n.props.purchaseId).then((function(a){if(0===a.code){var r={},c={};a.data.purchaseDetails.forEach((function(t){c[t.detailNo]={loading:!1,value:t.productId,seqNo:t.productSeqNo,search:"",searchTime:0,list:[],select:{},historyLoading:!0,historyList:[]},r[t.detailNo]=JSON.parse(JSON.stringify(r))})),n.setState({loading:!1,formData:Object(d.a)(Object(d.a)({},a.data.purchaseMaster),{},{accountDate:y()(a.data.purchaseMaster.accountDate,"YYYY-MM-DD").startOf("day"),purchaseDetails:a.data.purchaseDetails}),recordStatus:r,mappingSearch:c},(function(){n.getMappingProducts(c).then((function(e){return n.setState({mappingSearch:e},(function(){return n.checkCanSubmit().then((function(){return t(!0)}))}))}))}))}else e(!1),O.b.error(a.message),n.props.isDrawMode?n.props.onClose():n.history.push("/Purchase/List")})).catch((function(){e(!1),O.b.error("Error!"),n.props.isDrawMode?n.props.onClose():n.history.push("/Purchase/List")}))}))},n.getMappingProducts=function(){var t=Object(j.a)(h.a.mark((function t(e){var a,r,c,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=Object.keys(e),r=h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=i[c],t.next=3,new Promise((function(t){n.purchaseAPI.searchProductMapping(!0,e[a].value).then((function(n){e[a].list=n.data,e[a].select=n.data[0],t(!0)}))}));case 3:case"end":return t.stop()}}),t)})),c=0,i=a;case 3:if(!(c<i.length)){t.next=8;break}return t.delegateYield(r(),"t0",5);case 5:c++,t.next=3;break;case 8:return t.abrupt("return",Promise.resolve(e));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.getFormErrorStatus=function(t){var e=n.state.formStatus.find((function(e){return e.key===t}));return!!e&&e.error},n.onInputChange=function(t){var e=t.target.getAttribute("id"),a=t.target.value,r=n.state.formData;r[e]=a,n.checkData(r,e)},n.onSelectChange=function(t,e){var a=n.state.formData;a[t]=e,n.checkData(a,t)},n.onNumberChange=function(t,e){var a=n.state.formData;a[t]=e,n.checkData(a,t)},n.onDateChange=function(t,e){var a=n.state.formData;a[t]=e,n.checkData(a,t)},n.onCodeSearch=function(t,e){if(!e.includes(" ")){var a=n.state.search;a[t]=e.toUpperCase(),n.setState({search:a})}},n.onCodeSelect=function(t,e){var a=n.state,r=a.formData,c=a.search,i=a.vendorList;if(c[t]="",r[t]=e,"vendorId"===t){var s=i.find((function(t){return t.vendorId.toLowerCase()===e.toLowerCase()}));s&&(r.vendorName=s.name)}n.setState({search:c},(function(){return n.checkData(r,t)}))},n.getVendorOptions=function(){var t=n.state,e=t.formData,a=t.search;return t.vendorList.filter((function(t){return e.vendorId===t.vendorId||a.vendorId&&t.vendorId.toLowerCase().includes(a.vendorId.toLowerCase())})).map((function(t){return{label:"".concat(t.vendorId," - ").concat(t.name),value:t.vendorId}}))},n.getDetailColumns=function(){var t=Object(Bt.a)(n);return[{dataIndex:"detailNo",title:"\u522a\u9664",width:60,fixed:"left",render:function(e){return Object(D.jsx)(Vt.b,{className:"list-table-option",children:Object(D.jsx)(Dt.a,{className:"list-table-option-delete",size:"small",onClick:t.onProductDelete.bind(t,e),children:Object(D.jsx)(V,{})})})}},{dataIndex:"productId",title:"\u5546\u54c1\u4ee3\u865f",width:400,fixed:"left",render:function(e,a){var r=n.state.mappingSearch[a.detailNo];return Object(D.jsx)(Xt.a,{spinning:r.loading,children:Object(D.jsx)(Yt.a,{showSearch:!0,showArrow:!1,value:r.value,searchValue:r.search,onSearch:t.onMappingSearch.bind(t,a.detailNo),onSelect:t.onMappingSelect.bind(t,a.detailNo),optionFilterProp:"children",style:{width:"100%"},notFoundContent:null,className:"product-search",children:r.list.map((function(e){return Object(D.jsx)(Yt.a.Option,{value:e.data,children:t.getMappingProductDisplay(e)},e.data)}))})})}},{dataIndex:"productName",title:"\u5546\u54c1\u540d\u7a31",width:240,render:function(t,e){return e.productSeqNo&&t}},{dataIndex:"kindShortName",title:"\u8eca\u7a2e\u7c21\u7a31",width:160,render:function(t,e){return e.productSeqNo&&t}},{dataIndex:"norm",title:"\u898f\u683c",width:120,render:function(t,e){return e.productSeqNo&&t}},{dataIndex:"quantity",title:"\u9032\u8ca8\u91cf",width:100,render:function(e,a){return a.productSeqNo&&Object(D.jsx)(me.a,{value:e,min:1,max:999999,step:1,onChange:t.onDetailNumberChange.bind(t,a.detailNo,"quantity"),style:{width:"100%"}})}},{dataIndex:"price",title:"\u9032\u8ca8\u50f9",width:140,render:function(e,a){return Object(D.jsxs)("div",{className:"purchase-price-row",children:[Object(D.jsx)("div",{className:"purchase-price-input",children:Object(D.jsx)(me.a,{value:e,min:0,max:99999999,step:1,onChange:t.onDetailNumberChange.bind(t,a.detailNo,"price"),style:{width:"100%"}})}),Object(D.jsx)("div",{className:"purchase-price-view",children:Object(D.jsx)(sa.a,{title:"\u6b77\u53f2\u9032\u50f9",content:t.displayHistoryPrice(a.detailNo),overlayClassName:"purchase-history-price",onVisibleChange:t.onVisibleChange.bind(t,a.detailNo),children:Object(D.jsx)(Dt.a,{children:Object(D.jsx)(H,{})})})})]})}},{dataIndex:"amount",title:"\u91d1\u984d",width:140,render:function(t){return"$ ".concat(t).replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{dataIndex:"remark",title:"\u5099\u8a3b",width:300,render:function(e,a){return a.productSeqNo&&Object(D.jsx)(yt.a,{value:e,onChange:t.onDetailInputChange.bind(t,a.detailNo,"remark")})}},{dataIndex:"color",title:"\u984f\u8272",width:140,render:function(e,a){return a.productSeqNo&&Object(D.jsx)(Yt.a,{placeholder:"\u9078\u64c7\u984f\u8272",value:""===e?null:e,showSearch:!0,showArrow:!1,allowClear:!0,onChange:t.onDetailSelectChange.bind(t,a.detailNo,"color"),style:{width:"100%"},notFoundContent:null,children:t.state.colorList.map((function(t){return Object(D.jsx)(Yt.a.Option,{value:t.name,children:t.name},t.colorId)}))})}},{dataIndex:"vendorProductId",title:"\u539f\u5ee0\u6599\u865f",width:200,render:function(e,a){return a.productSeqNo&&Object(D.jsx)(yt.a,{value:e,onChange:t.onDetailInputChange.bind(t,a.detailNo,"vendorProductId")})}}]},n.onDetailInputChange=function(t,e,a){var r=n.state.formData,c=r.purchaseDetails.find((function(e){return e.detailNo===t}));c&&(c[e]=a.target.value,n.setState({formData:r},(function(){return n.checkRecordData(t,c,e)})))},n.onDetailSelectChange=function(t,e,a){var r=n.state.formData,c=r.purchaseDetails.find((function(e){return e.detailNo===t}));c&&(c[e]=a,n.setState({formData:r},(function(){return n.checkRecordData(t,c,e)})))},n.onDetailNumberChange=function(t,e,a){var r=n.state.formData,c=r.purchaseDetails.find((function(e){return e.detailNo===t}));c&&(c[e]=a,c.amount=c.quantity*c.price,n.setState({formData:r},(function(){return n.checkRecordData(t,c,e)})))},n.onProductAdd=function(){var t=n.state,e=t.formData,a=t.recordStatus,r=t.mappingSearch,c=e.purchaseDetails.length+1;e.purchaseDetails.push({detailNo:c,productId:"",productSeqNo:null,productName:"",kindShortName:"",norm:"",quantity:1,price:0,amount:0,remark:"",color:"",vendorProductId:""}),a[c]=JSON.parse(JSON.stringify(a)),r[c]={loading:!1,value:"",seqNo:null,search:"",searchTime:0,list:[],select:{},historyLoading:!0,historyList:[]},n.setState({formData:e,recordStatus:a,mappingSearch:r})},n.onProductDelete=function(t){var e=n.state,a=e.formData,r=e.recordStatus,c=e.mappingSearch,i=a.purchaseDetails.findIndex((function(e){return e.detailNo===t}));a.purchaseDetails.splice(i,1),delete r[t],delete c[t],n.setState({formData:a,recordStatus:r,mappingSearch:c})},n.onVisibleChange=function(t,e){var a=n.state.mappingSearch,r=a[t];e&&r.seqNo&&r.historyLoading&&n.purchaseAPI.getProductHistoryPrice(r.seqNo).then((function(e){a[t].historyLoading=!1,a[t].historyList=e.data.map((function(t,e){return Object(d.a)(Object(d.a)({},t),{},{index:e})})),n.setState({mappingSearch:a})})).catch((function(){a[t].historyLoading=!1,n.setState({mappingSearch:a})}))},n.displayHistoryPrice=function(t){var e=n.state.mappingSearch[t];return Object(D.jsx)(_t.a,{className:"purchase-history-list",rowKey:"index",size:"small",columns:n.getHistoryColumns(),dataSource:e.historyList,scroll:{y:240},loading:e.historyLoading,pagination:!1})},n.getHistoryColumns=function(){return[{dataIndex:"accountDate",title:"\u65e5\u671f",width:100},{dataIndex:"vendorName",title:"\u5ee0\u5546\u540d\u7a31",width:180},{dataIndex:"amount",title:"\u9032\u50f9",width:100,render:function(t,e){var a=t/e.quantity;return"$ ".concat(a).replace(/\B(?=(\d{3})+(?!\d))/g,",")}}]},n.getMappingProductDisplay=function(t){var e=t.desc1;if(t.desc2||t.desc3||t.desc4||t.desc5){var a="";a+=t.desc2?t.desc2:"",a+=t.desc3?""!==a?", ".concat(t.desc3):t.desc3:"",a+=t.desc4?""!==a?", ".concat(t.desc4):t.desc4:"",a+=t.desc5?""!==a?", ".concat(t.desc5):t.desc5:"",e+=" [".concat(a,"]")}return e},n.onMappingSearch=function(t,e){var a=n.state.mappingSearch;a[t].search=e,a[t].searchTime=y()().valueOf(),n.setState({mappingSearch:a},(function(){setTimeout((function(){y()().valueOf()-a[t].searchTime>=1e3&&""!==e?(a[t].loading=!0,n.setState({mappingSearch:a},(function(){n.purchaseAPI.searchProductMapping(!0,e).then((function(e){a[t].loading=!1,a[t].list=e.data,n.setState({mappingSearch:a})})).catch((function(){a[t].loading=!1,n.setState({mappingSearch:a})}))}))):""===e&&(""!==a[t].value?a[t].list=[a[t].select]:a[t].list=[],n.setState({mappingSearch:a}))}),1e3)}))},n.onMappingSelect=function(t,e){var a=n.state,r=a.formData,c=a.mappingSearch,i=c[t].list.find((function(t){return t.data===e}));if(i){var s=r.purchaseDetails.find((function(e){return e.detailNo===t}));i.finished?(c[t].search="",c[t].value=i.data,c[t].seqNo=i.productSeqNo,c[t].list=[i],c[t].select=i,n.setState({mappingSearch:c,detailLoading:!0},(function(){n.purchaseAPI.getProductData(i.productSeqNo).then((function(t){s.productId=i.data,s.productSeqNo=i.productSeqNo,s.productName=t.data.name,s.kindShortName=t.data.kindShortName,s.norm=t.data.norm,s.quantity=1,s.price=0,s.amount=0,s.color="",s.unit=t.data.unit,s.vendorProductId=t.data.vendorProductId,n.setState({formData:r,detailLoading:!1})}))}))):(c[t].search=e,c[t].value=i.data,c[t].seqNo=i.productSeqNo,c[t].list=[i],c[t].select=i,s.productId=i.data,s.productSeqNo=null,s.productName="",s.kindShortName="",s.norm="",s.quantity=1,s.price=0,s.amount=0,s.color="",s.unit="",s.vendorProductId="",n.setState({formData:r,mappingSearch:c}))}},n.checkData=function(t,e){var a=n.state.formStatus,r=a.find((function(t){return t.key===e}));if(r){var c=t[e],i=!1;r.required&&!c&&(i=!0),r.length&&r.length.length>0&&c&&(1===r.length.length&&c.length>r.length[0]||r.length.length>1&&(c.length<r.length[0]||c.length>r.length[1]))&&(i=!0),r.regExp&&!r.regExp.test(c)&&(i=!0),r.error=i}n.setState({formData:t,formStatus:a},(function(){return n.checkCanSubmit()}))},n.checkRecordData=function(t,e,a){var r=n.state.recordStatus;r[t];n.setState({recordStatus:r},(function(){return n.checkCanSubmit()}))},n.checkCanSubmit=function(){return new Promise((function(t){for(var e=!1,a=0,r=Object.keys(n.state.recordStatus);a<r.length;a++){var c=r[a];if(n.state.recordStatus[c].error){e=!0;break}}n.setState({canSubmit:!n.state.formStatus.some((function(t){return t.error}))&&!e},(function(){return t(!0)}))}))},n.handleCreate=function(t){n.setState({loading:!0},(function(){var e=n.state.formData;e.purchaseDetails=e.purchaseDetails.filter((function(t){return null!==t.productSeqNo})),n.purchaseAPI.addPurchaseData(e).then((function(e){if(0===e.code)if(O.b.success("\u6210\u529f\u65b0\u589e\u8cc7\u6599"),t)n.props.isDrawMode?n.props.onClose():n.history.push("/Purchase/List");else{var a=document.querySelector(".ant-drawer-body"),r=document.getElementById("layout-content-wrapper");a&&a.scrollTo({top:0,behavior:"smooth"}),r&&r.scrollTo({top:0,behavior:"smooth"}),n.setState({loading:!1,formData:Object(d.a)({},oa),formStatus:JSON.parse(JSON.stringify(la)),search:{vendorId:""},canSubmit:!1})}else Rt.a.error({title:e.message,icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(t){O.b.error(t.response.data.message),n.setState({loading:!1})}))}))},n.handleSubmit=function(t){n.setState({loading:!0},(function(){var e=n.state.formData;e.purchaseDetails=e.purchaseDetails.filter((function(t){return null!==t.productSeqNo})),n.purchaseAPI.updatePurchaseData(n.state.formData).then((function(e){if(0===e.code)if(O.b.success("\u6210\u529f\u66f4\u65b0\u8cc7\u6599"),t)n.props.isDrawMode?n.props.onClose():n.history.push("/Purchase/List");else{var a=document.querySelector(".ant-drawer-body"),r=document.getElementById("layout-content-wrapper");a&&a.scrollTo({top:0,behavior:"smooth"}),r&&r.scrollTo({top:0,behavior:"smooth"}),n.getPurchaseData()}else Rt.a.error({title:e.message,icon:Object(D.jsx)(Kt.a,{}),content:e.data.map((function(t,e){return Object(D.jsxs)(D.Fragment,{children:[e>0&&Object(D.jsx)("br",{}),t.split(": ")[1]]})})),okText:"\u78ba\u8a8d",cancelText:null,onOk:function(){n.setState({loading:!1})}})})).catch((function(){O.b.error("\u8cc7\u6599\u66f4\u65b0\u5931\u6557"),n.setState({loading:!1})}))}))},n.handleCancel=function(){n.props.isDrawMode?n.props.onClose():n.history.push("/Purchase/List")},n.state={loading:!0,formData:Object(d.a)({},oa),formStatus:JSON.parse(JSON.stringify(la)),recordStatus:{},search:{vendorId:""},detailLoading:!1,mappingSearch:{},vendorList:[],colorList:[],canSubmit:!1},n.getInitData().then((function(){t.createFlag?n.setState({loading:!1}):n.getPurchaseData().then((function(){return n.setState({loading:!1})}))})),n}return Object(b.a)(a,[{key:"componentDidUpdate",value:function(t){var e=this;(!t.createFlag&&this.props.createFlag||!t.drawModeVisible&&this.props.drawModeVisible||!this.props.createFlag&&t.purchaseId!==this.props.purchaseId)&&this.setState({loading:!0,formData:Object(d.a)({},oa),formStatus:JSON.parse(JSON.stringify(la)),recordStatus:{},search:{vendorId:""},detailLoading:!1,mappingSearch:{},canSubmit:!1},(function(){return e.getInitData().then((function(){e.props.createFlag?e.setState({loading:!1}):e.getPurchaseData().then((function(){return e.setState({loading:!1})}))}))}))}},{key:"render",value:function(){var t=this,e=this.props.isDrawMode?{gutter:[12,12],type:"flex",align:"middle",style:{marginBottom:12,marginTop:12}}:{gutter:[24,24],type:"flex",align:"middle",style:{marginBottom:24,marginTop:24}},a=this.props.isDrawMode?{span:24}:{xs:24,sm:24,md:24,lg:8},n=this.props.isDrawMode?{span:24}:{xs:24,sm:24,md:24,lg:16};return Object(D.jsxs)(D.Fragment,{children:[!this.props.isDrawMode&&Object(D.jsxs)($t.a,{style:{marginBottom:10},children:[Object(D.jsx)($t.a.Item,{children:Object(D.jsx)(s.b,{to:"/Purchase/List",children:"\u9032\u8ca8\u55ae"})}),Object(D.jsx)($t.a.Item,{children:this.props.createFlag?"\u65b0\u589e\u9032\u8ca8\u55ae":"\u4fee\u6539\u9032\u8ca8\u55ae\u8cc7\u6599"})]}),Object(D.jsxs)(Xt.a,{spinning:this.state.loading,children:[Object(D.jsx)(Zt.a,{className:"form-detail-card",children:Object(D.jsxs)(Jt.a,Object(d.a)(Object(d.a)({},e),{},{children:[Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},a),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u9032\u8ca8\u65e5\u671f",content:Object(D.jsx)(ge.a,{value:this.state.formData.accountDate,allowClear:!1,disabled:!this.props.createFlag,onChange:this.onDateChange.bind(this,"accountDate"),style:{width:"100%"}})})})),Object(D.jsx)(Ht.a,Object(d.a)(Object(d.a)({},n),{},{children:Object(D.jsx)(ee,{required:!0,title:"\u5ee0\u5546",content:Object(D.jsx)(Yt.a,{placeholder:"\u641c\u5c0b\u5ee0\u5546\u4ee3\u865f",value:this.state.formData.vendorId,searchValue:this.state.search.vendorId,showSearch:!0,showArrow:!1,options:this.getVendorOptions(),onSearch:this.onCodeSearch.bind(this,"vendorId"),onSelect:this.onCodeSelect.bind(this,"vendorId"),style:{width:"100%"},notFoundContent:null,disabled:!this.props.createFlag})})})),Object(D.jsx)(Ht.a,{span:24,children:Object(D.jsx)(ee,{required:!1,title:"\u5099\u8a3b",align:"flex-start",content:Object(D.jsx)(yt.a.TextArea,{onChange:this.onInputChange,value:this.state.formData.note,id:"note",autoSize:{minRows:4,maxRows:4}}),message:"\u9577\u5ea6\u9700\u5728255\u5b57\u5167",error:this.getFormErrorStatus("note")})})]}))}),Object(D.jsx)(Zt.a,{className:"form-detail-card purchase-detail-card",children:Object(D.jsx)(_t.a,{className:"purchase-detail-table",rowKey:"detailNo",size:"small",columns:this.getDetailColumns(),dataSource:JSON.parse(JSON.stringify(this.state.formData.purchaseDetails)),footer:function(){return Object(D.jsx)(Dt.a,{onClick:t.onProductAdd,children:"\u65b0\u589e\u5546\u54c1"})},scroll:{x:1900},loading:this.state.detailLoading,pagination:!1})}),Object(D.jsx)("div",{style:{margin:"20px",textAlign:"center"},children:Object(D.jsxs)(Vt.b,{children:[this.props.createFlag?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),disabled:!this.state.canSubmit,onClick:this.handleCreate.bind(this,!0),children:"\u5132\u5b58"}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),disabled:!this.state.canSubmit,onClick:this.handleCreate.bind(this,!1),children:"\u5132\u5b58\u4e26\u7e7c\u7e8c\u65b0\u589e"})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),disabled:!this.state.canSubmit,onClick:this.handleSubmit.bind(this,!1),children:"\u5132\u5b58"}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(ae.a,{}),disabled:!this.state.canSubmit,onClick:this.handleSubmit.bind(this,!0),children:"\u5132\u5b58\u4e26\u8fd4\u56de\u5217\u8868"})]}),Object(D.jsx)(Dt.a,{danger:!0,icon:Object(D.jsx)(ne.a,{}),onClick:this.handleCancel,children:"\u53d6\u6d88"})]})})]})]})}}]),a}(r.a.Component),ha=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(){return Object(p.a)(this,a),e.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var t=void 0!==this.props.purchaseId?this.props.purchaseId:this.props.match.params.purchaseId;return Object(D.jsx)(ua,{createFlag:this.props.createFlag,isDrawMode:this.props.isDrawMode,drawModeVisible:this.props.drawModeVisible,purchaseId:t,onClose:this.props.onClose})}}]),a}(r.a.Component),ja=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).history=Object(vt.b)(),n.purchaseAPI=new da,n.getList=function(){var t=n.state,e=t.search,a=t.pagination,r={pageNum:a.current,pageSize:a.pageSize};e.id&&(r.queryBy=e.id,r.condition=e.keyword),e.date&&(r.beginDate=e.date[0].format("YYYY-MM-DD"),r.endDate=e.date[1].format("YYYY-MM-DD")),n.purchaseAPI.getPurchaseList(r).then((function(t){a.total=t.data.total,n.setState({loading:!1,list:t.data.list,pagination:a})})).catch((function(){return n.setState({loading:!1})}))},n.onDateChange=function(t){var e=n.state.search;e.date=t,n.setState({search:e,loading:!0,list:[]},(function(){return n.getList()}))},n.onSelectChange=function(t){var e=n.state.search;e.id=t,t||(e.keyword=""),n.setState({search:e})},n.onInputChange=function(t){var e=n.state.search;e.keyword=t.target.value,n.setState({search:e})},n.handleSearch=function(){var t=n.state.pagination;t.current=1,n.setState({loading:!0,list:[],pagination:t},(function(){return n.getList()}))},n.getColumns=function(){var t=Object(Bt.a)(n),e=n.state.pagination;return[{dataIndex:"purchaseId",title:"\u57f7\u884c",width:50,render:function(e){return Object(D.jsx)(Vt.b,{className:"list-table-option",children:Object(D.jsx)(Ut.a,{title:"\u7de8\u8f2f",children:Object(D.jsx)(Dt.a,{className:"list-table-option-edit",size:"small",onClick:t.onDetailOpen.bind(t,e),children:Object(D.jsx)(R,{})})})})}},{title:"\u5e8f",width:30,align:"center",render:function(t,a,n){return(e.current-1)*e.pageSize+n+1}},{title:"\u65e5\u671f",dataIndex:"accountDate"},{title:"\u9032\u8ca8\u7de8\u865f",dataIndex:"purchaseId"},{title:"\u5ee0\u5546\u4ee3\u865f",dataIndex:"vendorId"},{title:"\u5ee0\u5546\u540d\u7a31",dataIndex:"vendorName"},{title:"\u7e3d\u91d1\u984d",dataIndex:"totalAmount",align:"right",render:function(t){return"$ ".concat(t).replace(/\B(?=(\d{3})+(?!\d))/g,",")}}]},n.handleDelete=function(t){Rt.a.confirm({title:"\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u7b46\u8cc7\u6599\u55ce",icon:Object(D.jsx)(Kt.a,{}),okText:"\u78ba\u8a8d",cancelText:"\u53d6\u6d88",onOk:function(){console.log("delete: "+t)}})},n.onPageChange=function(t,e){var a=n.state.pagination;a.current=t,a.pageSize=e,n.setState({loading:!0,list:[],pagination:a},(function(){return n.getList()}))},n.onDetailOpen=function(t){return n.history.push("/Purchase/Detail/".concat(t))},n.state={loading:!0,search:{date:[y()().startOf("month").startOf("day"),y()().endOf("month").startOf("day")],id:void 0,keyword:""},list:[],pagination:{current:1,total:0,pageSize:10,position:["bottomLeft"]},detailPurchaseId:0,detailVisible:!1},n.getList(),n}return Object(b.a)(a,[{key:"render",value:function(){var t=this;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:"list-header",children:Object(D.jsxs)(Jt.a,{type:"flex",justify:"space-between",children:[Object(D.jsx)(Ht.a,{children:Object(D.jsxs)(Vt.b,{children:[Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(_,{}),onClick:function(){return t.history.push("/Purchase/Add")},className:"list-header-add",children:"\u65b0\u589e"}),Object(D.jsx)(ge.a.RangePicker,{defaultValue:this.state.search.date,allowClear:!1,onChange:this.onDateChange})]})}),Object(D.jsx)(Ht.a,{children:Object(D.jsxs)(Vt.b,{children:[Object(D.jsxs)(Yt.a,{placeholder:"\u641c\u5c0b\u6b04\u4f4d",value:this.state.search.id,allowClear:!0,onChange:this.onSelectChange,children:[Object(D.jsx)(Yt.a.Option,{value:"PURCHASE_ID",children:"\u9032\u8ca8\u55ae\u865f"}),Object(D.jsx)(Yt.a.Option,{value:"VENDOR_ID",children:"\u5ee0\u5546\u4ee3\u865f"}),Object(D.jsx)(Yt.a.Option,{value:"NOTE",children:"\u5099\u8a3b"})]}),Object(D.jsx)(yt.a,{placeholder:"\u641c\u5c0b\u5167\u5bb9",allowClear:!0,onChange:this.onInputChange}),Object(D.jsx)(Dt.a,{type:"primary",icon:Object(D.jsx)(H,{}),onClick:this.handleSearch,className:"list-header-search",children:"\u67e5\u8a62"})]})})]})}),Object(D.jsx)(_t.a,{className:"list-table-wrapper",rowKey:"purchaseId",size:"small",columns:this.getColumns(),loading:this.state.loading,dataSource:this.state.list,pagination:Gt(this.state.pagination,this.onPageChange)})]})}}]),a}(r.a.Component),pa=function t(){Object(p.a)(this,t),this.getUnitList=function(){return Lt("get","/common/units").then((function(t){return t.data}))}};y.a.locale("zh-tw");var ba=function(t){Object(g.a)(a,t);var e=Object(m.a)(a);function a(t){var n;Object(p.a)(this,a),(n=e.call(this,t)).staticStorage=new Xe,n.globalAPI=new pa,n.getGlobalData=Object(j.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){n.globalAPI.getUnitList().then((function(e){n.staticStorage.setUnitList(e.data),t(!0)}))}));case 2:case"end":return t.stop()}}),t)}))),n.clearCookie=function(){var t=document.cookie.split(";");t.find((function(t){return t.includes("MOTOBUY_KEEP_LOGIN")}))&&"true"===t.find((function(t){return t.includes("MOTOBUY_KEEP_LOGIN")})).split("=")[1]||(document.cookie="MOTOBUY_AUTH=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT")},n.onLogin=function(){n.getGlobalData().then((function(){return n.setState({isAuth:!0})}))},n.onLogout=function(){O.b.success("\u5df2\u6210\u529f\u767b\u51fa"),document.cookie="MOTOBUY_AUTH=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",n.setState({isAuth:!1})};var r=document.cookie.split(";");return n.state={isLand:!r.find((function(t){return t.includes("MOTOBUY_AUTH")})),isAuth:!1,siderCollapsed:!1},r.find((function(t){return t.includes("MOTOBUY_AUTH")}))&&function(t,e,a){var n={url:"https://britz-psi-heroku.herokuapp.com/test/v1"+e,method:t,timeout:6e4,headers:{Authorization:"Basic "+Pt()}};return"get"===t&&a&&Object.keys(a).length>0?n.params=a:a&&Object.keys(a).length>0&&(n.data=a),new Promise((function(t,e){wt()(n).then((function(e){return t(e)})).catch((function(t){e(t),console.log(t.response)}))}))}("get","/auth").then((function(t){0===t.data.code?n.getGlobalData().then((function(){n.setState({isLand:!0,isAuth:!0})})):n.setState({isLand:!0})})).catch((function(){return n.setState({isLand:!0})})),n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.clearCookie)}},{key:"componentWillUnmount",value:function(){this.clearCookie()}},{key:"render",value:function(){var t=this;return this.state.isLand?this.state.isAuth?Object(D.jsx)(f.b,{locale:v.a,children:Object(D.jsxs)(x.a,{className:"layout-wrapper",children:[Object(D.jsx)(x.a.Sider,{collapsible:!0,collapsed:this.state.siderCollapsed,onCollapse:function(e){return t.setState({siderCollapsed:e})},trigger:Object(D.jsx)(dt,{}),className:"layout-sider-wrapper",children:Object(D.jsx)(o.a,{path:"/:type?/:page?",component:qt})}),Object(D.jsxs)(x.a,{className:"layout-main",children:[Object(D.jsx)(x.a.Header,{className:"layout-header",children:Object(D.jsx)(zt,{onLogout:this.onLogout})}),Object(D.jsx)(x.a.Content,{id:"layout-content-wrapper",className:"layout-content-wrapper",children:Object(D.jsxs)(o.c,{children:[Object(D.jsx)(o.a,{exact:!0,path:"/Basic/Supplier/Add",render:function(t){return Object(D.jsx)(se,Object(d.a)(Object(d.a)({},t),{},{createFlag:!0}))}}),Object(D.jsx)(o.a,{exact:!0,path:"/Basic/Supplier/:vendorId",render:function(t){return Object(D.jsx)(se,Object(d.a)(Object(d.a)({},t),{},{createFlag:!1}))}}),Object(D.jsx)(o.a,{exact:!0,path:"/Basic/Supplier",component:Wt}),Object(D.jsx)(o.a,{exact:!0,path:"/Basic/Customer/Add",render:function(t){return Object(D.jsx)(je,Object(d.a)(Object(d.a)({},t),{},{createFlag:!0}))}}),Object(D.jsx)(o.a,{exact:!0,path:"/Basic/Customer/:customerId",render:function(t){return Object(D.jsx)(je,Object(d.a)(Object(d.a)({},t),{},{createFlag:!1}))}}),Object(D.jsx)(o.a,{exact:!0,path:"/Basic/Customer",component:le}),Object(D.jsx)(o.a,{exact:!0,path:"/Basic/Employee/Add",render:function(t){return Object(D.jsx)(Se,Object(d.a)(Object(d.a)({},t),{},{createFlag:!0}))}}),Object(D.jsx)(o.a,{exact:!0,path:"/Basic/Employee/:employeeId",render:function(t){return Object(D.jsx)(Se,Object(d.a)(Object(d.a)({},t),{},{createFlag:!1}))}}),Object(D.jsx)(o.a,{exact:!0,path:"/Basic/Employee",component:be}),Object(D.jsx)(o.a,{exact:!0,path:"/Parts/Vehicle/Add",render:function(t){return Object(D.jsx)(ke,Object(d.a)(Object(d.a)({},t),{},{createFlag:!0}))}}),Object(D.jsx)(o.a,{exact:!0,path:"/Parts/Vehicle/:kindId",render:function(t){return Object(D.jsx)(ke,Object(d.a)(Object(d.a)({},t),{},{createFlag:!1}))}}),Object(D.jsx)(o.a,{exact:!0,path:"/Parts/Vehicle",component:Ce}),Object(D.jsx)(o.a,{exact:!0,path:"/Parts/Level/Add",render:function(t){return Object(D.jsx)(Ee,Object(d.a)(Object(d.a)({},t),{},{createFlag:!0}))}}),Object(D.jsx)(o.a,{exact:!0,path:"/Parts/Level/:gradeId",render:function(t){return Object(D.jsx)(Ee,Object(d.a)(Object(d.a)({},t),{},{createFlag:!1}))}}),Object(D.jsx)(o.a,{exact:!0,path:"/Parts/Level",component:Ne}),Object(D.jsx)(o.a,{exact:!0,path:"/Parts/Colour/Add",render:function(t){return Object(D.jsx)(Be,Object(d.a)(Object(d.a)({},t),{},{createFlag:!0}))}}),Object(D.jsx)(o.a,{exact:!0,path:"/Parts/Colour/:colorId",render:function(t){return Object(D.jsx)(Be,Object(d.a)(Object(d.a)({},t),{},{createFlag:!1}))}}),Object(D.jsx)(o.a,{exact:!0,path:"/Parts/Colour",component:Ae}),Object(D.jsx)(o.a,{exact:!0,path:"/Parts/Component/Add",render:function(t){return Object(D.jsx)(Ye,Object(d.a)(Object(d.a)({},t),{},{createFlag:!0}))}}),Object(D.jsx)(o.a,{exact:!0,path:"/Parts/Component/:partId",render:function(t){return Object(D.jsx)(Ye,Object(d.a)(Object(d.a)({},t),{},{createFlag:!1}))}}),Object(D.jsx)(o.a,{exact:!0,path:"/Parts/Component",component:Ue}),Object(D.jsx)(o.a,{exact:!0,path:"/Products/Add",render:function(t){return Object(D.jsx)(ra,Object(d.a)(Object(d.a)({},t),{},{createFlag:!0}))}}),Object(D.jsx)(o.a,{exact:!0,path:"/Products/Detail/:seqNo",render:function(t){return Object(D.jsx)(ra,Object(d.a)(Object(d.a)({},t),{},{createFlag:!1}))}}),Object(D.jsx)(o.a,{exact:!0,path:"/Products/QuickEdit",component:ia}),Object(D.jsx)(o.a,{exact:!0,path:"/Products/List",component:ca}),Object(D.jsx)(o.a,{exact:!0,path:"/Purchase/Add",render:function(t){return Object(D.jsx)(ha,Object(d.a)(Object(d.a)({},t),{},{createFlag:!0}))}}),Object(D.jsx)(o.a,{exact:!0,path:"/Purchase/Detail/:purchaseId",render:function(t){return Object(D.jsx)(ha,Object(d.a)(Object(d.a)({},t),{},{createFlag:!1}))}}),Object(D.jsx)(o.a,{exact:!0,path:"/Purchase/List",component:ja}),Object(D.jsx)(o.a,{path:"/",component:Mt})]})}),Object(D.jsx)(x.a.Footer,{className:"layout-footer",children:"2021 \xa9 Copyright"})]})]})}):Object(D.jsx)(f.b,{locale:v.a,children:Object(D.jsx)(Ft,{onLogin:this.onLogin})}):null}}]),a}(r.a.Component);a(309),a(310),a(311),a(312),a(313),a(314),a(315);i.a.render(Object(D.jsx)(s.a,{children:Object(D.jsx)(o.a,{path:"/:type?/:page?/:id?",component:ba})}),document.getElementById("root")),l()}},[[316,1,2]]]);
//# sourceMappingURL=main.5d667da6.chunk.js.map